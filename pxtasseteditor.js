!function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return r(t[o][1][e]||e)}),u,u.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AssetEditor=void 0;const i=e("react"),r=e("react-dom"),a=e("./components/ImageFieldEditor"),o=e("./components/TilemapFieldEditor"),s=e("./components/ImageEditor/store/imageReducer");document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.getElementById("asset-editor-field-div");r.render(i.createElement(l,null),e)}()}));class l extends i.Component{constructor(e){super(e),this.tilemapName="tilemap_asset",this.tileWidth=16,this.handleMessage=e=>{if(e.data._fromVscode)if("initialize"===e.data.type)switch(this.state.viewType){case"sprite":this.editor.loadJres(e.data.message);break;case"tilemap":this.tilemapName=e.data.name,this.tileWidth=e.data.tileWidth,this.initTilemap(e.data.message)}else"update"===e.data.type&&this.sendJres()},this.refHandler=e=>{this.editor=e,"tilemap"===this.state.viewType&&this.initTilemap()},this.callbackOnDoneClick=()=>{this.sendJres()};let t="sprite";const n=/view(?:[:=])([a-zA-Z]+)/i.exec(window.location.href);n&&"tilemap"===n[1]&&(t="tilemap"),this.state={viewType:t},s.setTelemetryFunction(c)}postMessage(e){window.parent.postMessage(e,"*")}initTilemap(e){this.tilemapProject=new pxt.TilemapProject,this.tilemapProject.loadTilemapJRes(e?this.parseJres(e):{});let t=this.tilemapProject.getTilemap(this.tilemapName).data;if(!t){const[e,n]=this.tilemapProject.createNewTilemap(this.tilemapName,this.tileWidth,16,16);t=n,this.tilemapName=e}this.editor.init(t,this.callbackOnDoneClick)}updateTilemap(){const e=this.editor.getValue();if(e.deletedTiles)for(const t of e.deletedTiles)this.tilemapProject.deleteTile(t);if(e.editedTiles)for(const t of e.editedTiles){const n=e.tileset.tiles.findIndex((e=>e.id===t)),i=e.tileset.tiles[n];i&&!i.id.startsWith("*")&&(e.tileset.tiles[n]=this.tilemapProject.updateTile(i))}for(let t=0;t<e.tileset.tiles.length;t++){const n=e.tileset.tiles[t];if(n.id.startsWith("*")){const i=this.tilemapProject.createNewTile(n.bitmap);e.tileset.tiles[t]=i}else n.jresData||(e.tileset.tiles[t]=this.tilemapProject.resolveTile(n.id))}this.tilemapProject.updateTilemap(this.tilemapName,e)}componentDidMount(){window.addEventListener("message",this.handleMessage,null),this.postMessage({type:"ready",message:this.state.viewType}),c("asset-editor-shown")}componentWillUnmount(){window.removeEventListener("message",this.handleMessage,null)}sendJres(){let e;switch(this.state.viewType){case"sprite":e=this.editor.getJres();break;case"tilemap":this.updateTilemap();const t=this.tilemapProject.getProjectTilesetJRes(),n={jres:t,ts:pxt.emitTilemapsFromJRes(t)};e=JSON.stringify(n)}this.postMessage({type:"update",message:e})}parseJres(e){const t={};let n=JSON.parse(e);return pxt.inflateJRes(n,t),t}render(){return"tilemap"===this.state.viewType?i.createElement(o.TilemapFieldEditor,{ref:this.refHandler}):i.createElement(a.ImageFieldEditor,{ref:this.refHandler,singleFrame:!0,doneButtonCallback:this.callbackOnDoneClick})}}function c(e){pxt.tickEvent("asset.editor",{action:e})}n.AssetEditor=l},{"./components/ImageEditor/store/imageReducer":21,"./components/ImageFieldEditor":27,"./components/TilemapFieldEditor":28,react:82,"react-dom":60}],2:[function(e,t,n){"use strict";function i(e,t=new pxt.ImageConverter){var n;switch(e.type){case"image":case"tile":return e.previewURI=t.convert("data:image/x-mkcd-f,"+e.jresData),e;case"tilemap":let i=e.data.tilemap;return e.previewURI=pxtblockly.tilemapToImageURI(e.data,Math.max(i.width,i.height),!1),e;case"animation":return(null===(n=e.frames)||void 0===n?void 0:n.length)<=0?null:(e.framePreviewURIs=e.frames.map((e=>t.convert("data:image/x-mkcd-f,"+pxt.sprite.base64EncodeBitmap(e)))),e.previewURI=e.framePreviewURIs[0],e)}}function r(e,t){return e.internalID-t.internalID}Object.defineProperty(n,"__esModule",{value:!0}),n.assetToGalleryItem=n.getAssets=n.getNewInternalID=n.lookupAsset=n.createTile=n.createProjectImage=n.createNewImageAsset=n.isNameTaken=void 0,n.isNameTaken=function(e){return pxt.react.getTilemapProject().isNameTaken("image",e)},n.createNewImageAsset=function(e,t,n,i){const r=pxt.react.getTilemapProject();switch(e){case"tile":return r.createNewTile(new pxt.sprite.Bitmap(t,n).data(),null,i);case"image":return r.createNewImage(t,n)}return null},n.createProjectImage=function(e){return pxt.react.getTilemapProject().createNewProjectImage(e)},n.createTile=function(e,t,n){return pxt.react.getTilemapProject().createNewTile(e,t,n)},n.lookupAsset=function(e,t){return pxt.react.getTilemapProject().lookupAsset(e,t)},n.getNewInternalID=function(){return pxt.react.getTilemapProject().getNewInternalId()},n.getAssets=function(e=!1,t="image",n=[]){const a=pxt.react.getTilemapProject(),o=new pxt.ImageConverter,s=e=>i(e,o),l=e?a.getGalleryAssets.bind(a):a.getAssets.bind(a),c=l("image").map(s).sort(r),u=l("tile").map(s).filter((e=>!e.id.match(/^myTiles.transparency(8|16|32)$/gi))).sort(r),d=l("tilemap").map(s).sort(r),p=l("animation").map(s).sort(r);for(const e of n)switch(e.type){case"image":c.push(s(e));break;case"tile":u.push(s(e));break;case"animation":p.push(s(e));break;case"tilemap":d.push(s(e))}let f=[];switch(t){case"image":f=c.concat(u).concat(p).concat(d);break;case"tile":f=u.concat(c).concat(p).concat(d);break;case"animation":f=p.concat(c).concat(u).concat(d);break;case"tilemap":f=d.concat(u).concat(c).concat(p)}return pxt.tickEvent(e?"assets.gallery":"assets.update",{count:f.length}),f},n.assetToGalleryItem=i},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FilterPanel=n.FilterPanelSubheading=n.FilterTag=void 0;const i=e("react"),r=e("../util");class a extends i.Component{constructor(e){super(e),this.clickHandler=this.clickHandler.bind(this)}render(){return i.createElement("div",{className:"filter-tag"},i.createElement("div",{className:"filter-tag-box",role:"checkbox",onClick:this.clickHandler,onKeyDown:r.fireClickOnEnter,"aria-checked":this.props.selected},i.createElement("i",{className:"icon square outline "+(this.props.selected?"check":"")})),i.createElement("div",{className:"filter-tag-name",role:"button",onClick:this.clickHandler,onKeyDown:r.fireClickOnEnter},pxtc.U.rlf(this.props.tag)))}clickHandler(){this.props.onClickHandler(this.props.tag)}}n.FilterTag=a;class o extends i.Component{render(){return i.createElement("div",{className:"filter-subheading-row"},i.createElement("div",{className:"filter-subheading-title"},`${this.props.subheading}:`),this.props.buttonText&&i.createElement("div",{className:"filter-subheading-button",role:"button",style:this.props.buttonStyle,onClick:this.props.buttonAction,onKeyDown:r.fireClickOnEnter},this.props.buttonText))}}n.FilterPanelSubheading=o;class s extends i.Component{isTagSelected(e){return this.props.enabledTags.indexOf(e.toLowerCase())>=0}render(){const e=this.props.tagOptions;return i.createElement("div",{className:"filter-panel"},i.createElement("div",{className:"filter-title"},lf("Filter")),i.createElement(o,{subheading:lf("Categories"),buttonText:lf("Clear"),buttonAction:this.props.clearTags,buttonStyle:this.props.enabledTags.length>0?{color:"white"}:{}}),i.createElement("div",{className:"filter-tag-list"},e.map((e=>i.createElement(a,{key:e,tag:e,selected:this.isTagSelected(e),onClickHandler:this.props.tagClickHandler})))))}}n.FilterPanel=s},{"../util":34,react:82}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Alert=void 0;const i=e("react"),r=e("react-redux"),a=e("./actions/dispatch");class o extends i.Component{constructor(e){super(e)}render(){const{title:e,text:t,options:n,dispatchHideAlert:r}=this.props;return i.createElement("div",{className:"image-editor-alert-container",role:"region",onClick:r},i.createElement("div",{className:"image-editor-alert",role:"dialog"},i.createElement("div",{className:"title"},i.createElement("span",{className:"ms-Icon ms-Icon--Warning"}),i.createElement("span",null,e),i.createElement("span",{className:"ms-Icon ms-Icon--Cancel",role:"button",onClick:r})),i.createElement("div",{className:"text"},t),n&&i.createElement("div",{className:"options"},n.map(((e,t)=>i.createElement("div",{key:t,className:"button",role:"button",onClick:e.onClick},e.label))))))}}const s={dispatchHideAlert:a.dispatchHideAlert};n.Alert=r.connect((function({editor:e},t){return e?t:{}}),s)(o)},{"./actions/dispatch":17,react:82,"react-redux":74}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BottomBar=n.BottomBarImpl=void 0;const i=e("react"),r=e("react-redux"),a=e("./actions/dispatch"),o=e("./Button"),s=e("./util"),l=e("../../assets"),c=e("./keyboardShortcuts");class u extends i.Component{constructor(e){super(e),this.disableShortcutsOnFocus=()=>{this.setShortcutsEnabled(!1)},this.handleWidthChange=e=>{const t=e.target.value,n=parseInt(t),{aspectRatioLocked:i,imageDimensions:r}=this.props;!isNaN(n)&&i?this.setState({width:n+"",height:Math.floor(n*(r[1]/r[0]))+""}):this.setState({width:t})},this.handleHeightChange=e=>{const t=e.target.value,n=parseInt(t),{aspectRatioLocked:i,imageDimensions:r}=this.props;!isNaN(n)&&i?this.setState({height:n+"",width:Math.floor(n*(r[0]/r[1]))+""}):this.setState({height:t})},this.handleDimensionalBlur=()=>{const{imageDimensions:e,isTilemap:t,dispatchChangeImageDimensions:n}=this.props,i=parseInt(this.state.width),r=parseInt(this.state.height),a=t?255:512,o=isNaN(i)?e[0]:Math.min(Math.max(i,1),a),s=isNaN(r)?e[1]:Math.min(Math.max(r,1),a);o===e[0]&&s===e[1]||n([o,s]),this.setState({width:null,height:null}),this.setShortcutsEnabled(!0)},this.handleDimensionalKeydown=e=>{13===("number"==typeof e.which?e.which:e.keyCode)&&e.currentTarget.blur()},this.handleAssetNameChange=e=>{let t=null;const n=e.target.value.trim(),i=e.target.value;pxt.validateAssetName(n)?l.isNameTaken(n)&&n!==this.props.assetName&&(t=lf("This name is already used elsewhere in your project")):t=lf("Names may only contain letters, numbers, '-', '_', and space"),this.setState({assetName:i,assetNameMessage:t})},this.handleAssetNameBlur=()=>{const{dispatchChangeAssetName:e,assetName:t}=this.props;let n=this.state.assetName.trim();n!==t&&pxt.validateAssetName(n)&&!l.isNameTaken(n)&&e(n),this.setState({assetName:null,assetNameMessage:null}),this.setShortcutsEnabled(!0)},this.zoomIn=()=>{this.props.dispatchChangeZoom(1)},this.zoomOut=()=>{this.props.dispatchChangeZoom(-1)},this.state={}}render(){const{imageDimensions:e,cursorLocation:t,hasUndo:n,hasRedo:r,dispatchUndoImageEdit:a,dispatchRedoImageEdit:l,aspectRatioLocked:c,onionSkinEnabled:u,dispatchToggleAspectRatioLocked:d,dispatchToggleOnionSkinEnabled:p,resizeDisabled:f,singleFrame:h,onDoneClick:m,assetName:g}=this.props,{assetNameMessage:y}=this.state,v=null==this.state.width?e[0]:this.state.width,b=null==this.state.height?e[1]:this.state.height,E=null==this.state.assetName?g||"":this.state.assetName;return i.createElement("div",{className:"image-editor-bottombar"},!f&&i.createElement("div",{className:"image-editor-resize"},i.createElement("input",{className:"image-editor-input",title:lf("Image Width"),value:v,tabIndex:0,onChange:this.handleWidthChange,onFocus:this.disableShortcutsOnFocus,onBlur:this.handleDimensionalBlur,onKeyDown:this.handleDimensionalKeydown}),i.createElement(o.IconButton,{onClick:d,iconClass:c?"ms-Icon ms-Icon--Lock":"ms-Icon ms-Icon--Unlock",title:c?lf("Unlock Aspect Ratio"):lf("Lock Aspect Ratio"),toggle:!c,noTab:!0}),i.createElement("input",{className:"image-editor-input",title:lf("Image Height"),value:b,tabIndex:0,onChange:this.handleHeightChange,onFocus:this.disableShortcutsOnFocus,onBlur:this.handleDimensionalBlur,onKeyDown:this.handleDimensionalKeydown})),!h&&i.createElement("div",{className:"image-editor-seperator"}),!h&&i.createElement("div",null,i.createElement(o.IconButton,{onClick:p,iconClass:"ms-Icon ms-Icon--MapLayers",title:u?lf("Hide Previous Frame"):lf("Show Previous Frame"),toggle:!u})),t&&!f&&i.createElement("div",{className:"image-editor-seperator"}),i.createElement("div",{className:"image-editor-coordinate-preview"},t&&`${t[0]}, ${t[1]}`),i.createElement("div",{className:"image-editor-change-name"},i.createElement("input",{className:"image-editor-input",title:lf("Asset Name"),value:E,placeholder:lf("Asset Name"),tabIndex:0,onChange:this.handleAssetNameChange,onFocus:this.disableShortcutsOnFocus,onBlur:this.handleAssetNameBlur,onKeyDown:this.handleDimensionalKeydown}),y&&i.createElement("div",{className:"ui pointing below red basic label"},y)),i.createElement("div",{className:"image-editor-undo-redo"},i.createElement(o.IconButton,{title:lf("Undo"),iconClass:"ms-Icon ms-Icon--Undo",onClick:n?a:null,disabled:!n}),i.createElement(o.IconButton,{title:lf("Redo"),iconClass:"ms-Icon ms-Icon--Redo",onClick:r?l:null,disabled:!r})),i.createElement("div",{className:"image-editor-seperator"}),i.createElement("div",{className:"image-editor-zoom-controls"},i.createElement(o.IconButton,{onClick:this.zoomOut,iconClass:"ms-Icon ms-Icon--ZoomOut",title:lf("Zoom Out"),toggle:!0}),i.createElement(o.IconButton,{onClick:this.zoomIn,iconClass:"ms-Icon ms-Icon--ZoomIn",title:lf("Zoom In"),toggle:!0})),i.createElement("div",{role:"button",className:"image-editor-confirm",title:lf("Done"),tabIndex:0,onClick:m,onKeyDown:s.fireClickOnlyOnEnter},lf("Done")))}setShortcutsEnabled(e){e&&this.shortcutLock?(c.releaseShortcutLock(this.shortcutLock),this.shortcutLock=void 0):e||this.shortcutLock||(this.shortcutLock=c.obtainShortcutLock())}}n.BottomBarImpl=u;const d={dispatchChangeImageDimensions:a.dispatchChangeImageDimensions,dispatchUndoImageEdit:a.dispatchUndoImageEdit,dispatchRedoImageEdit:a.dispatchRedoImageEdit,dispatchToggleAspectRatioLocked:a.dispatchToggleAspectRatioLocked,dispatchToggleOnionSkinEnabled:a.dispatchToggleOnionSkinEnabled,dispatchChangeZoom:a.dispatchChangeZoom,dispatchChangeAssetName:a.dispatchChangeAssetName};n.BottomBar=r.connect((function({store:{present:e,past:t,future:n},editor:i},r){var a,o,s;if(!e)return{};const l=i.isTilemap?e.tilemap.bitmap:e.frames[e.currentFrame].bitmap;return{imageDimensions:[l.width,l.height],aspectRatioLocked:e.aspectRatioLocked,onionSkinEnabled:i.onionSkinEnabled,cursorLocation:i.cursorLocation,resizeDisabled:"tile"===(null===(a=e.asset)||void 0===a?void 0:a.type),assetName:null===(s=null===(o=e.asset)||void 0===o?void 0:o.meta)||void 0===s?void 0:s.displayName,hasUndo:!!t.length,hasRedo:!!n.length,isTilemap:i.isTilemap}}),d)(u)},{"../../assets":2,"./Button":6,"./actions/dispatch":17,"./keyboardShortcuts":19,"./util":26,react:82,"react-redux":74}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IconButton=void 0;const i=e("react"),r=e("./util");class a extends i.Component{render(){const{title:e,iconClass:t,onClick:n,toggle:a,disabled:o,noTab:s}=this.props;return i.createElement("div",{role:"button",className:`image-editor-button ${a?"toggle":""} ${o?"disabled":""}`,title:e,tabIndex:s||o?-1:0,onClick:n,onKeyDown:r.fireClickOnlyOnEnter},i.createElement("span",{className:t}))}}n.IconButton=a},{"./util":26,react:82}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CursorSizes=void 0;const i=e("react"),r=e("./actions/dispatch"),a=e("react-redux");class o extends i.Component{constructor(){super(...arguments),this.handlers=[]}render(){const{selected:e}=this.props;return i.createElement("div",{className:"cursor-buttons"},i.createElement("div",{className:"cursor-button-outer "+(1===e?"selected":""),title:lf("Small Cursor (1px)"),role:"button",onClick:this.clickHandler(1)},i.createElement("div",{className:"cursor-button small"})),i.createElement("div",{className:"cursor-button-outer "+(3===e?"selected":""),title:lf("Medium Cursor (3px)"),role:"button",onClick:this.clickHandler(3)},i.createElement("div",{className:"cursor-button medium"})),i.createElement("div",{className:"cursor-button-outer "+(5===e?"selected":""),title:lf("Large Cursor (5px)"),role:"button",onClick:this.clickHandler(5)},i.createElement("div",{className:"cursor-button large"})))}clickHandler(e){return this.handlers[e]||(this.handlers[e]=()=>{const{dispatchChangeCursorSize:t}=this.props;t(e)}),this.handlers[e]}}const s={dispatchChangeCursorSize:r.dispatchChangeCursorSize};n.CursorSizes=a.connect((function({editor:e},t){return e?{selected:e.cursorSize}:{}}),s)(o)},{"./actions/dispatch":17,react:82,"react-redux":74}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Dropdown=void 0;const i=e("react");class r extends i.Component{constructor(e){super(e),this.handlers=[],this.handleDropdownClick=()=>{this.setState({open:!this.state.open})},this.state={open:!1}}componentDidUpdate(){this.handlers=[]}componentWillUnmount(){this.handlers=null}render(){const{options:e,selected:t}=this.props,{open:n}=this.state,r=e[t];return i.createElement("div",{className:"image-editor-dropdown-outer"},i.createElement("button",{className:"image-editor-dropdown","aria-haspopup":"listbox",onClick:this.handleDropdownClick,tabIndex:-1},(null==r?void 0:r.text)||"",i.createElement("span",{className:"image-editor-dropdown-chevron ms-Icon ms-Icon--ChevronDown"})),i.createElement("ul",{tabIndex:-1,role:"listbox","aria-activedescendant":null==r?void 0:r.id,className:n&&e.length?"":"hidden"},e.map(((e,n)=>i.createElement("li",{key:e.id,role:"option","aria-selected":n===t,className:n===t?"selected":"",onClick:this.clickHandler(n)},e.text)))))}clickHandler(e){if(!this.handlers[e]){const{onChange:t,options:n}=this.props;this.handlers[e]=()=>{this.setState({open:!1}),t(n[e],e)}}return this.handlers[e]}}n.Dropdown=r},{react:82}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ImageCanvas=n.ImageCanvasImpl=void 0;const i=e("react"),r=e("react-redux"),a=e("./store/imageReducer"),o=e("./actions/dispatch"),s=e("./util"),l=e("./toolDefinitions"),c=e("../../assets"),u=e("./keyboardShortcuts"),d=e("./ImageEditor"),p=[a.TileDrawingMode.Wall];class f extends i.Component{constructor(){super(...arguments),this.cursor=l.ToolCursor.Crosshair,this.zoom=2.5,this.panX=0,this.panY=0,this.hasInteracted=!1,this.tileCache={},this.onKeyDown=e=>{var t,n,i,r,o,s;if(u.areShortcutsEnabled()){if(this.hasInteracted=!0,this.shouldHandleCanvasShortcut()&&(null===(n=null===(t=this.editState)||void 0===t?void 0:t.floating)||void 0===n?void 0:n.image)){let t=!1;switch(e.key){case"ArrowLeft":this.editState.layerOffsetX=Math.max(this.editState.layerOffsetX-1,-this.editState.floating.image.width),t=!0;break;case"ArrowUp":this.editState.layerOffsetY=Math.max(this.editState.layerOffsetY-1,-this.editState.floating.image.height),t=!0;break;case"ArrowRight":this.editState.layerOffsetX=Math.min(this.editState.layerOffsetX+1,this.editState.width),t=!0;break;case"ArrowDown":this.editState.layerOffsetY=Math.min(this.editState.layerOffsetY+1,this.editState.height),t=!0}t&&(this.props.dispatchImageEdit(this.editState.toImageState()),e.preventDefault())}if(!e.repeat){switch(!e.ctrlKey&&!e.metaKey||"c"!==e.key&&"v"!==e.key||e.stopPropagation(),(e.ctrlKey||e.metaKey)&&"a"===e.key&&this.shouldHandleCanvasShortcut()&&(this.selectAll(),e.preventDefault()),"Escape"==e.key&&(null===(r=null===(i=this.editState)||void 0===i?void 0:i.floating)||void 0===r?void 0:r.image)&&this.shouldHandleCanvasShortcut()&&(this.cancelSelection(),e.preventDefault()),("Backspace"===e.key||"Delete"===e.key)&&(null===(s=null===(o=this.editState)||void 0===o?void 0:o.floating)||void 0===s?void 0:s.image)&&this.shouldHandleCanvasShortcut()&&(this.deleteSelection(),e.preventDefault()),this.lastTool=this.props.tool,e.keyCode){case 18:this.props.dispatchChangeImageTool(a.ImageEditorTool.ColorSelect),e.preventDefault();break;case 32:this.props.dispatchChangeImageTool(a.ImageEditorTool.Pan);break;default:this.lastTool=null}this.updateCursor(!1,!1)}}},this.onKeyUp=e=>{null!=this.lastTool&&(this.props.dispatchChangeImageTool(this.lastTool),this.lastTool=null,this.updateCursor(!1,!1))},this.onCopy=e=>{var t,n;if(this.props.tool===a.ImageEditorTool.Marquee&&(null===(n=null===(t=this.editState)||void 0===t?void 0:t.floating)||void 0===n?void 0:n.image))if(e.preventDefault(),this.props.isTilemap)e.clipboardData.setData("application/makecode-tilemap",JSON.stringify(s.createTilemapPatchFromFloatingLayer(this.editState,this.props.tilemapState.tileset)));else{const t=pxt.sprite.bitmapToImageLiteral(this.editState.floating.image,"typescript");e.clipboardData.setData("application/makecode-image",t),e.clipboardData.setData("text/plain",t)}},this.onPaste=e=>{if(this.props.isTilemap){const t=e.clipboardData.getData("application/makecode-tilemap");let n;try{n=JSON.parse(t)}catch(e){}if(!(n&&n.map&&n.layers&&n.tiles))return;return e.preventDefault(),void this.applyTilemapPatch(n)}let t=e.clipboardData.getData("application/makecode-image");if(!t){const n=e.clipboardData.getData("text/plain"),i=/img(`|\(""")[\s\da-f.#tngrpoyw]+(`|"""\))/im.exec(n);i&&(t=i[0])}const n=t&&pxt.sprite.imageLiteralToBitmap(t);n&&n.width&&n.height&&(e.preventDefault(),this.props.tool!==a.ImageEditorTool.Marquee&&this.props.dispatchChangeImageTool(a.ImageEditorTool.Marquee),this.editState.setFloatingLayer(n),this.props.dispatchImageEdit(this.editState.toImageState()))},this.preventContextMenu=e=>e.preventDefault()}render(){const e=this.getImageState(),t=!e||e.bitmap.height>e.bitmap.width,n=!this.props.isTilemap&&this.props.tool==a.ImageEditorTool.Marquee;return i.createElement("div",{ref:"canvas-bounds",className:"image-editor-canvas "+(t?"portrait":"landscape"),onContextMenu:this.preventContextMenu},i.createElement("div",{className:"paint-container"},!this.props.lightMode&&i.createElement("canvas",{ref:"paint-surface-bg",className:"paint-surface"}),i.createElement("canvas",{ref:"paint-surface",className:"paint-surface main"}),p.map(((e,t)=>i.createElement("canvas",{ref:`paint-surface-${e.toString()}`,className:"paint-surface overlay "+(this.props.overlayEnabled?"":"hide"),key:t}))),i.createElement("div",{ref:"floating-layer-border",className:"image-editor-floating-layer"}),n&&i.createElement("div",{ref:"floating-layer-nw-corner",className:"image-editor-floating-layer-corner"}),n&&i.createElement("div",{ref:"floating-layer-ne-corner",className:"image-editor-floating-layer-corner"}),n&&i.createElement("div",{ref:"floating-layer-se-corner",className:"image-editor-floating-layer-corner"}),n&&i.createElement("div",{ref:"floating-layer-sw-corner",className:"image-editor-floating-layer-corner"})))}componentDidMount(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.tileCache={},this.cellWidth=this.props.isTilemap?this.props.tilemapState.tileset.tileWidth:1,this.canvas=this.refs["paint-surface"],this.background=this.refs["paint-surface-bg"],this.floatingLayer=this.refs["floating-layer-border"],this.canvasLayers=p.map((e=>this.refs[`paint-surface-${e.toString()}`])),s.bindGestureEvents(this.refs["canvas-bounds"],this);const e=this.refs["canvas-bounds"];e.addEventListener("wheel",(e=>{this.hasInteracted=!0,this.updateZoom(e.deltaY/30,e.clientX,e.clientY),e.preventDefault()})),e.addEventListener("mousemove",(e=>{e.button||(this.hasHover=!0),this.edit||this.updateCursorLocation(e)})),e.addEventListener("mouseout",(e=>{this.edit||this.updateCursorLocation(null)})),document.addEventListener("keydown",this.onKeyDown,!0),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("copy",this.onCopy),document.addEventListener("paste",this.onPaste);const t=this.getImageState();this.editState=l.getEditState(t,this.props.isTilemap,this.props.drawingMode),this.redraw(),this.updateBackground()}componentDidUpdate(){if(!this.edit||!this.editState){const e=this.getImageState();this.editState=l.getEditState(e,this.props.isTilemap,this.props.drawingMode)}if(this.props.isTilemap||(this.tileCache={}),this.cellWidth=this.props.isTilemap?this.props.tilemapState.tileset.tileWidth:1,this.props.zoomDelta||0===this.props.zoomDelta)return 0===this.props.zoomDelta?this.hasInteracted||this.zoomToCanvas():(this.hasInteracted=!0,this.updateZoom(this.props.zoomDelta)),void this.props.dispatchChangeZoom(null);this.redraw(),this.updateBackground()}componentWillUnmount(){this.tileCache={},document.removeEventListener("keydown",this.onKeyDown,!0),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("copy",this.onCopy),document.removeEventListener("paste",this.onPaste)}onClick(e,t){var n,i;this.hasInteracted=!0,this.isPanning()||(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.isColorSelect()?this.selectCanvasColor(e,t):(this.updateCursorLocation(e),this.inBounds(this.cursorLocation[0],this.cursorLocation[1])?(this.touchesResize(e.clientX,e.clientY)&&(this.isResizing=!0),this.startEdit(!!t),this.updateEdit(this.cursorLocation[0],this.cursorLocation[1]),this.commitEdit()):(null===(i=null===(n=this.editState)||void 0===n?void 0:n.floating)||void 0===i?void 0:i.image)&&(this.editState.mergeFloatingLayer(),this.props.dispatchImageEdit(this.editState.toImageState()))))}onDragStart(e,t){this.hasInteracted=!0,this.touchesResize(e.clientX,e.clientY)&&(this.isResizing=!0),this.isPanning()?(this.lastPanX=e.clientX,this.lastPanY=e.clientY,this.updateCursor(!0,!1)):this.isColorSelect()?this.selectCanvasColor(e,t):(this.updateCursorLocation(e),this.startEdit(!!t))}onDragMove(e){if(this.isPanning()&&null!=this.lastPanX&&null!=this.lastPanY)this.panX+=this.lastPanX-e.clientX,this.panY+=this.lastPanY-e.clientY,this.lastPanX=e.clientX,this.lastPanY=e.clientY,this.updateCursor(!0,!1);else{if(!this.edit)return;this.updateCursorLocation(e)&&this.updateEdit(this.cursorLocation[0],this.cursorLocation[1])}}onDragEnd(e){if(this.isPanning()&&null!=this.lastPanX&&null!=this.lastPanY)this.panX+=this.lastPanX-e.clientX,this.panY+=this.lastPanY-e.clientY,this.lastPanX=void 0,this.lastPanY=void 0,this.updateCursor(!1,!1);else if(this.isResizing){if(!this.edit)return;this.updateCursorLocation(e)&&this.updateEdit(this.cursorLocation[0],this.cursorLocation[1]),this.commitEdit(!1),this.updateCursor(!1,!1)}else{if(!this.edit)return;this.updateCursorLocation(e)&&this.updateEdit(this.cursorLocation[0],this.cursorLocation[1]),this.commitEdit()}this.isResizing=!1}updateCursorLocation(e){if(!e)return this.cursorLocation&&(this.cursorLocation=null,this.props.dispatchChangeCursorLocation(null),this.edit||this.redraw()),!1;if(this.canvas){const t=this.canvas.getBoundingClientRect(),n=Math.floor((e.clientX-t.left)/t.width*this.imageWidth),i=Math.floor((e.clientY-t.top)/t.height*this.imageHeight);return!(this.cursorLocation&&n===this.cursorLocation[0]&&i===this.cursorLocation[1]||(this.cursorLocation=[n,i,e.clientX,e.clientY],this.hasHover&&this.props.dispatchChangeCursorLocation(this.cursorLocation),this.edit||this.redraw(),this.updateCursor(!!this.edit,this.editState.inFloatingLayer(n,i)),0))}return this.cursorLocation=[0,0,e.clientX,e.clientY],!1}updateCursor(e,t){const{tool:n}=this.props,i=l.tools.find((e=>e.tool===n));i?t?e?this.updateCursorCore(i.downLayerCursor||i.hoverLayerCursor||i.downCursor||i.hoverCursor):this.updateCursorCore(i.hoverLayerCursor||i.hoverCursor):e?this.updateCursorCore(i.downCursor||i.hoverCursor):this.updateCursorCore(i.hoverCursor):this.updateCursorCore(l.ToolCursor.Default)}updateCursorCore(e){this.cursor=e||l.ToolCursor.Default,this.updateBackground()}startEdit(e){const{tool:t,toolWidth:n,selectedColor:i,backgroundColor:r,drawingMode:o}=this.props,[s,c]=this.cursorLocation;if(this.inBounds(s,c)||this.isResizing){let s=o==a.TileDrawingMode.Wall?2:e?r:i;this.edit=l.getEdit(t,this.editState,s,n),this.edit.originalImage=this.originalImage,this.edit.start(this.cursorLocation[0],this.cursorLocation[1],this.cursorLocation[2],this.cursorLocation[3],this.editState)}}updateEdit(e,t){this.edit&&(this.edit.inBounds(e,t)||this.isResizing)&&(this.edit.update(e,t),this.redraw())}commitEdit(e=!0){const{dispatchImageEdit:t}=this.props,n=this.getImageState();this.edit&&(this.editState=l.getEditState(n,this.props.isTilemap,this.props.drawingMode),this.edit.doEdit(this.editState),this.originalImage=e?void 0:this.edit.originalImage,this.edit=void 0,t(this.editState.toImageState()))}redraw(){const{prevFrame:e,onionSkinEnabled:t,selectedColor:n,toolWidth:i,drawingMode:r,tool:o}=this.props,s=this.getImageState(),c=r==a.TileDrawingMode.Wall?2:n;let u=!1;if(this.canvas){if(this.imageWidth=s.bitmap.width,this.imageHeight=s.bitmap.height,u=this.canvas.width!=s.bitmap.width*this.cellWidth||this.canvas.height!=s.bitmap.height*this.cellWidth,this.canvas.width=s.bitmap.width*this.cellWidth,this.canvas.height=s.bitmap.height*this.cellWidth,this.canvasLayers.forEach((e=>{e.width=this.canvas.width/this.cellWidth,e.height=this.canvas.height/this.cellWidth})),t&&e){const t=l.getEditState(e,this.props.isTilemap,r),n=this.canvas.getContext("2d");n.globalAlpha=.5,this.drawImage(t.image),t.floating&&t.floating.image&&this.drawImage(t.floating.image,t.layerOffsetX,t.layerOffsetY,!0),n.globalAlpha=1}if(this.edit){const n=this.editState.copy();n.setActiveLayer(r),this.edit.doEdit(n),this.drawImage(n.image,0,0,!(!t||!e)),this.drawOverlayLayers(n.overlayLayers),this.redrawFloatingLayer(n)}else if(this.drawImage(this.editState.image,0,0,!(!t||!e)),this.drawOverlayLayers(this.editState.overlayLayers),this.redrawFloatingLayer(this.editState),this.cursorLocation&&this.shouldDrawCursor()){const e=o===a.ImageEditorTool.Erase?0:c;this.drawCursor(this.cursorLocation[0]-(i>>1),this.cursorLocation[1]-(i>>1),i,e)}if(this.background&&(this.background.width!=this.canvas.width<<1||this.background.height!=this.canvas.height<<1)){this.background.width=this.canvas.width<<1,this.background.height=this.canvas.height<<1;const e=this.background.getContext("2d");e.imageSmoothingEnabled=!1,e.fillStyle="#aeaeae",e.fillRect(0,0,this.background.width,this.background.height),e.fillStyle="#dedede";const t=this.imageHeight<<1,n=this.imageWidth<<1;for(let i=0;i<n;i++)for(let n=0;n<t;n++)i+n&1&&e.fillRect(i*this.cellWidth,n*this.cellWidth,this.cellWidth,this.cellWidth)}}u&&this.zoomToCanvas()}drawImage(e,t=0,n=0,i=!1,r=!this.props.lightMode){this.props.isTilemap?this.drawTilemap(e,t,n,i,r):this.drawBitmap(e,t,n,i,r)}redrawFloatingLayer(e,t=!1){const n=this.refs["floating-layer-border"],i=this.refs["floating-layer-nw-corner"],r=this.refs["floating-layer-ne-corner"],a=this.refs["floating-layer-se-corner"],o=this.refs["floating-layer-sw-corner"],s=[i,r,a,o];if(e.floating&&e.floating.image){t||(this.drawImage(e.floating.image,e.layerOffsetX,e.layerOffsetY,!0),e.floating.overlayLayers&&this.drawOverlayLayers(e.floating.overlayLayers,e.layerOffsetX,e.layerOffsetY));const l=this.canvas.getBoundingClientRect(),c=Math.max(e.layerOffsetX,0),u=Math.max(e.layerOffsetY,0),d=Math.min(e.layerOffsetX+e.floating.image.width,e.width),p=Math.min(e.layerOffsetY+e.floating.image.height,e.height),f=l.width/e.width,h=l.height/e.height;n.style.display="",(d-c<1||p-u<1)&&(n.style.display="none");const m=-this.panX+f*c,g=-this.panY+h*u,y=f*(d-c),v=h*(p-u);if(n.style.left=m+"px",n.style.top=g+"px",n.style.width=y+"px",n.style.height=v+"px",n.style.borderLeft=e.layerOffsetX>=0?"":"none",n.style.borderTop=e.layerOffsetY>=0?"":"none",n.style.borderRight=e.layerOffsetX+e.floating.image.width<=e.width?"":"none",n.style.borderBottom=e.layerOffsetY+e.floating.image.height<=e.height?"":"none",null!=i){const e=16,t=3;this.props.isTilemap||(s.forEach((n=>{n.style.display="",n.style.width=e+"px",n.style.height=e+"px",n.style.border=t+"px solid black",n.style.position="absolute",n.style.backgroundColor="white"})),i.style.left=m-e+"px",i.style.top=g-e+"px",i.style.cursor="nw-resize",r.style.left=m+y+"px",r.style.top=g-e+"px",r.style.cursor="ne-resize",a.style.left=m+y+"px",a.style.top=g+v+"px",a.style.cursor="se-resize",o.style.left=m-e+"px",o.style.top=g+v+"px",o.style.cursor="sw-resize")}}else n.style.display="none",s.forEach((e=>{e&&(e.style.display="none")}))}drawOverlayLayers(e,t=0,n=0,i=!this.props.lightMode){e&&e.forEach(((e,r)=>{this.drawBitmap(e,t,n,!0,i,this.canvasLayers[r])}))}drawBitmap(e,t=0,n=0,i=!1,r=!this.props.lightMode,a=this.canvas){if(!this.colors){this.colors=new Uint8ClampedArray(4*this.props.colors.length);const e=pxt.sprite.colorStringToRGB(d.LIGHT_MODE_TRANSPARENT);this.colors[0]=e[0],this.colors[1]=e[1],this.colors[2]=e[2];for(let e=1;e<this.props.colors.length;e++){const[t,n,i]=pxt.sprite.colorStringToRGB(this.props.colors[e]),r=e<<2;this.colors[r]=t,this.colors[r+1]=n,this.colors[r+2]=i,this.colors[r+3]=255}}this.colors[3]=r?0:255;const o=a.getContext("2d"),s=i?o.getImageData(0,0,a.width,a.height):new ImageData(a.width,a.height),l=this.colors.slice();for(let e=0;e<l.length;e+=4)l[e+3]=l[e+3]*o.globalAlpha|0;for(let r=0;r<e.height&&!(n+r>=a.height);r++)if(!(n+r<0))for(let o=0;o<e.width;o++){if(t+o>=a.width||t+o<0)continue;const c=(t+o<<2)+((n+r)*a.width<<2),u=e.get(o,r)<<2;!u&&i||(s.data[c]=l[u],s.data[c+1]=l[u+1],s.data[c+2]=l[u+2],s.data[c+3]=l[u+3])}a.getContext("2d").putImageData(s,0,0)}generateTile(e,t){if(!t.tiles[e])return null;const n=document.createElement("canvas");return n.width=t.tileWidth,n.height=t.tileWidth,this.drawBitmap(pxt.sprite.Bitmap.fromData(t.tiles[e].bitmap),0,0,!1,!this.props.lightMode,n),this.tileCache[t.tiles[e].id]=n,n}drawTilemap(e,t=0,n=0,i=!1,r=!this.props.lightMode,a=this.canvas){const{tilemapState:{tileset:o}}=this.props,s=a.getContext("2d");let l,c;this.tileCacheRevision!==this.props.tilesetRevision&&(this.tileCache={},this.tileCacheRevision=this.props.tilesetRevision),s.imageSmoothingEnabled=!1,s.fillStyle=d.LIGHT_MODE_TRANSPARENT;for(let a=0;a<e.width;a++)for(let u=0;u<e.height;u++)if((l=e.get(a,u))&&l<o.tiles.length){if((c=this.tileCache[o.tiles[l].id])||(c=this.generateTile(l,o)),!c)continue;s.drawImage(c,(a+t)*this.cellWidth,(u+n)*this.cellWidth)}else i||(r?s.clearRect((a+t)*this.cellWidth,(u+n)*this.cellWidth,this.cellWidth,this.cellWidth):s.fillRect((a+t)*this.cellWidth,(u+n)*this.cellWidth,this.cellWidth,this.cellWidth))}drawCursor(e,t,n,i){const r=this.props.isTilemap&&this.props.drawingMode===a.TileDrawingMode.Wall,o=(r?this.canvasLayers[0]:this.canvas).getContext("2d");if(o.imageSmoothingEnabled=!1,i&&-1!==i)if(this.props.isTilemap&&!r){if(i>=this.props.tilemapState.tileset.tiles.length)return;let r=this.tileCache[this.props.tilemapState.tileset.tiles[i].id];if(r||(r=this.generateTile(i,this.props.tilemapState.tileset)),!r)return;for(let i=0;i<n;i++)for(let a=0;a<n;a++)o.drawImage(r,(e+i)*this.cellWidth,(t+a)*this.cellWidth)}else r?(o.fillStyle=this.props.colors[i],o.fillRect(e,t,1,1)):(o.fillStyle=this.props.colors[i],o.fillRect(e*this.cellWidth,t*this.cellWidth,n*this.cellWidth,n*this.cellWidth));else this.props.lightMode?(o.fillStyle=d.LIGHT_MODE_TRANSPARENT,o.fillRect(e*this.cellWidth,t*this.cellWidth,n*this.cellWidth,n*this.cellWidth)):o.clearRect(e*this.cellWidth,t*this.cellWidth,n*this.cellWidth,n*this.cellWidth)}updateBackground(){this.refs["canvas-bounds"].style.cursor=this.cursor,this.canvas.style.cursor=this.cursor,this.updateZoom(0)}updateZoom(e,t,n){const i=this.refs["canvas-bounds"];if(this.canvas&&i){const r=i.getBoundingClientRect();t=void 0===t?r.left+(r.width>>1):t,n=void 0===n?r.top+(r.height>>1):n;const{canvasX:a,canvasY:o}=this.clientToCanvas(t,n,r);this.zoom=Math.max(this.zoom+e,2.5);const s=this.getCanvasUnit(r);if(s){const{canvasX:e,canvasY:i}=this.clientToCanvas(t,n,r);if(isNaN(e)||isNaN(i)||isNaN(a)||isNaN(o))return;this.panX+=(a-e)*s,this.panY+=(o-i)*s}this.applyZoom()}}getCenteredPan(){let[e,t]=[0,0];const n=this.refs["canvas-bounds"].getBoundingClientRect(),i=this.canvas.getBoundingClientRect();return i.width<n.width&&(e=-((n.width>>1)-(i.width>>1))),i.height<n.height&&(t=-((n.height>>1)-(i.height>>1))),[e,t]}zoomToCanvas(){this.zoom=10;const e=this.refs["canvas-bounds"];this.applyZoom(),this.canvas&&e&&([this.panX,this.panY]=this.getCenteredPan()),this.applyZoom()}applyZoom(e){const t=this.refs["canvas-bounds"];if(this.canvas&&t){e=e||t.getBoundingClientRect();const n=this.getCanvasUnit(e);if(0===n){if(this.waitingToZoom)return;return this.waitingToZoom=!0,void requestAnimationFrame((()=>{this.waitingToZoom&&(this.waitingToZoom=!1,this.applyZoom())}))}this.waitingToZoom=!1;const i=n*this.imageWidth,r=n*this.imageHeight,a=this.imageWidth>1&&this.imageHeight>1?2*n:n>>1;this.hasInteracted||([this.panX,this.panY]=this.getCenteredPan()),this.panX=Math.max(Math.min(this.panX,i-a),-(e.width-a)),this.panY=Math.max(Math.min(this.panY,r-a),-(e.height-a)),this.canvas.style.position="fixed",this.canvas.style.width=`${i}px`,this.canvas.style.height=`${r}px`,this.canvas.style.left=-this.panX+"px",this.canvas.style.top=-this.panY+"px",this.canvas.style.clipPath=`polygon(${this.panX}px ${this.panY}px, ${this.panX+e.width}px ${this.panY}px, ${this.panX+e.width}px ${this.panY+e.height}px, ${this.panX}px ${this.panY+e.height}px)`,this.background&&this.cloneCanvasStyle(this.canvas,this.background),this.canvasLayers.forEach((e=>this.cloneCanvasStyle(this.canvas,e))),this.redrawFloatingLayer(this.editState,!0)}}selectCanvasColor(e,t){const n=this.refs["canvas-bounds"].getBoundingClientRect();let i,{canvasX:r,canvasY:a}=this.clientToCanvas(e.clientX,e.clientY,n);r=Math.floor(r),a=Math.floor(a),this.editState.inFloatingLayer(r,a)&&(i=this.editState.floating.image.get(r-this.editState.layerOffsetX,a-this.editState.layerOffsetY)),i||(i=this.editState.image.get(r,a)),t?this.props.dispatchChangeBackgroundColor(i):this.props.dispatchChangeSelectedColor(i)}selectAll(){this.props.tool!==a.ImageEditorTool.Marquee&&this.props.dispatchChangeImageTool(a.ImageEditorTool.Marquee),this.editState.mergeFloatingLayer(),this.editState.copyToLayer(0,0,this.imageWidth,this.imageHeight,!0),this.props.dispatchImageEdit(this.editState.toImageState())}cancelSelection(){this.editState.mergeFloatingLayer(),this.props.dispatchImageEdit(this.editState.toImageState())}deleteSelection(){this.editState.floating=null,this.props.dispatchImageEdit(this.editState.toImageState())}cloneCanvasStyle(e,t){t.style.position=e.style.position,t.style.width=e.style.width,t.style.height=e.style.height,t.style.left=e.style.left,t.style.top=e.style.top,t.style.clipPath=e.style.clipPath}clientToCanvas(e,t,n){const i=this.getCanvasUnit(n);return{canvasX:(e-n.left+this.panX)/i,canvasY:(t-n.top+this.panY)/i}}getCanvasUnit(e){const t=e.width/e.height,n=this.imageWidth/this.imageHeight,i=Math.pow(this.zoom/10,2);return t>n?i*(e.height/this.imageHeight):i*(e.width/this.imageWidth)}inBounds(e,t){return e>=0&&e<this.imageWidth&&t>=0&&t<this.imageHeight}isPanning(){return this.props.tool===a.ImageEditorTool.Pan}touchesResize(e,t){const n=document.querySelectorAll(":hover");for(let e=0;e<n.length;e++)if("image-editor-floating-layer-corner"==n[e].className)return!0;return!1}isColorSelect(){return this.props.tool===a.ImageEditorTool.ColorSelect}shouldHandleCanvasShortcut(){return!(this.props.suppressShortcuts||document.activeElement instanceof HTMLInputElement)}shouldDrawCursor(){if(!this.hasHover)return!1;switch(this.props.tool){case a.ImageEditorTool.Fill:case a.ImageEditorTool.Marquee:case a.ImageEditorTool.Pan:case a.ImageEditorTool.ColorSelect:return!1;default:return!0}}getImageState(){return this.props.isTilemap?this.props.tilemapState.tilemap:this.props.imageState}applyTilemapPatch(e){const{tilemapState:t,dispatchCreateNewTile:n,gallery:i,backgroundColor:r}=this.props,{tileset:a}=t,o=pxt.sprite.tilemapLiteralToTilemap(e.map);if(!o||!o.width||!o.height)return;const s=e.tiles.map((e=>pxt.sprite.getBitmapFromJResURL(`data:image/x-mkcd-f4;base64,${e}`))),l=e.layers.map((e=>pxt.sprite.getBitmapFromJResURL(`data:image/x-mkcd-f4;base64,${e}`))),u=[];let d=a.tiles.length;for(const e of s){const t=a.tiles.findIndex((t=>e.equals(pxt.sprite.Bitmap.fromData(t.bitmap))));if(t>=0)u.push(t);else{if(i){const t=i.find((t=>e.equals(pxt.sprite.Bitmap.fromData(t.bitmap))));if(t){n(null,a.tiles.length,r,t.qualifiedName),u.push(d),d++;continue}}n(c.createTile(e.data()),a.tiles.length,r),u.push(d),d++}}this.editState.mergeFloatingLayer();const p=new pxt.sprite.Tilemap(o.width,o.height);for(let e=0;e<p.width;e++)for(let t=0;t<p.height;t++)p.set(e,t,u[o.get(e,t)]);this.editState.floating={image:p,overlayLayers:l},this.editState.layerOffsetX=0,this.editState.layerOffsetY=0,this.props.dispatchImageEdit(this.editState.toImageState())}}n.ImageCanvasImpl=f;const h={dispatchImageEdit:o.dispatchImageEdit,dispatchChangeCursorLocation:o.dispatchChangeCursorLocation,dispatchChangeZoom:o.dispatchChangeZoom,dispatchChangeImageTool:o.dispatchChangeImageTool,dispatchChangeSelectedColor:o.dispatchChangeSelectedColor,dispatchChangeBackgroundColor:o.dispatchChangeBackgroundColor,dispatchCreateNewTile:o.dispatchCreateNewTile};n.ImageCanvas=r.connect((function({store:{present:e},editor:t},n){if(t.isTilemap){let n=e;return n?{selectedColor:t.selectedColor,tilemapState:n,tool:t.tool,toolWidth:t.cursorSize,zoomDelta:t.zoomDelta,onionSkinEnabled:!1,overlayEnabled:t.overlayEnabled,backgroundColor:t.backgroundColor,colors:n.colors,isTilemap:t.isTilemap,drawingMode:t.drawingMode,gallery:t.tileGallery,tilesetRevision:t.tilesetRevision}:{}}let i=e;return i?{selectedColor:t.selectedColor,colors:i.colors,imageState:i.frames[i.currentFrame],tool:t.tool,toolWidth:t.cursorSize,zoomDelta:t.zoomDelta,onionSkinEnabled:t.onionSkinEnabled,backgroundColor:t.backgroundColor,prevFrame:i.frames[i.currentFrame-1],isTilemap:t.isTilemap,tilesetRevision:t.tilesetRevision}:{}}),h)(f)},{"../../assets":2,"./ImageEditor":10,"./actions/dispatch":17,"./keyboardShortcuts":19,"./store/imageReducer":21,"./toolDefinitions":25,"./util":26,react:82,"react-redux":74}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ImageEditor=n.LIGHT_MODE_TRANSPARENT=void 0;const i=e("react"),r=e("react-redux"),a=e("./store/imageStore"),o=e("./SideBar"),s=e("./BottomBar"),l=e("./TopBar"),c=e("./ImageCanvas"),u=e("./Alert"),d=e("./Timeline"),p=e("./keyboardShortcuts"),f=e("./actions/dispatch"),h=e("./util"),m=e("../../assets");n.LIGHT_MODE_TRANSPARENT="#dedede";class g extends i.Component{constructor(e){super(e),this.onStoreChange=()=>{this.props.onChange&&this.props.onChange(this.props.singleFrame?pxt.sprite.bitmapToImageLiteral(this.getCurrentFrame(),"typescript"):"");const e=this.getStore(),t=e.getState();if(p.setStore(e),t.editor&&this.setState({alert:t.editor.alert}),!!t.editor.editingTile!=!!this.state.editingTile)if(t.editor.editingTile){const e=t.editor.editingTile.tilesetIndex;if(e){const n=t.store.present.tileset.tiles[e];this.setState({editingTile:!0,tileToEdit:n})}else{const e=t.store.present.tileset.tileWidth,n=m.createNewImageAsset("tile",e,e,lf("myTile"));this.setState({editingTile:!0,tileToEdit:n})}this.props.onTileEditorOpenClose&&this.props.onTileEditorOpenClose(!0)}else this.setState({editingTile:!1}),this.props.onTileEditorOpenClose&&this.props.onTileEditorOpenClose(!1)},this.onDoneClick=()=>{this.props.onDoneClicked&&this.props.onDoneClicked(this.getAsset())},this.onTileEditorFinished=e=>{const t=this.getStore().getState().editor.editingTile;e.isProjectTile=!0,this.dispatchOnStore(f.dispatchCloseTileEditor(e,t.tilesetIndex))},this.state={editingTile:!1}}componentDidMount(){p.addKeyListener(),this.props.asset&&this.openAsset(this.props.asset),this.unsubscribeChangeListener=this.getStore().subscribe(this.onStoreChange),this.onResize()}componentWillUnmount(){this.props.nested||p.removeKeyListener(),this.unsubscribeChangeListener&&this.unsubscribeChangeListener()}render(){const{singleFrame:e,lightMode:t}=this.props,n=this.getStore(),{tileToEdit:p,editingTile:f,alert:h}=this.state,m="Animation"===n.getState().store.present.kind;return i.createElement("div",{className:"image-editor-outer"},i.createElement(r.Provider,{store:n},i.createElement("div",{className:"image-editor "+(f?"editing-tile":"")},i.createElement(l.TopBar,{singleFrame:e}),i.createElement("div",{className:"image-editor-content"},i.createElement(o.SideBar,{lightMode:t}),i.createElement(c.ImageCanvas,{suppressShortcuts:f,lightMode:t}),m&&!e?i.createElement(d.Timeline,null):void 0),i.createElement(s.BottomBar,{singleFrame:e,onDoneClick:this.onDoneClick}),h&&h.title&&i.createElement(u.Alert,{title:h.title,text:h.text,options:h.options}))),f&&i.createElement(g,{store:a.tileEditorStore,ref:"nested-image-editor",onDoneClicked:this.onTileEditorFinished,asset:p,singleFrame:!0,nested:!0}))}openAsset(e,t,n=!1){this.dispatchOnStore(f.dispatchOpenAsset(e,n,t)),e.meta.displayName?this.dispatchOnStore(f.dispatchChangeAssetName(e.meta.displayName)):n&&this.dispatchOnStore(f.dispatchChangeAssetName(""))}openGalleryAsset(e){const t=this.getAsset(),n=this.getStore().getState().store.present.frames;switch(t.type){case"animation":switch(e.type){case"image":case"tile":this.setCurrentFrame(pxt.sprite.Bitmap.fromData(e.bitmap),1===n.length);break;case"animation":this.dispatchOnStore(f.dispatchSetFrames(e.frames.map((e=>({bitmap:e})))))}break;case"image":case"tile":switch(e.type){case"image":case"tile":this.setCurrentFrame(pxt.sprite.Bitmap.fromData(e.bitmap),!0);break;case"animation":this.setCurrentFrame(pxt.sprite.Bitmap.fromData(e.frames[0]),!0)}}}onResize(){this.dispatchOnStore(f.dispatchChangeZoom(0))}getCurrentFrame(){const e=this.getStore().getState().store.present,t=e.frames[e.currentFrame];return h.imageStateToBitmap(t)}getAsset(){switch(this.getStore().getState().store.present.asset.type){case"tile":return this.getTile();case"animation":return this.getAnimation();case"tilemap":return this.getTilemap();default:return this.getImage()}}getImage(){var e;const t=this.getStore().getState().store.present,n=this.getCurrentFrame().data(),i=t.asset?Object.assign({},t.asset.meta):{};return{id:null===(e=t.asset)||void 0===e?void 0:e.id,internalID:t.asset?t.asset.internalID:m.getNewInternalID(),type:"image",bitmap:n,jresData:pxt.sprite.base64EncodeBitmap(n),meta:i}}getTile(){var e;const t=this.getStore().getState().store.present,n=this.getCurrentFrame().data(),i=t.asset?Object.assign({},t.asset.meta):{};return{id:null===(e=t.asset)||void 0===e?void 0:e.id,internalID:t.asset?t.asset.internalID:m.getNewInternalID(),isProjectTile:!0,type:"tile",bitmap:n,jresData:pxt.sprite.base64EncodeBitmap(n),meta:i}}getAnimation(){var e;const t=this.getStore().getState().store.present,n=t.asset?Object.assign({},t.asset.meta):{};return{id:null===(e=t.asset)||void 0===e?void 0:e.id,internalID:t.asset?t.asset.internalID:m.getNewInternalID(),type:"animation",interval:t.interval,frames:t.frames.map((e=>h.imageStateToBitmap(e).data())),meta:n}}getTilemap(){var e;const t=this.getStore().getState(),n=t.store.present,{floating:i,overlayLayers:r,layerOffsetX:a,layerOffsetY:o}=n.tilemap,s=h.applyBitmapData(r[0],i&&i.overlayLayers&&i.overlayLayers[0],a,o),l=new pxt.sprite.TilemapData(h.imageStateToTilemap(n.tilemap),n.tileset,s);l.deletedTiles=t.editor.deletedTiles,l.editedTiles=t.editor.editedTiles;const c=n.asset?Object.assign({},n.asset.meta):{};return{id:null===(e=n.asset)||void 0===e?void 0:e.id,internalID:n.asset?n.asset.internalID:m.getNewInternalID(),type:"tilemap",data:l,meta:c}}getPersistentData(){const e=this.getStore().getState();return{editor:e.editor,past:e.store.past}}restorePersistentData(e){e&&this.dispatchOnStore(f.dispatchSetInitialState(e.editor,e.past))}setCurrentFrame(e,t){if(!t){const t=this.getStore().getState().store.present.frames[0];if(e.width!==t.bitmap.width||e.height!==t.bitmap.height){const n=[Math.max(e.width,t.bitmap.width),Math.max(e.height,t.bitmap.height)];t.bitmap.width===n[0]&&t.bitmap.height===n[1]||this.dispatchOnStore(f.dispatchChangeImageDimensions(n)),e=(e=e.copy()).resize(n[0],n[1])}}this.dispatchOnStore(f.dispatchImageEdit({bitmap:e.data()}))}openInTileEditor(e){this.refs["nested-image-editor"].setCurrentFrame(e,!1)}disableResize(){this.dispatchOnStore(f.dispatchDisableResize())}closeNestedEditor(){var e;this.state.editingTile&&(null===(e=this.refs["nested-image-editor"])||void 0===e||e.onDoneClick())}getStore(){return this.props.store||a.mainStore}dispatchOnStore(e){this.getStore().dispatch(e)}}n.ImageEditor=g},{"../../assets":2,"./Alert":4,"./BottomBar":5,"./ImageCanvas":9,"./SideBar":12,"./Timeline":13,"./TopBar":16,"./actions/dispatch":17,"./keyboardShortcuts":19,"./store/imageStore":22,"./util":26,react:82,"react-redux":74}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Pivot=void 0;const i=e("react"),r=e("./util");class a extends i.Component{constructor(e){super(e),this.handlers=[],this.state={open:!1}}componentWillUnmount(){this.handlers=null}render(){const{options:e,selected:t}=this.props,n=e[t];return i.createElement("div",{className:"image-editor-pivot-outer"},e.map(((e,t)=>i.createElement("div",{role:"tab",key:e.id,className:"image-editor-pivot-option "+(e===n?"selected":""),tabIndex:0,onClick:this.clickHandler(t),onKeyDown:r.fireClickOnlyOnEnter},e.text))))}clickHandler(e){if(!this.handlers[e]){const{onChange:t,options:n}=this.props;this.handlers[e]=()=>{this.setState({open:!1}),t(n[e],e)}}return this.handlers[e]}}n.Pivot=a},{"./util":26,react:82}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SideBar=n.SideBarImpl=void 0;const i=e("react"),r=e("react-redux"),a=e("./toolDefinitions"),o=e("./Button"),s=e("./actions/dispatch"),l=e("./sprite/Palette"),c=e("./tilemap/TilePalette"),u=e("./tilemap/Minimap");class d extends i.Component{constructor(){super(...arguments),this.handlers=[]}render(){const{selectedTool:e,isTilemap:t,lightMode:n}=this.props;return i.createElement("div",{className:"image-editor-sidebar "+(t?"tilemap":"")},t&&i.createElement("div",{className:"image-editor-tilemap-minimap"},i.createElement(u.Minimap,{lightMode:n})),i.createElement("div",{className:"image-editor-tool-buttons"},a.tools.filter((e=>!e.hiddenTool)).map((t=>i.createElement(o.IconButton,{key:t.tool,iconClass:t.iconClass,toggle:e!=t.tool,title:t.title,onClick:this.clickHandler(t.tool)})))),i.createElement("div",{className:"image-editor-palette"},t?i.createElement(c.TilePalette,null):i.createElement(l.Palette,null)))}clickHandler(e){return this.handlers[e]||(this.handlers[e]=()=>this.props.dispatchChangeImageTool(e)),this.handlers[e]}}n.SideBarImpl=d;const p={dispatchChangeImageTool:s.dispatchChangeImageTool};n.SideBar=r.connect((function({editor:e},t){return e?{isTilemap:e.isTilemap,selectedTool:e.tool}:{}}),p)(d)},{"./Button":6,"./actions/dispatch":17,"./sprite/Palette":20,"./tilemap/Minimap":23,"./tilemap/TilePalette":24,"./toolDefinitions":25,react:82,"react-redux":74}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Timeline=n.TimelineImpl=void 0;const i=e("react"),r=e("react-redux"),a=e("./actions/dispatch"),o=e("./TimelineFrame"),s=e("./util");class l extends i.Component{constructor(e){super(e),this.handlers=[],this.scrollOffset=0,this.dragEnd=!1,this.duplicateFrame=()=>{const{currentFrame:e,dispatchDuplicateFrame:t}=this.props;t(e)},this.deleteFrame=()=>{const{currentFrame:e,dispatchDeleteFrame:t}=this.props;t(e)},this.newFrame=()=>{const{dispatchNewFrame:e}=this.props;this.dragEnd?this.dragEnd=!1:e()},this.state={}}render(){const{frames:e,colors:t,currentFrame:n,interval:r,previewAnimating:a}=this.props,{isMovingFrame:s,dropPreviewIndex:l}=this.state;let c,u=e.slice();return s&&(c=e[n],u.splice(n,1),u.splice(l,0,null)),i.createElement("div",{className:"image-editor-timeline "+(pxt.BrowserUtils.isEdge()?"edge":"")},i.createElement("div",{className:"image-editor-timeline-preview"},i.createElement(o.TimelineFrame,{frames:a?e:[e[n]],colors:t,interval:r,animating:!0})),i.createElement("div",{className:"image-editor-timeline-frames-outer"},i.createElement("div",{className:"image-editor-timeline-frames",ref:"frame-scroller-ref"},u.map(((e,r)=>{const a=!s&&r===n;return e?i.createElement("div",{className:"image-editor-timeline-frame "+(a?"active":""),key:r,role:"button",onClick:this.clickHandler(r)},i.createElement(o.TimelineFrame,{frames:[e],colors:t,showActions:a,duplicateFrame:this.duplicateFrame,deleteFrame:this.deleteFrame})):i.createElement("div",{className:"image-editor-timeline-frame drop-marker",key:r})})),c&&i.createElement("div",{ref:"floating-frame",className:"image-editor-timeline-frame dragging"},i.createElement(o.TimelineFrame,{frames:[c],colors:t,duplicateFrame:this.duplicateFrame,deleteFrame:this.deleteFrame})),i.createElement("div",{className:"image-editor-timeline-frame collapsed",role:"button",onClick:this.newFrame},i.createElement("span",{className:"ms-Icon ms-Icon--Add"})))))}componentDidMount(){let e;this.frameScroller=this.refs["frame-scroller-ref"];let t=!1;s.bindGestureEvents(this.frameScroller,{onClick:e=>{this.dragEnd=!1},onDragStart:n=>{e=n.clientY,pxt.BrowserUtils.addClass(this.frameScroller,"scrolling");const i=this.frameScroller.getBoundingClientRect(),r=n.clientY-i.top,a=this.frameScroller.firstElementChild.getBoundingClientRect().height,o=Math.floor(r/a);t=o!==this.props.currentFrame},onDragMove:n=>{if(t){this.scrollOffset-=e-n.clientY,e=n.clientY;try{const e=this.frameScroller.getBoundingClientRect(),t=this.frameScroller.parentElement.getBoundingClientRect();e.height>t.height?this.scrollOffset=Math.max(Math.min(this.scrollOffset,0),t.height-e.height-15):this.scrollOffset=0,this.frameScroller.parentElement.scrollTop=-this.scrollOffset}catch(e){}}else this.updateDragDrop(n)},onDragEnd:()=>{if(e=null,pxt.BrowserUtils.removeClass(this.frameScroller,"scrolling"),this.dragEnd=!0,this.state.isMovingFrame){const{dispatchMoveFrame:e,currentFrame:t}=this.props;e(t,this.state.dropPreviewIndex),this.setState({isMovingFrame:!1})}}}),this.frameScroller.addEventListener("wheel",(e=>{this.scrollOffset-=e.deltaY;try{const e=this.frameScroller.getBoundingClientRect(),t=this.frameScroller.parentElement.getBoundingClientRect();e.height>t.height?this.scrollOffset=Math.max(Math.min(this.scrollOffset,0),t.height-e.height-15):this.scrollOffset=0,this.frameScroller.parentElement.scrollTop=-this.scrollOffset}catch(e){}}))}clickHandler(e){return this.handlers[e]||(this.handlers[e]=()=>{const{currentFrame:t,dispatchChangeCurrentFrame:n}=this.props;this.dragEnd?this.dragEnd=!1:e!=t&&n(e)}),this.handlers[e]}updateDragDrop(e){const t=this.frameScroller.getBoundingClientRect(),n=e.clientY-t.top,i=this.frameScroller.firstElementChild.getBoundingClientRect().height,r=Math.floor(n/i);this.state.isMovingFrame?this.refs["floating-frame"]&&(this.refs["floating-frame"].style.top=n+"px",this.setState({dropPreviewIndex:r})):this.setState({isMovingFrame:!0,dropPreviewIndex:this.props.currentFrame})}}n.TimelineImpl=l;const c={dispatchDuplicateFrame:a.dispatchDuplicateFrame,dispatchDeleteFrame:a.dispatchDeleteFrame,dispatchChangeCurrentFrame:a.dispatchChangeCurrentFrame,dispatchNewFrame:a.dispatchNewFrame,dispatchMoveFrame:a.dispatchMoveFrame};n.Timeline=r.connect((function({store:{present:e},editor:t},n){let i=e;return i?{frames:i.frames,currentFrame:i.currentFrame,colors:i.colors,interval:i.interval,previewAnimating:t.previewAnimating}:{}}),c)(l)},{"./TimelineFrame":14,"./actions/dispatch":17,"./util":26,react:82,"react-redux":74}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TimelineFrame=void 0;const i=e("react"),r=e("./Button"),a=pxt.BrowserUtils.isEdge()?25:1;class o extends i.Component{constructor(e){super(e),this.state={index:0}}render(){const{frames:e,animating:t,showActions:n,duplicateFrame:a,deleteFrame:o}=this.props,s=e[t?Math.min(Math.max(0,this.state.index),e.length-1):0],l=s.bitmap.height>s.bitmap.width;return i.createElement("div",{className:"timeline-frame-outer "+(l?"portrait":"landscape")},i.createElement("div",{className:"timeline-frame-spacer"}),i.createElement("canvas",{ref:"preview-canvas"}),i.createElement("div",{className:"timeline-frame-spacer"}),n&&i.createElement("div",{className:"timeline-frame-actions"},i.createElement(r.IconButton,{iconClass:"ms-Icon ms-Icon--Copy",title:lf("Duplicate Current Frame"),onClick:a}),i.createElement(r.IconButton,{iconClass:"ms-Icon ms-Icon--Delete",title:lf("Delete Current Frame"),onClick:o})))}componentDidMount(){this.canvas=this.refs["preview-canvas"],this.redraw(),this.updateAnimation()}componentDidUpdate(){this.redraw(),this.updateAnimation()}componentWillUnmount(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=void 0}redraw(){if(!this.canvas)return;const{animating:e,frames:t}=this.props,n=t[e?Math.min(Math.max(0,this.state.index),t.length-1):0];this.canvas.height=n.bitmap.height*a,this.canvas.width=n.bitmap.width*a;const i=pxt.sprite.Bitmap.fromData(n.bitmap);if(this.drawBitmap(i),n.floating&&n.floating.bitmap){const e=pxt.sprite.Bitmap.fromData(n.floating.bitmap);this.drawBitmap(e,n.layerOffsetX,n.layerOffsetY,!0)}}updateAnimation(){const{animating:e,interval:t,frames:n}=this.props,i=e&&t>5&&n.length>1;i&&t!==this.intervalcurrent?(this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval((()=>this.setState({index:(this.state.index+1)%this.props.frames.length})),t),this.intervalcurrent=t):!i&&this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0,this.intervalcurrent=void 0)}drawBitmap(e,t=0,n=0,i=!1){const{colors:r}=this.props,o=this.canvas.getContext("2d");for(let s=0;s<e.width;s++)for(let l=0;l<e.height;l++){const c=e.get(s,l);c?(o.fillStyle=r[c],o.fillRect((s+t)*a,(l+n)*a,a,a)):i||o.clearRect((s+t)*a,(l+n)*a,a,a)}}}n.TimelineFrame=o},{"./Button":6,react:82}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Toggle=void 0;const i=e("react");class r extends i.Component{constructor(e){super(e),this.checked=!1,this.handleToggleClick=e=>{this.checked=!this.checked,this.props.onChange&&this.props.onChange(e.target.checked)},this.checked=e.initialValue}render(){const{initialValue:e,label:t}=this.props;return i.createElement("div",{className:"image-editor-toggle-container"},t&&i.createElement("span",null,t),i.createElement("label",{className:"image-editor-toggle"},i.createElement("input",{type:"checkbox",onClick:this.handleToggleClick,defaultChecked:e,"aria-checked":this.checked}),i.createElement("span",{className:"image-editor-toggle-switch"})))}}n.Toggle=r},{react:82}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TopBar=n.TopBarImpl=void 0;const i=e("react"),r=e("react-redux"),a=e("./actions/dispatch"),o=e("./Button"),s=e("./CursorSizes"),l=e("./Toggle"),c=e("./keyboardShortcuts");class u extends i.Component{constructor(e){super(e),this.togglePreviewAnimating=()=>this.props.dispatchChangePreviewAnimating(!this.props.previewAnimating),this.flipVertical=()=>c.flip(!0),this.flipHorizontal=()=>c.flip(!1),this.rotateClockwise=()=>c.rotate(!0),this.rotateCounterclockwise=()=>c.rotate(!1),this.handleIntervalChange=e=>{this.setState({interval:e.target.value})},this.handleIntervalBlur=()=>{const{dispatchChangeInterval:e}=this.props,t=parseInt(this.state.interval);isNaN(t)||e(Math.min(Math.max(t,50),1e6)),this.setState({interval:null})},this.state={}}render(){const{interval:e,previewAnimating:t,singleFrame:n,isTilemap:r,dispatchChangeOverlayEnabled:a}=this.props,c=null==this.state.interval?e:this.state.interval;return i.createElement("div",{className:"image-editor-topbar"},i.createElement("div",{className:"cursor-group"},i.createElement(s.CursorSizes,null)),i.createElement("div",{className:"image-editor-seperator"}),i.createElement("div",{className:"image-transform-group"},i.createElement(o.IconButton,{key:"flipv",iconClass:"xicon flipvertical",title:lf("Flip vertical"),onClick:this.flipVertical}),i.createElement(o.IconButton,{key:"fliph",iconClass:"xicon fliphorizontal",title:lf("Flip horizontal"),onClick:this.flipHorizontal}),i.createElement(o.IconButton,{key:"rotatec",iconClass:"xicon rotateright",title:lf("Rotate clockwise"),onClick:this.rotateClockwise}),i.createElement(o.IconButton,{key:"rotatecc",iconClass:"xicon rotateleft",title:lf("Rotate counterclockwise"),onClick:this.rotateCounterclockwise})),i.createElement("div",{className:"spacer"}),!n&&i.createElement("div",{className:"image-editor-seperator"}),!n&&i.createElement("div",{className:"timeline-controls"},i.createElement(o.IconButton,{onClick:this.togglePreviewAnimating,iconClass:t?"ms-Icon ms-Icon--Stop":"ms-Icon ms-Icon--Play",title:t?lf("Stop Animation Preview"):lf("Play Animation Preview"),toggle:!0}),i.createElement("div",{className:"image-editor-interval-label image-editor-label"},i.createElement("span",{className:"ms-Icon ms-Icon--Clock"})),i.createElement("div",{className:"image-editor-interval"},i.createElement("input",{className:"image-editor-input",title:lf("Interval Between Frames (ms)"),value:c,onChange:this.handleIntervalChange,onBlur:this.handleIntervalBlur}))),r&&i.createElement(l.Toggle,{initialValue:!0,label:lf("Show walls"),onChange:a}))}}n.TopBarImpl=u;const d={dispatchChangeInterval:a.dispatchChangeInterval,dispatchChangePreviewAnimating:a.dispatchChangePreviewAnimating,dispatchChangeOverlayEnabled:a.dispatchChangeOverlayEnabled};n.TopBar=r.connect((function({store:{present:e},editor:t},n){return e?{interval:e.interval,previewAnimating:t.previewAnimating,isTilemap:t.isTilemap}:{}}),d)(u)},{"./Button":6,"./CursorSizes":7,"./Toggle":15,"./actions/dispatch":17,"./keyboardShortcuts":19,react:82,"react-redux":74}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dispatchSetFrames=n.dispatchOpenAsset=n.dispatchChangeAssetName=n.dispatchDisableResize=n.dispatchDeleteTile=n.dispatchCloseTileEditor=n.dispatchOpenTileEditor=n.dispatchSetGalleryOpen=n.dispatchCreateNewTile=n.dispatchChangeDrawingMode=n.dispatchChangeTilePalettePage=n.dispatchChangeTilePaletteCategory=n.dispatchSetInitialState=n.dispatchChangeBackgroundColor=n.dispatchSwapBackgroundForeground=n.dispatchHideAlert=n.dispatchShowAlert=n.dispatchChangeZoom=n.dispatchChangeOverlayEnabled=n.dispatchToggleOnionSkinEnabled=n.dispatchChangePreviewAnimating=n.dispatchChangeInterval=n.dispatchMoveFrame=n.dispatchChangeCurrentFrame=n.dispatchDuplicateFrame=n.dispatchDeleteFrame=n.dispatchNewFrame=n.dispatchToggleAspectRatioLocked=n.dispatchRedoImageEdit=n.dispatchUndoImageEdit=n.dispatchImageEdit=n.dispatchChangeCursorLocation=n.dispatchChangeKeyModifiers=n.dispatchChangeImageDimensions=n.dispatchChangeSelectedColor=n.dispatchChangeCursorSize=n.dispatchChangeImageTool=void 0;const i=e("./types");n.dispatchChangeImageTool=e=>({type:i.CHANGE_IMAGE_TOOL,tool:e});n.dispatchChangeCursorSize=e=>({type:i.CHANGE_CURSOR_SIZE,cursorSize:e});n.dispatchChangeSelectedColor=e=>({type:i.CHANGE_SELECTED_COLOR,selectedColor:e});n.dispatchChangeImageDimensions=e=>({type:i.CHANGE_IMAGE_DIMENSIONS,imageDimensions:e});n.dispatchChangeKeyModifiers=e=>({type:i.CHANGE_KEY_MODIFIERS,keyModifiers:e});n.dispatchChangeCursorLocation=e=>({type:i.CHANGE_CURSOR_LOCATION,cursorLocation:e});n.dispatchImageEdit=e=>({type:i.IMAGE_EDIT,newState:e});n.dispatchUndoImageEdit=()=>({type:i.UNDO_IMAGE_EDIT});n.dispatchRedoImageEdit=()=>({type:i.REDO_IMAGE_EDIT});n.dispatchToggleAspectRatioLocked=()=>({type:i.TOGGLE_ASPECT_RATIO});n.dispatchNewFrame=e=>({type:i.NEW_FRAME,index:e});n.dispatchDeleteFrame=e=>({type:i.DELETE_FRAME,index:e});n.dispatchDuplicateFrame=e=>({type:i.DUPLICATE_FRAME,index:e});n.dispatchChangeCurrentFrame=e=>({type:i.CHANGE_CURRENT_FRAME,index:e});n.dispatchMoveFrame=(e,t)=>({type:i.MOVE_FRAME,oldIndex:e,newIndex:t});n.dispatchChangeInterval=e=>({type:i.CHANGE_INTERVAL,newInterval:e});n.dispatchChangePreviewAnimating=e=>({type:i.CHANGE_PREVIEW_ANIMATING,animating:e});n.dispatchToggleOnionSkinEnabled=()=>({type:i.TOGGLE_ONION_SKIN_ENABLED});n.dispatchChangeOverlayEnabled=e=>({type:i.CHANGE_OVERLAY_ENABLED,enabled:e});n.dispatchChangeZoom=e=>({type:i.CHANGE_CANVAS_ZOOM,zoom:e});n.dispatchShowAlert=(e,t,n)=>({type:i.SHOW_ALERT,title:e,text:t,options:n});n.dispatchHideAlert=()=>({type:i.HIDE_ALERT});n.dispatchSwapBackgroundForeground=()=>({type:i.SWAP_FOREGROUND_BACKGROUND});n.dispatchChangeBackgroundColor=e=>({type:i.CHANGE_BACKGROUND_COLOR,backgroundColor:e});n.dispatchSetInitialState=(e,t)=>({type:i.SET_INITIAL_STATE,state:e,past:t});n.dispatchChangeTilePaletteCategory=e=>({type:i.CHANGE_TILE_PALETTE_CATEGORY,category:e});n.dispatchChangeTilePalettePage=e=>({type:i.CHANGE_TILE_PALETTE_PAGE,page:e});n.dispatchChangeDrawingMode=e=>({type:i.CHANGE_DRAWING_MODE,drawingMode:e});n.dispatchCreateNewTile=(e,t,n,r)=>({type:i.CREATE_NEW_TILE,tile:e,foreground:t,background:n,qualifiedName:r});n.dispatchSetGalleryOpen=e=>({type:i.SET_GALLERY_OPEN,open:e});n.dispatchOpenTileEditor=(e,t)=>({type:i.OPEN_TILE_EDITOR,index:e,id:t});n.dispatchCloseTileEditor=(e,t)=>({type:i.CLOSE_TILE_EDITOR,result:e,index:t});n.dispatchDeleteTile=(e,t)=>({type:i.DELETE_TILE,id:t,index:e});n.dispatchDisableResize=()=>({type:i.DISABLE_RESIZE});n.dispatchChangeAssetName=e=>({type:i.CHANGE_ASSET_NAME,name:e});n.dispatchOpenAsset=(e,t,n)=>({type:i.OPEN_ASSET,asset:e,keepPast:t,gallery:n});n.dispatchSetFrames=e=>({type:i.SET_FRAMES,frames:e})},{"./types":18}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.OPEN_ASSET=n.CHANGE_ASSET_NAME=n.DISABLE_RESIZE=n.DELETE_TILE=n.CLOSE_TILE_EDITOR=n.OPEN_TILE_EDITOR=n.CREATE_NEW_TILE=n.CHANGE_DRAWING_MODE=n.CHANGE_TILE_PALETTE_CATEGORY=n.CHANGE_TILE_PALETTE_PAGE=n.CHANGE_BACKGROUND_COLOR=n.SWAP_FOREGROUND_BACKGROUND=n.HIDE_ALERT=n.SHOW_ALERT=n.CHANGE_CANVAS_ZOOM=n.CHANGE_OVERLAY_ENABLED=n.TOGGLE_ONION_SKIN_ENABLED=n.CHANGE_PREVIEW_ANIMATING=n.CHANGE_INTERVAL=n.CHANGE_CURRENT_FRAME=n.MOVE_FRAME=n.DUPLICATE_FRAME=n.DELETE_FRAME=n.NEW_FRAME=n.SET_GALLERY_OPEN=n.TOGGLE_ASPECT_RATIO=n.REDO_IMAGE_EDIT=n.UNDO_IMAGE_EDIT=n.IMAGE_EDIT=n.CHANGE_CURSOR_LOCATION=n.CHANGE_KEY_MODIFIERS=n.CHANGE_IMAGE_DIMENSIONS=n.CHANGE_SELECTED_COLOR=n.CHANGE_CURSOR_SIZE=n.CHANGE_IMAGE_TOOL=n.SET_FRAMES=n.SET_INITIAL_STATE=void 0,n.SET_INITIAL_STATE="SET_INITIAL_STATE",n.SET_FRAMES="SET_FRAMES",n.CHANGE_IMAGE_TOOL="CHANGE_IMAGE_TOOL",n.CHANGE_CURSOR_SIZE="CHANGE_CURSOR_SIZE",n.CHANGE_SELECTED_COLOR="CHANGE_SELECTED_COLOR",n.CHANGE_IMAGE_DIMENSIONS="CHANGE_IMAGE_DIMENSIONS",n.CHANGE_KEY_MODIFIERS="CHANGE_KEY_MODIFIERS",n.CHANGE_CURSOR_LOCATION="CHANGE_CURSOR_LOCATION",n.IMAGE_EDIT="IMAGE_EDIT",n.UNDO_IMAGE_EDIT="UNDO_IMAGE_EDIT",n.REDO_IMAGE_EDIT="REDO_IMAGE_EDIT",n.TOGGLE_ASPECT_RATIO="TOGGLE_ASPECT_RATIO",n.SET_GALLERY_OPEN="SET_GALLERY_OPEN",n.NEW_FRAME="NEW_FRAME",n.DELETE_FRAME="DELETE_FRAME",n.DUPLICATE_FRAME="DUPLICATE_FRAME",n.MOVE_FRAME="MOVE_FRAME",n.CHANGE_CURRENT_FRAME="CHANGE_CURRENT_FRAME",n.CHANGE_INTERVAL="CHANGE_INTERVAL",n.CHANGE_PREVIEW_ANIMATING="CHANGE_PREVIEW_ANIMATING",n.TOGGLE_ONION_SKIN_ENABLED="TOGGLE_ONION_SKIN_ENABLED",n.CHANGE_OVERLAY_ENABLED="CHANGE_OVERLAY_ENABLED",n.CHANGE_CANVAS_ZOOM="CHANGE_CANVAS_ZOOM",n.SHOW_ALERT="SHOW_ALERT",n.HIDE_ALERT="HIDE_ALERT",n.SWAP_FOREGROUND_BACKGROUND="SWAP_FOREGROUND_BACKGROUND",n.CHANGE_BACKGROUND_COLOR="CHANGE_BACKGROUND_COLOR",n.CHANGE_TILE_PALETTE_PAGE="CHANGE_TILE_PALETTE_PAGE",n.CHANGE_TILE_PALETTE_CATEGORY="CHANGE_TILE_PALETTE_CATEGORY",n.CHANGE_DRAWING_MODE="CHANGE_DRAWING_MODE",n.CREATE_NEW_TILE="CREATE_NEW_TILE",n.OPEN_TILE_EDITOR="OPEN_TILE_EDITOR",n.CLOSE_TILE_EDITOR="CLOSE_TILE_EDITOR",n.DELETE_TILE="DELETE_TILE",n.DISABLE_RESIZE="DISABLE_RESIZE",n.CHANGE_ASSET_NAME="CHANGE_ASSET_NAME",n.OPEN_ASSET="OPEN_ASSET"},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.replaceColor=n.outline=n.rotate=n.flip=n.setStore=n.areShortcutsEnabled=n.releaseShortcutLock=n.obtainShortcutLock=n.removeKeyListener=n.addKeyListener=void 0;const i=e("./store/imageReducer"),r=e("./actions/dispatch"),a=e("./store/imageStore"),o=e("./toolDefinitions");let s=a.mainStore,l=[];function c(){return!l.length}function u(e){const t=e.ctrlKey||e.metaKey;"Undo"===e.key||t&&"z"===e.key&&!e.shiftKey?(g(r.dispatchUndoImageEdit()),e.preventDefault(),e.stopPropagation()):("Redo"===e.key||t&&"y"===e.key||t&&"Z"===e.key&&e.shiftKey)&&(g(r.dispatchRedoImageEdit()),e.preventDefault(),e.stopPropagation())}function d(e){"Backspace"!==e.key&&"Delete"!==e.key||e.stopPropagation()}function p(e){if(!c())return;if(e.shiftKey&&/^(?:Digit[1-9])|(?:Key[A-F])$/.test(e.code))return void(0==e.code.indexOf("Digit")?E(parseInt(e.code.substring(5))):E(parseInt(e.code.substring(3),16)));switch(e.key){case"e":h(i.ImageEditorTool.Erase);break;case"h":h(i.ImageEditorTool.Pan);break;case"b":case"p":h(i.ImageEditorTool.Paint);break;case"g":h(i.ImageEditorTool.Fill);break;case"m":h(i.ImageEditorTool.Marquee);break;case"u":h(i.ImageEditorTool.Rect);break;case"l":h(i.ImageEditorTool.Line);break;case"c":h(i.ImageEditorTool.Circle);break;case"-":case"_":m(-1);break;case"=":case"+":m(1);break;case"x":g(r.dispatchSwapBackgroundForeground());break;case"H":v(!1);break;case"V":v(!0);break;case"[":b(!1);break;case"]":b(!0);break;case">":y(!0);break;case"<":y(!1)}const t=s.getState().editor;if(e.shiftKey&&"KeyR"===e.code)w(t.backgroundColor,t.selectedColor);else if(!t.isTilemap&&/^Digit\d$/.test(e.code)){const t=+e.code.slice(-1)+(e.shiftKey?9:0);t>=0&&t<16&&function(e){g(r.dispatchChangeSelectedColor(e))}(t)}}function f(){const e=s.getState();if(e.editor.isTilemap){const t=e.store.present;return[o.getEditState(t.tilemap,!0,e.editor.drawingMode),"tilemap"]}{const t=e.store.present;return[o.getEditState(t.frames[t.currentFrame],!1,e.editor.drawingMode),t.frames.length>1?"animation":"image"]}}function h(e){g(r.dispatchChangeImageTool(e))}function m(e){g(r.dispatchChangeZoom(e))}function g(e){s.dispatch(e)}function y(e){let t;const n=s.getState().editor.cursorSize;switch(n){case 1:t=e?3:1;break;case 3:t=e?5:1;break;case 5:t=e?5:3}n!==t&&g(r.dispatchChangeCursorSize(t))}function v(e){const[t,n]=f(),i=o.flipEdit(t,e,"tilemap"===n);g(r.dispatchImageEdit(i.toImageState()))}function b(e){const[t,n]=f(),i=o.rotateEdit(t,e,"tilemap"===n,"animation"===n);g(r.dispatchImageEdit(i.toImageState()))}function E(e){const[t,n]=f();if("tilemap"===n)return;const i=o.outlineEdit(t,e);g(r.dispatchImageEdit(i.toImageState()))}function w(e,t){const[n,i]=f(),a=o.replaceColorEdit(n,e,t);g(r.dispatchImageEdit(a.toImageState()))}n.addKeyListener=function(){l=[],document.addEventListener("keydown",p),document.addEventListener("keydown",u,!0),document.addEventListener("keydown",d,!0)},n.removeKeyListener=function(){document.removeEventListener("keydown",p),document.removeEventListener("keydown",u,!0),document.removeEventListener("keydown",d,!0)},n.obtainShortcutLock=function(){let e=0;for(;!e;)e=Math.random()*Number.MAX_SAFE_INTEGER;return l.push(e),e},n.releaseShortcutLock=function(e){const t=l.indexOf(e);-1!==t&&l.splice(t,1)},n.areShortcutsEnabled=c,n.setStore=function(e){s=e||a.mainStore},n.flip=v,n.rotate=b,n.outline=E,n.replaceColor=w},{"./actions/dispatch":17,"./store/imageReducer":21,"./store/imageStore":22,"./toolDefinitions":25}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Palette=void 0;const i=e("react"),r=e("react-redux"),a=e("../actions/dispatch");class o extends i.Component{constructor(){super(...arguments),this.handlers=[],this.preventContextMenu=e=>e.preventDefault()}render(){const{colors:e,selected:t,backgroundColor:n,dispatchSwapBackgroundForeground:r}=this.props;return i.createElement("div",null,i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"image-editor-colors",viewBox:"0 0 23 15",onClick:r},i.createElement("defs",null,i.createElement("pattern",{id:"alpha-background",width:"6",height:"6",patternUnits:"userSpaceOnUse"},i.createElement("rect",{x:"0",y:"0",width:"6px",height:"6px",fill:"#aeaeae"}),i.createElement("rect",{x:"0",y:"0",width:"3px",height:"3px",fill:"#dedede"}),i.createElement("rect",{x:"3",y:"3",width:"3px",height:"3px",fill:"#dedede"}))),i.createElement("g",null,i.createElement("rect",{fill:n?e[n]:"url(#alpha-background)",x:6,y:4,width:15,height:10,stroke:"#3c3c3c",strokeWidth:"0.5"},i.createElement("title",null,s(n,e[n]))),i.createElement("rect",{fill:t?e[t]:"url(#alpha-background)",x:2,y:1,width:15,height:10,stroke:"#3c3c3c",strokeWidth:"0.5"},i.createElement("title",null,s(t,e[t]))))),i.createElement("div",{className:"image-editor-color-buttons",onContextMenu:this.preventContextMenu},this.props.colors.map(((e,t)=>i.createElement("div",{key:t,className:"image-editor-button "+(0===t?"checkerboard":""),role:"button",title:s(t,e),onMouseDown:this.clickHandler(t),style:0===t?null:{backgroundColor:e}})))))}clickHandler(e){return this.handlers[e]||(this.handlers[e]=t=>{0===t.button?this.props.dispatchChangeSelectedColor(e):(this.props.dispatchChangeBackgroundColor(e),t.preventDefault(),t.stopPropagation())}),this.handlers[e]}}function s(e,t){const n=0===e?lf("transparency"):function(e){switch(null==e?void 0:e.toLowerCase()){case"#ffffff":return lf("white");case"#ff2121":return lf("red");case"#ff93c4":return lf("pink");case"#ff8135":return lf("orange");case"#fff609":return lf("yellow");case"#249ca3":return lf("teal");case"#78dc52":return lf("green");case"#003fad":return lf("blue");case"#87f2ff":return lf("light blue");case"#8e2ec4":return lf("purple");case"#a4839f":return lf("light purple");case"#5c406c":return lf("dark purple");case"#e5cdc4":return lf("tan");case"#91463d":return lf("brown");case"#000000":return lf("black");default:return}}(t);return n?lf("Color {0} ({1})",e,n):lf("Color {0}",e)}const l={dispatchChangeSelectedColor:a.dispatchChangeSelectedColor,dispatchChangeBackgroundColor:a.dispatchChangeBackgroundColor,dispatchSwapBackgroundForeground:a.dispatchSwapBackgroundForeground};n.Palette=r.connect((function({store:{present:e},editor:t},n){let i=e;return i?{selected:t.selectedColor,backgroundColor:t.backgroundColor,colors:i.colors}:{}}),l)(o)},{"../actions/dispatch":17,react:82,"react-redux":74}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setTelemetryFunction=n.TileDrawingMode=n.TileCategory=n.KeyModifiers=n.CursorSize=n.ImageEditorTool=void 0;const i=e("../../../assets"),r=e("../actions/types");var a,o,s,l;(l=a=n.ImageEditorTool||(n.ImageEditorTool={}))[l.Paint=0]="Paint",l[l.Fill=1]="Fill",l[l.Line=2]="Line",l[l.Erase=3]="Erase",l[l.Circle=4]="Circle",l[l.Rect=5]="Rect",l[l.ColorSelect=6]="ColorSelect",l[l.Marquee=7]="Marquee",l[l.Pan=8]="Pan",function(e){e[e.One=1]="One",e[e.Three=3]="Three",e[e.Five=5]="Five"}(n.CursorSize||(n.CursorSize={})),function(e){e[e.Alt=1]="Alt",e[e.Shift=2]="Shift"}(n.KeyModifiers||(n.KeyModifiers={})),function(e){e[e.Forest=0]="Forest",e[e.Aquatic=1]="Aquatic",e[e.Dungeon=2]="Dungeon",e[e.Misc=3]="Misc"}(o=n.TileCategory||(n.TileCategory={})),function(e){e.Default="default",e.Wall="wall"}(s=n.TileDrawingMode||(n.TileDrawingMode={}));const c={store:{present:{kind:"Animation",visible:!0,colors:["#000000","#ffffff","#ff2121","#ff93c4","#ff8135","#fff609","#249ca3","#78dc52","#003fad","#87f2ff","#8e2ec4","#a4839f","#5c406c","#e5cdc4","#91463d","#000000"],aspectRatioLocked:!1,currentFrame:0,frames:[h(16,16)],interval:200},past:[],future:[]},editor:{selectedColor:3,tool:a.Paint,cursorSize:1,backgroundColor:1,previewAnimating:!1,onionSkinEnabled:!1,overlayEnabled:!0,tilesetRevision:0,isTilemap:!1}},u=(e,t)=>{switch(t.type){case r.TOGGLE_ASPECT_RATIO:return g("toggle-aspect-ratio-lock"),Object.assign(Object.assign({},e),{aspectRatioLocked:!e.aspectRatioLocked});case r.CHANGE_CURRENT_FRAME:return g("change-frame"),Object.assign(Object.assign({},e),{currentFrame:t.index});case r.CHANGE_INTERVAL:return g("change-interval"),Object.assign(Object.assign({},e),{interval:t.newInterval});case r.CHANGE_IMAGE_DIMENSIONS:g("change-dimensions");const[n,i]=t.imageDimensions;return Object.assign(Object.assign({},e),{frames:e.frames.map(((e,t)=>Object.assign(Object.assign({},e),{bitmap:pxt.sprite.Bitmap.fromData(e.bitmap).resize(n,i).data()})))});case r.IMAGE_EDIT:return g("image-edit"),Object.assign(Object.assign({},e),{frames:e.frames.map(((n,i)=>i===e.currentFrame?t.newState:n))});case r.DELETE_FRAME:if(1===e.frames.length)return e;g("delete-frame");const a=e.frames.slice();a.splice(t.index,1);let o=e.currentFrame;return e.currentFrame>=t.index&&e.currentFrame>0&&o--,Object.assign(Object.assign({},e),{currentFrame:o,frames:a});case r.DUPLICATE_FRAME:g("duplicate-frame");const s=e.frames.slice();return s.splice(t.index,0,function(e){let t,n,i;return e.floating&&(e.floating.bitmap&&(n=pxt.sprite.Bitmap.fromData(e.floating.bitmap).copy().data()),e.floating.overlayLayers&&(i=e.floating.overlayLayers.map((e=>pxt.sprite.Bitmap.fromData(e).copy().data()))),t={bitmap:n,overlayLayers:i}),Object.assign(Object.assign({},e),{bitmap:pxt.sprite.Bitmap.fromData(e.bitmap).copy().data(),overlayLayers:e.overlayLayers&&e.overlayLayers.map((e=>pxt.sprite.Bitmap.fromData(e).copy().data())),floating:t})}(e.frames[t.index])),Object.assign(Object.assign({},e),{frames:s,currentFrame:t.index+1});case r.NEW_FRAME:return g("new-frame"),Object.assign(Object.assign({},e),{frames:[...e.frames,h(e.frames[0].bitmap.width,e.frames[0].bitmap.height)],currentFrame:e.frames.length});case r.MOVE_FRAME:if(t.newIndex<0||t.newIndex>=e.frames.length||t.newIndex<0||t.newIndex>=e.frames.length)return e;g("move-frame");const l=e.frames.slice(),c=l.splice(t.oldIndex,1)[0];return l.splice(t.newIndex,0,c),Object.assign(Object.assign({},e),{frames:l,currentFrame:t.oldIndex===e.currentFrame?t.newIndex:e.currentFrame});case r.SET_FRAMES:return g("set-frames"),Object.assign(Object.assign({},e),{frames:t.frames,currentFrame:0});default:return e}},d=(e,t,n)=>{let i;switch(t.type){case r.CHANGE_PREVIEW_ANIMATING:return g("preview-animate-"+(t.animating?"on":"off")),Object.assign(Object.assign({},e),{previewAnimating:t.animating});case r.CHANGE_CANVAS_ZOOM:return(t.zoom>0||t.zoom<0)&&g("zoom-"+(t.zoom>0?"in":"out")),Object.assign(Object.assign({},e),{zoomDelta:t.zoom});case r.CHANGE_IMAGE_TOOL:return g(`change-tool-${a[t.tool]}`),Object.assign(Object.assign({},e),{tool:t.tool});case r.CHANGE_CURSOR_SIZE:return g(`change-cursor-size-${t.cursorSize}`),Object.assign(Object.assign({},e),{cursorSize:t.cursorSize});case r.CHANGE_SELECTED_COLOR:return g(`foreground-color-${t.selectedColor}`),Object.assign(Object.assign({},e),{selectedColor:t.selectedColor,tool:e.tool===a.Erase?a.Paint:e.tool});case r.CHANGE_CURSOR_LOCATION:return Object.assign(Object.assign({},e),{cursorLocation:t.cursorLocation});case r.CHANGE_BACKGROUND_COLOR:return g(`background-color-${t.backgroundColor}`),Object.assign(Object.assign({},e),{backgroundColor:t.backgroundColor});case r.SWAP_FOREGROUND_BACKGROUND:return g("swap-foreground-background"),Object.assign(Object.assign({},e),{backgroundColor:e.selectedColor,selectedColor:e.backgroundColor});case r.TOGGLE_ONION_SKIN_ENABLED:return g("toggle-onion-skin"),Object.assign(Object.assign({},e),{onionSkinEnabled:!e.onionSkinEnabled});case r.CHANGE_TILE_PALETTE_CATEGORY:return g(`change-tile-category-${o[t.category]}`),Object.assign(Object.assign({},e),{tilemapPalette:Object.assign(Object.assign({},e.tilemapPalette),{category:t.category,page:0})});case r.CHANGE_TILE_PALETTE_PAGE:return g("change-tile-page"),Object.assign(Object.assign({},e),{tilemapPalette:Object.assign(Object.assign({},e.tilemapPalette),{page:t.page})});case r.CHANGE_DRAWING_MODE:return g("change-drawing-mode"),Object.assign(Object.assign({},e),{drawingMode:t.drawingMode||s.Default});case r.CHANGE_OVERLAY_ENABLED:return g("change-overlay-enabled"),Object.assign(Object.assign({},e),{overlayEnabled:t.enabled});case r.CREATE_NEW_TILE:return i=e.editedTiles,!t.tile||i&&-1!==i.indexOf(t.tile.id)||(i=(i||[]).concat([t.tile.id])),Object.assign(Object.assign({},e),{editedTiles:i,selectedColor:t.foreground,backgroundColor:t.background});case r.SET_GALLERY_OPEN:return g(`set-gallery-open-${t.open}`),Object.assign(Object.assign({},e),{tileGalleryOpen:t.open,tilemapPalette:Object.assign(Object.assign({},e.tilemapPalette),{page:0})});case r.DELETE_TILE:return Object.assign(Object.assign({},e),{deletedTiles:(e.deletedTiles||[]).concat([t.id]),selectedColor:t.index===e.selectedColor?0:e.selectedColor,backgroundColor:t.index===e.backgroundColor?0:e.backgroundColor,tilesetRevision:e.tilesetRevision+1});case r.OPEN_TILE_EDITOR:const l=t.index?"edit":"new";return g(`open-tile-editor-${l}`),Object.assign(Object.assign({},e),{editingTile:{type:l,tilesetIndex:t.index}});case r.CLOSE_TILE_EDITOR:return i=e.editedTiles,!t.result||i&&-1!==i.indexOf(t.result.id)||(i=(i||[]).concat([t.result.id])),Object.assign(Object.assign({},e),{editedTiles:i,selectedColor:t.index||n.present.tileset.tiles.length,editingTile:void 0,tilesetRevision:e.tilesetRevision+1});case r.SHOW_ALERT:return g("show-alert"),Object.assign(Object.assign({},e),{alert:{title:t.title,text:t.text,options:t.options}});case r.HIDE_ALERT:return g("hide-alert"),Object.assign(Object.assign({},e),{alert:null});case r.DISABLE_RESIZE:return Object.assign(Object.assign({},e),{resizeDisabled:!0})}return e},p=(e,t)=>{switch(t.type){case r.TOGGLE_ASPECT_RATIO:return g("toggle-aspect-ratio-lock"),Object.assign(Object.assign({},e),{aspectRatioLocked:!e.aspectRatioLocked});case r.CHANGE_IMAGE_DIMENSIONS:g("change-dimensions");const[n,a]=t.imageDimensions;return Object.assign(Object.assign({},e),{tilemap:Object.assign(Object.assign({},e.tilemap),{bitmap:b(e.tilemap.bitmap,n,a),overlayLayers:e.tilemap.overlayLayers&&e.tilemap.overlayLayers.map((e=>function(e,t,n){return pxt.sprite.Bitmap.fromData(e).resize(t,n).data()}(e,n,a)))})});case r.CREATE_NEW_TILE:const o=!t.qualifiedName;let s;return g(o?"new-tile":`used-tile-${t.qualifiedName}`),o?(s=t.tile).isProjectTile=!0:s=i.lookupAsset("tile",t.qualifiedName),Object.assign(Object.assign({},e),{tileset:Object.assign(Object.assign({},e.tileset),{tiles:e.tileset.tiles.concat([s])}),nextId:o?e.nextId+1:e.nextId});case r.CLOSE_TILE_EDITOR:return g("close-tile-editor"),t.result?t.index?Object.assign(Object.assign({},e),{tileset:f(e.tileset,t.index,t.result)}):Object.assign(Object.assign({},e),{tileset:Object.assign(Object.assign({},e.tileset),{tiles:e.tileset.tiles.concat([t.result])}),nextId:e.nextId+1}):e;case r.DELETE_TILE:g("delete-tile");const l=e.tileset.tiles.slice();return l.splice(t.index,1),Object.assign(Object.assign({},e),{tilemap:Object.assign(Object.assign({},e.tilemap),{bitmap:v(t.index,pxt.sprite.Tilemap.fromData(e.tilemap.bitmap)).data()}),tileset:Object.assign(Object.assign({},e.tileset),{tiles:l})});case r.IMAGE_EDIT:return g("image-edit"),Object.assign(Object.assign({},e),{tilemap:t.newState});default:return e}};function f(e,t,n){return Object.assign(Object.assign({},e),{tiles:e.tiles.map(((e,i)=>i===t?n:e))})}function h(e,t){return{bitmap:new pxt.sprite.Bitmap(e,t).data()}}let m;function g(e){m&&m(e)}function y(e,t){for(const n of e.tiles)if(!n.jresData&&!n.isProjectTile)for(const e of t)if(e.qualifiedName===n.id){n.bitmap=e.bitmap;break}return e}function v(e,t){const n=t.copy();for(let t=0;t<n.width;t++)for(let i=0;i<n.height;i++){const r=n.get(t,i);r===e?n.set(t,i,0):r>e&&n.set(t,i,r-1)}return n}function b(e,t,n){return pxt.sprite.Tilemap.fromData(e).resize(t,n).data()}function E(e,t){return"tilemap"===e.type?function(e,t){return{kind:"Tilemap",asset:e,colors:pxt.appTarget.runtime.palette.slice(),aspectRatioLocked:!1,tilemap:{bitmap:e.data.tilemap.data(),overlayLayers:[e.data.layers]},tileset:y(e.data.tileset,t),nextId:e.data.nextId}}(e,t):function(e){return{kind:"Animation",asset:e,visible:!0,colors:pxt.appTarget.runtime.palette.slice(),aspectRatioLocked:"tile"===e.type,currentFrame:0,frames:"animation"===e.type?e.frames.map((e=>({bitmap:e}))):[{bitmap:e.bitmap}],interval:"animation"===e.type?e.interval:100}}(e)}n.setTelemetryFunction=function(e){m=e},n.default=(e=c,t)=>{var n;switch(t.type){case r.OPEN_TILE_EDITOR:case r.CHANGE_PREVIEW_ANIMATING:case r.CHANGE_CANVAS_ZOOM:case r.CHANGE_IMAGE_TOOL:case r.CHANGE_CURSOR_SIZE:case r.CHANGE_SELECTED_COLOR:case r.CHANGE_CURSOR_LOCATION:case r.CHANGE_BACKGROUND_COLOR:case r.SWAP_FOREGROUND_BACKGROUND:case r.TOGGLE_ONION_SKIN_ENABLED:case r.CHANGE_OVERLAY_ENABLED:case r.CHANGE_TILE_PALETTE_PAGE:case r.CHANGE_TILE_PALETTE_CATEGORY:case r.CHANGE_DRAWING_MODE:case r.SET_GALLERY_OPEN:case r.SHOW_ALERT:case r.HIDE_ALERT:case r.DISABLE_RESIZE:return Object.assign(Object.assign({},e),{editor:d(e.editor,t,e.store)});case r.SET_INITIAL_STATE:const a=t.state;return Object.assign(Object.assign({},e),{editor:Object.assign(Object.assign({},c.editor),{selectedColor:a.selectedColor,backgroundColor:a.backgroundColor,tilemapPalette:a.tilemapPalette,tileGalleryOpen:a.tileGalleryOpen,tileGallery:a.tileGallery,isTilemap:a.isTilemap,referencedTiles:e.editor.referencedTiles}),store:Object.assign(Object.assign({},e.store),{past:t.past||e.store.past,future:t.past?[]:e.store.future})});case r.OPEN_ASSET:const l=t.asset,f=t.gallery||(t.keepPast?e.editor.tileGallery:[]);let h=-1;if("tilemap"===l.type){const e=t.asset.data;if(pxt.sprite.isEmptyTilemap(e)){const t=e.tileset.tiles||[],r=null===(n=f.find((e=>-1!==e.tags.indexOf("forest"))))||void 0===n?void 0:n.qualifiedName,a=i.lookupAsset("tile",r);a&&!t.find((e=>e.id===r))&&t.push(a),h=t.indexOf(a)}}return Object.assign(Object.assign({},e),{editor:"tilemap"===l.type?{selectedColor:h,backgroundColor:-1,isTilemap:!0,tilemapPalette:{category:o.Forest,page:0},drawingMode:s.Default,overlayEnabled:!0,tileGallery:f,tileGalleryOpen:!!f,referencedTiles:l.data.projectReferences,previewAnimating:!1,onionSkinEnabled:!1,tilesetRevision:0,tool:t.keepPast?e.editor.tool:c.editor.tool,cursorSize:t.keepPast?e.editor.cursorSize:c.editor.cursorSize,editedTiles:t.keepPast?e.editor.editedTiles:void 0,deletedTiles:t.keepPast?e.editor.deletedTiles:void 0}:{isTilemap:!1,tilesetRevision:0,selectedColor:t.keepPast?e.editor.selectedColor:c.editor.selectedColor,backgroundColor:t.keepPast?e.editor.backgroundColor:c.editor.backgroundColor,previewAnimating:t.keepPast?e.editor.previewAnimating:c.editor.previewAnimating,tool:t.keepPast?e.editor.tool:c.editor.tool,onionSkinEnabled:t.keepPast?e.editor.onionSkinEnabled:c.editor.onionSkinEnabled,cursorSize:t.keepPast?e.editor.cursorSize:c.editor.cursorSize,resizeDisabled:t.keepPast?e.editor.resizeDisabled:c.editor.resizeDisabled},store:Object.assign(Object.assign({},e.store),{past:t.keepPast?e.store.past:[],present:E(t.asset,f),future:[]})});case r.CHANGE_ASSET_NAME:return g("change-asset-name"),Object.assign(Object.assign({},e),{store:{past:[...e.store.past,e.store.present],present:Object.assign(Object.assign({},e.store.present),{asset:Object.assign(Object.assign({},e.store.present.asset),{meta:Object.assign(Object.assign({},e.store.present.asset.meta||{}),{displayName:t.name})})}),future:[]}});case r.UNDO_IMAGE_EDIT:return e.store.past.length?(g("undo"),Object.assign(Object.assign({},e),{store:Object.assign(Object.assign({},e.store),{past:e.store.past.slice(0,e.store.past.length-1),present:e.store.past[e.store.past.length-1],future:[...e.store.future,e.store.present]}),editor:Object.assign(Object.assign({},e.editor),{tilesetRevision:e.editor.tilesetRevision+1})})):e;case r.REDO_IMAGE_EDIT:return e.store.future.length?(g("redo"),Object.assign(Object.assign({},e),{store:Object.assign(Object.assign({},e.store),{past:[...e.store.past,e.store.present],present:e.store.future[e.store.future.length-1],future:e.store.future.slice(0,e.store.future.length-1)}),editor:Object.assign(Object.assign({},e.editor),{tilesetRevision:e.editor.tilesetRevision+1})})):e;default:return Object.assign(Object.assign({},e),{editor:d(e.editor,t,e.store),store:Object.assign(Object.assign({},e.store),{past:[...e.store.past,e.store.present],present:e.editor.isTilemap?p(e.store.present,t):u(e.store.present,t),future:[]})})}}},{"../../../assets":2,"../actions/types":18}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mainStore=n.tileEditorStore=void 0;const i=e("redux"),r=e("./imageReducer"),a=i.createStore(r.default);n.default=a,n.tileEditorStore=i.createStore(r.default),n.mainStore=a},{"./imageReducer":21,redux:88}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Minimap=void 0;const i=e("react"),r=e("react-redux"),a=e("../ImageEditor"),o=pxt.BrowserUtils.isEdge()?25:1;class s extends i.Component{constructor(){super(...arguments),this.tileColors=[]}componentDidMount(){this.canvas=this.refs["minimap-canvas"],this.redrawCanvas()}componentDidUpdate(){this.redrawCanvas()}render(){return i.createElement("div",{className:"minimap-outer"},i.createElement("canvas",{ref:"minimap-canvas",className:"paint-surface"}))}redrawCanvas(){const{tilemap:e,lightMode:t}=this.props;let{bitmap:n,floating:i,layerOffsetX:r,layerOffsetY:s}=e;const l=this.canvas.getContext("2d"),c=pxt.sprite.Tilemap.fromData(n),u=i&&i.bitmap?pxt.sprite.Tilemap.fromData(i.bitmap):null;this.canvas.width=c.width*o,this.canvas.height=c.height*o,this.tileColors=[];for(let e=0;e<c.width;e++)for(let n=0;n<c.height;n++){const i=u?u.get(e-r,n-s):null,d=c.get(e,n);i?(l.fillStyle=this.getColor(i),l.fillRect(e*o,n*o,o,o)):d?(l.fillStyle=this.getColor(d),l.fillRect(e*o,n*o,o,o)):t?(l.fillStyle=a.LIGHT_MODE_TRANSPARENT,l.fillRect(e*o,n*o,o,o)):l.clearRect(e*o,n*o,o,o)}}getColor(e){if(!this.tileColors[e]){const{tileset:t,colors:n}=this.props;if(e>=t.tiles.length)return"#ffffff";const i=pxt.sprite.Bitmap.fromData(t.tiles[e].bitmap);this.tileColors[e]=pxt.sprite.computeAverageColor(i,n)}return this.tileColors[e]}}n.Minimap=r.connect((function({store:{present:e},editor:t},n){let i=e;return i?{tilemap:i.tilemap,tileset:i.tileset,colors:i.colors}:{}}),{})(s)},{"../ImageEditor":10,react:82,"react-redux":74}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TilePalette=void 0;const i=e("react"),r=e("react-redux"),a=e("../store/imageReducer"),o=e("../actions/dispatch"),s=e("../TimelineFrame"),l=e("../Dropdown"),c=e("../Pivot"),u=e("../Button"),d=e("../../../assets"),p=pxt.BrowserUtils.isEdge()?25:1,f=[{id:"forest",text:lf("Forest"),tiles:[]},{id:"aquatic",text:lf("Aquatic"),tiles:[]},{id:"dungeon",text:lf("Dungeon"),tiles:[]},{id:"misc",text:lf("Miscellaneous"),tiles:[]}],h=[{id:"custom",text:lf("My Tiles")},{id:"gallery",text:lf("Gallery")}],m=new pxt.sprite.Bitmap(16,16);class g extends i.Component{constructor(e){super(e),this.dropdownHandler=(e,t)=>{this.props.dispatchChangeTilePaletteCategory(t)},this.pivotHandler=(e,t)=>{this.props.dispatchSetGalleryOpen(1===t)},this.pageHandler=e=>{this.props.dispatchChangeTilePalettePage(e)},this.tileCreateHandler=()=>{this.props.dispatchOpenTileEditor()},this.tileEditHandler=()=>{const{tileset:e,selected:t,dispatchOpenTileEditor:n}=this.props,i=e.tiles[t];(null==i?void 0:i.isProjectTile)&&0!==t&&n(t,i.id)},this.tileDuplicateHandler=()=>{var e;const{tileset:t,selected:n,backgroundColor:i,dispatchCreateNewTile:r}=this.props;if(!t.tiles[n]||!t.tiles[n].isProjectTile||0===n)return;const a=t.tiles[n];r(d.createTile(a.bitmap,null,null===(e=a.meta)||void 0===e?void 0:e.displayName),t.tiles.length,i)},this.tileDeleteAlertHandler=()=>{const{tileset:e,selected:t,dispatchShowAlert:n,dispatchHideAlert:i,referencedTiles:r}=this.props,a=e.tiles[t];t&&a&&a.isProjectTile&&(r&&-1!==r.indexOf(a.id)?n(lf("Unable to delete"),lf("This tile is used in your game. Remove all blocks using the tile before deleting."),[{label:lf("Cancel"),onClick:i}]):n(lf("Are you sure?"),lf("Deleting this tile will remove it from all other tile maps in your game."),[{label:lf("Yes"),onClick:this.deleteTile},{label:lf("No"),onClick:i}]))},this.deleteTile=()=>{const e=this.props.tileset.tiles[this.props.selected];e&&this.props.dispatchDeleteTile(this.props.selected,e.id)},this.canvasClickHandler=e=>{this.handleCanvasClickCore(e.clientX,e.clientY,e.button>0)},this.canvasTouchHandler=e=>{this.handleCanvasClickCore(e.changedTouches[0].clientX,e.changedTouches[0].clientY,!1)},this.foregroundBackgroundClickHandler=()=>{this.props.drawingMode!=a.TileDrawingMode.Default?this.props.dispatchChangeDrawingMode(a.TileDrawingMode.Default):this.props.dispatchSwapBackgroundForeground()},this.wallClickHandler=()=>{this.props.drawingMode===a.TileDrawingMode.Wall?this.props.dispatchChangeDrawingMode(a.TileDrawingMode.Default):this.props.dispatchChangeDrawingMode(a.TileDrawingMode.Wall)},this.preventContextMenu=e=>e.preventDefault();const{gallery:t}=e;if(this.refreshGallery(e),t){const e={};for(const n of t){const t=n.tags.find((e=>pxt.Util.startsWith(e,"category-")));t&&(e[t]||(e[t]={id:t,text:pxt.Util.rlf(`{id:tilecategory}${t.substr(9)}`),tiles:[]}),e[t].tiles.push(n))}this.categories=f.concat(Object.keys(e).map((t=>e[t])))}else this.categories=[]}componentDidMount(){this.canvas=this.refs["tile-canvas-surface"],this.updateGalleryTiles(),this.redrawCanvas()}UNSAFE_componentWillReceiveProps(e){this.props.selected!=e.selected?this.jumpToPageContaining(e.selected):this.props.backgroundColor!=e.backgroundColor&&this.jumpToPageContaining(e.backgroundColor),this.refreshGallery(e)}componentDidUpdate(){this.updateGalleryTiles(),this.redrawCanvas()}render(){const{colors:e,selected:t,backgroundColor:n,tileset:r,category:o,page:d,drawingMode:p,galleryOpen:f}=this.props,g=r.tiles[t]?r.tiles[t].bitmap:m.data(),v=r.tiles[n]?r.tiles[n].bitmap:m.data();m.data(),this.updateGalleryTiles();let b=Math.ceil(this.categoryTiles.length/16);f||this.categoryTiles.length%16!=0||b++;const E=!f&&(1===b||d===b-1),w=f||!this.renderedTiles.some((e=>!y(e)&&e.index===t));return i.createElement("div",{className:"tile-palette"},i.createElement("div",{className:"tile-palette-fg-bg"},i.createElement("div",{className:"tile-palette-swatch fg "+(p==a.TileDrawingMode.Default?"selected":""),onClick:this.foregroundBackgroundClickHandler,role:"button"},i.createElement(s.TimelineFrame,{frames:[{bitmap:g}],colors:e})),i.createElement("div",{className:"tile-palette-swatch bg",onClick:this.foregroundBackgroundClickHandler,role:"button"},i.createElement(s.TimelineFrame,{frames:[{bitmap:v}],colors:e}),i.createElement(u.IconButton,{iconClass:"ms-Icon ms-Icon--ReturnKey",title:lf("Swap the background and foreground colors."),toggle:!0})),i.createElement("div",{className:"tile-palette-swatch wall "+(p==a.TileDrawingMode.Wall?"selected":""),onClick:this.wallClickHandler,title:lf("Draw walls"),role:"button"},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",width:"1000",height:"1000"},i.createElement("path",{d:"M 968.49289,108.05443 771.30518,3.7581533 183.65231,166.0694 l 2.58963,202.62638 -156.247366,54.4148 0.872799,492.65563 179.544267,81.08212 758.08125,-222.4989 z M 765.6275,42.836761 916.79721,122.02922 412.26526,262.35026 250.08966,187.43643 Z M 934.62189,739.077 234.56171,946.92199 233.81426,554.79578 422.38222,493.25053 423.42046,300.4059 934.62189,157.54989 Z M 204.96854,402.33519 361.49056,473.98651 222.88861,518.46222 75.008408,444.5191 Z"})))),i.createElement(c.Pivot,{options:h,selected:f?1:0,onChange:this.pivotHandler}),i.createElement("div",{className:"tile-palette-controls-outer"},f&&i.createElement(l.Dropdown,{onChange:this.dropdownHandler,options:this.categories.filter((e=>!!e.tiles.length)),selected:o}),!f&&i.createElement("div",{className:"tile-palette-controls"},i.createElement(u.IconButton,{onClick:this.tileEditHandler,iconClass:"ms-Icon ms-Icon--SingleColumnEdit",title:lf("Edit the selected tile"),disabled:w,toggle:!w}),i.createElement(u.IconButton,{onClick:this.tileDuplicateHandler,iconClass:"ms-Icon ms-Icon--Copy",title:lf("Duplicate the selected tile"),disabled:w,toggle:!w}),i.createElement(u.IconButton,{onClick:this.tileDeleteAlertHandler,iconClass:"ms-Icon ms-Icon--Delete",title:lf("Delete the selected tile"),disabled:w,toggle:!w}))),i.createElement("div",{className:"tile-canvas-outer",onContextMenu:this.preventContextMenu},i.createElement("div",{className:"tile-canvas"},i.createElement("canvas",{ref:"tile-canvas-surface",className:"paint-surface",onMouseDown:this.canvasClickHandler,onTouchStart:this.canvasTouchHandler,role:"complementary"}),E&&i.createElement("div",{ref:"create-tile-ref"},i.createElement(u.IconButton,{onClick:this.tileCreateHandler,iconClass:"ms-Icon ms-Icon--Add",title:lf("Create a new tile"),toggle:!0}))),i.createElement("div",{className:"tile-canvas-controls"},function(e,t,n){const r=16+5*(e-1),a=[];for(let n=0;n<e;n++)a[n]=n===t;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${r} 10`,className:"tile-palette-pages "+(e<2?"disabled":"")},i.createElement("polygon",{className:"tile-palette-page-arrow",points:"1,5 4,3 4,7",onClick:t?()=>n(t-1):void 0}),a.map(((e,t)=>i.createElement("circle",{className:"tile-palette-page-dot",key:t,cx:8+5*t,cy:"5",r:e?2:1,onClick:e?void 0:()=>n(t)}))),i.createElement("polygon",{className:"tile-palette-page-arrow",points:`${r-1},5 ${r-4},3 ${r-4},7`,onClick:t<e-1?()=>n(t+1):void 0}))}(b,d,this.pageHandler))))}updateGalleryTiles(){const{page:e,category:t,galleryOpen:n}=this.props;this.categoryTiles=n?this.categories[t].tiles:this.getCustomTiles().map((([e,t])=>({index:t,bitmap:e.bitmap})));const i=16*e;this.renderedTiles=this.categoryTiles.slice(i,i+16)}jumpToPageContaining(e){const{tileset:t,dispatchSetGalleryOpen:n,dispatchChangeTilePaletteCategory:i,dispatchChangeTilePalettePage:r}=this.props;if(!e||e<0||e>=t.tiles.length)return;const a=t.tiles[e];if(a.isProjectTile){const e=this.getCustomTiles().map((([e,t])=>e));if(!e)return;const t=Math.max(Math.floor(e.findIndex((e=>e.id==a.id))/16),0);n(!1),r(t)}else{const e=this.categories.find((e=>-1!==e.tiles.findIndex((e=>e.qualifiedName==a.id))));if(!e||!e.tiles)return;const t=Math.max(Math.floor(e.tiles.findIndex((e=>e.qualifiedName==a.id))/16),0);n(!0),i(this.categories.indexOf(e)),r(t)}}redrawCanvas(){const{tileset:e,page:t,selected:n}=this.props,i=4*t*4,r=e.tileWidth+1;this.canvas.width=(4*r+1)*p,this.canvas.height=(4*r+1)*p;const a=this.canvas.getContext("2d");for(let e=0;e<4;e++)for(let t=0;t<4;t++){const o=this.categoryTiles[i+4*e+t];o&&(y(o)||o.index!==n||(a.fillStyle="#ff0000",a.fillRect(t*r,e*r,r+1,r+1)),a.fillStyle="#333333",a.fillRect(t*r+1,e*r+1,r-1,r-1),this.drawBitmap(pxt.sprite.Bitmap.fromData(o.bitmap),1+t*r,1+e*r))}this.positionCreateTileButton()}drawBitmap(e,t=0,n=0,i=!0,r=p,a=this.canvas){const{colors:o}=this.props,s=a.getContext("2d");s.imageSmoothingEnabled=!1;for(let a=0;a<e.width;a++)for(let l=0;l<e.height;l++){const c=e.get(a,l);c?(s.fillStyle=o[c],s.fillRect((a+t)*r,(l+n)*r,r,r)):i||s.clearRect((a+t)*r,(l+n)*r,r,r)}}handleCanvasClickCore(e,t,n){const i=this.canvas.getBoundingClientRect(),r=(e-i.left)/(i.width/4)|0,o=(t-i.top)/(i.height/4)|0,s=this.renderedTiles[4*o+r];if(s){let e,t;if(y(s)?(e=this.getTileIndex(s),t=s.qualifiedName):e=s.index,e>=0)n?this.props.dispatchChangeBackgroundColor(e):this.props.dispatchChangeSelectedColor(e);else{const{selected:e,backgroundColor:i,tileset:r}=this.props,a=r.tiles.length||1;this.props.dispatchCreateNewTile(null,n?e:a,n?a:i,t)}this.props.dispatchChangeDrawingMode(a.TileDrawingMode.Default)}}refreshGallery(e){const{gallery:t,tileset:n}=e;t&&f.forEach((e=>{e.tiles=t.filter((t=>-1!==t.tags.indexOf(e.id)&&t.tileWidth===n.tileWidth))}))}positionCreateTileButton(){const e=this.refs["create-tile-ref"];if(e){const t=this.categoryTiles.length%4,n=Math.floor(this.categoryTiles.length/4)%4;e.style.position="absolute",e.style.left="calc("+t/4+" * (100% - 0.5rem) + 0.25rem)",e.style.top="calc("+n/4+" * (100% - 0.5rem) + 0.25rem)"}}getCustomTiles(){return this.props.tileset.tiles.map(((e,t)=>[e,t])).filter((([e])=>e.isProjectTile)).sort((([e],[t])=>{const n="myTiles.transparency"+this.props.tileset.tileWidth;return e.id==n?-1:t.id==n?1:e.internalID-t.internalID}))}getTileIndex(e){const{tileset:t}=this.props;for(let n=0;n<t.tiles.length;n++)if(t.tiles[n].id===e.qualifiedName)return n;return-1}}function y(e){return!!e.qualifiedName}const v={dispatchChangeSelectedColor:o.dispatchChangeSelectedColor,dispatchChangeBackgroundColor:o.dispatchChangeBackgroundColor,dispatchSwapBackgroundForeground:o.dispatchSwapBackgroundForeground,dispatchChangeTilePalettePage:o.dispatchChangeTilePalettePage,dispatchChangeTilePaletteCategory:o.dispatchChangeTilePaletteCategory,dispatchChangeDrawingMode:o.dispatchChangeDrawingMode,dispatchCreateNewTile:o.dispatchCreateNewTile,dispatchSetGalleryOpen:o.dispatchSetGalleryOpen,dispatchOpenTileEditor:o.dispatchOpenTileEditor,dispatchDeleteTile:o.dispatchDeleteTile,dispatchShowAlert:o.dispatchShowAlert,dispatchHideAlert:o.dispatchHideAlert};n.TilePalette=r.connect((function({store:{present:e},editor:t},n){let i=e;return i?{selected:t.selectedColor,tileset:i.tileset,backgroundColor:t.backgroundColor,category:t.tilemapPalette.category,page:t.tilemapPalette.page,colors:i.colors,drawingMode:t.drawingMode,gallery:t.tileGallery,galleryOpen:t.tileGalleryOpen,referencedTiles:t.referencedTiles}:{}}),v)(g)},{"../../../assets":2,"../Button":6,"../Dropdown":8,"../Pivot":11,"../TimelineFrame":14,"../actions/dispatch":17,"../store/imageReducer":21,react:82,"react-redux":74}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.replaceColorEdit=n.outlineEdit=n.flipEdit=n.rotateEdit=n.MarqueeEdit=n.FillEdit=n.CircleEdit=n.LineEdit=n.OutlineEdit=n.RectangleEdit=n.PaintEdit=n.SelectionEdit=n.Edit=n.EditState=n.getEditState=n.getEdit=n.tools=n.ToolCursor=void 0;const i=e("./store/imageReducer");var r,a;(a=r=n.ToolCursor||(n.ToolCursor={})).None="none",a.Default="default",a.Pointer="pointer",a.Crosshair="crosshair",a.Grab="grab",a.Grabbing="grabbing",a.EyeDropper="var(--eyedropper)",n.tools=[{tool:i.ImageEditorTool.Paint,iconClass:"ms-Icon ms-Icon--Edit",title:lf("Paint Tool"),hoverCursor:r.Crosshair},{tool:i.ImageEditorTool.Erase,iconClass:"ms-Icon ms-Icon--EraseTool",title:lf("Erase Tool"),hoverCursor:r.Crosshair},{tool:i.ImageEditorTool.Rect,iconClass:"ms-Icon ms-Icon--RectangleShape",title:lf("Rectangle Tool"),hoverCursor:r.Crosshair},{tool:i.ImageEditorTool.Fill,iconClass:"ms-Icon ms-Icon--BucketColor",title:lf("Fill Tool"),hoverCursor:r.Crosshair},{tool:i.ImageEditorTool.Circle,iconClass:"ms-Icon ms-Icon--CircleRing",title:lf("Circle Tool"),hoverCursor:r.Crosshair},{tool:i.ImageEditorTool.Line,iconClass:"ms-Icon ms-Icon--Line",title:lf("Line Tool"),hoverCursor:r.Crosshair},{tool:i.ImageEditorTool.Marquee,iconClass:"ms-Icon ms-Icon--SelectAll",title:lf("Marquee Tool"),hoverCursor:r.Crosshair,hoverLayerCursor:r.Grab,downLayerCursor:r.Grabbing},{tool:i.ImageEditorTool.Pan,iconClass:"ms-Icon ms-Icon--HandsFree",title:lf("Canvas Pan Tool"),hoverCursor:r.Grab,downCursor:r.Grabbing},{tool:i.ImageEditorTool.ColorSelect,hiddenTool:!0,iconClass:"ms-Icon ms-Icon--Edit",title:lf("Color Select Tool"),hoverCursor:r.EyeDropper}],n.getEdit=function(e,t,n,r){switch(e){case i.ImageEditorTool.Paint:return new c(t.width,t.height,n,r);case i.ImageEditorTool.Rect:return new u(t.width,t.height,n,r);case i.ImageEditorTool.Fill:return new f(t.width,t.height,n,r);case i.ImageEditorTool.Line:return new d(t.width,t.height,n,r);case i.ImageEditorTool.Marquee:return new h(t.width,t.height,n,r);case i.ImageEditorTool.Circle:return new p(t.width,t.height,n,r);case i.ImageEditorTool.Erase:return new c(t.width,t.height,0,r);case i.ImageEditorTool.ColorSelect:default:return}},n.getEditState=function(e,t,n=i.TileDrawingMode.Default){const r=new o(t?pxt.sprite.Tilemap.fromData(e.bitmap).copy():pxt.sprite.Bitmap.fromData(e.bitmap).copy());let a,s,l;return e.overlayLayers&&(r.overlayLayers=e.overlayLayers.map((e=>pxt.sprite.Bitmap.fromData(e).copy()))),r.layerOffsetX=e.layerOffsetX,r.layerOffsetY=e.layerOffsetY,e.floating&&(e.floating.bitmap&&(s=t?pxt.sprite.Tilemap.fromData(e.floating.bitmap).copy():pxt.sprite.Bitmap.fromData(e.floating.bitmap).copy()),e.floating.overlayLayers&&(l=e.floating.overlayLayers.map((e=>pxt.sprite.Bitmap.fromData(e).copy()))),a={image:s,overlayLayers:l}),r.floating=a,r.setActiveLayer(n),r};class o{constructor(e){this.activeLayerIndex=-1,this.image=e,this.layerOffsetX=0,this.layerOffsetY=0}get width(){return this.image.width}get height(){return this.image.height}get activeLayer(){return this.activeLayerIndex<0?this.image:this.overlayLayers[this.activeLayerIndex]}setActiveLayer(e){switch(e){case i.TileDrawingMode.Wall:this.activeLayerIndex=0;break;default:this.activeLayerIndex=-1}}copy(){const e=new o;if(e.image=this.image.copy(),e.overlayLayers=this.overlayLayers&&this.overlayLayers.map((e=>e.copy())),this.floating){let t,n;this.floating.image&&(t=this.floating.image.copy()),this.floating.overlayLayers&&(n=this.floating.overlayLayers.map((e=>e.copy()))),e.floating={image:t,overlayLayers:n}}return e.layerOffsetX=this.layerOffsetX,e.layerOffsetY=this.layerOffsetY,e}equals(e){return!(!this.image.equals(e.image)||this.floating&&!e.floating||!this.floating&&e.floating)&&(!this.floating||!this.floating.image||this.floating.image.equals(e.floating.image)&&this.layerOffsetX===e.layerOffsetX&&this.layerOffsetY===e.layerOffsetY)}mergeFloatingLayer(){this.floating&&(this.floating.image||this.floating.overlayLayers)&&(this.floating.image&&(this.floating.image.x0=this.layerOffsetX,this.floating.image.y0=this.layerOffsetY,this.image.apply(this.floating.image,!0),this.floating.image=void 0),this.floating.overlayLayers&&(this.floating.overlayLayers.forEach(((e,t)=>{e.x0=this.layerOffsetX,e.y0=this.layerOffsetY,this.overlayLayers[t].apply(e,!0)})),this.floating.overlayLayers=void 0))}copyToLayer(e,t,n,i,r=!1){if(0===n||0===i)return;n<0&&(e+=n,n=-n),i<0&&(t+=i,i=-i);let a,o=this.image.copy(e,t,n,i);if(this.layerOffsetX=o.x0,this.layerOffsetY=o.y0,o.x0=void 0,o.y0=void 0,this.overlayLayers&&(a=this.overlayLayers.map((r=>r.copy(e,t,n,i)))),r)for(let r=0;r<n;r++)for(let n=0;n<i;n++)this.image.set(e+r,t+n,0),this.overlayLayers&&this.overlayLayers.forEach((i=>i.set(e+r,t+n,0)));this.floating={image:o,overlayLayers:a}}inFloatingLayer(e,t){return!(!this.floating||!this.floating.image)&&(e-=this.layerOffsetX,t-=this.layerOffsetY,e>=0&&e<this.floating.image.width&&t>=0&&t<this.floating.image.height)}setFloatingLayer(e,t,n){var i,r;n&&this.mergeFloatingLayer(),this.floating={image:e},this.layerOffsetX=null!==(i=null==t?void 0:t.layerOffsetX)&&void 0!==i?i:0,this.layerOffsetY=null!==(r=null==t?void 0:t.layerOffsetY)&&void 0!==r?r:0}toImageState(){return{bitmap:this.image.data(),layerOffsetX:this.layerOffsetX,layerOffsetY:this.layerOffsetY,floating:this.floating&&{bitmap:this.floating.image?this.floating.image.data():void 0,overlayLayers:this.floating.overlayLayers?this.floating.overlayLayers.map((e=>e.data())):void 0},overlayLayers:this.overlayLayers?this.overlayLayers.map((e=>e.data())):void 0}}}n.EditState=o;class s{constructor(e,t,n,i){this.canvasWidth=e,this.canvasHeight=t,this.color=n,this.toolWidth=i}doEdit(e){this.isStarted&&this.doEditCore(e)}inBounds(e,t){return e>=0&&e<this.canvasWidth&&t>=0&&t<this.canvasHeight}start(e,t,n,i,r){this.isStarted=!0,this.startCol=e,this.startRow=t,this.startX=n,this.startY=i}drawCursor(e,t,n){n(e,t)}}n.Edit=s;class l extends s{update(e,t){this.endCol=e,this.endRow=t,this.isDragged||e==this.startCol&&t==this.startRow||(this.isDragged=!0)}topLeft(){return{x:Math.min(this.startCol,this.endCol),y:Math.min(this.startRow,this.endRow)}}bottomRight(){return{x:Math.max(this.startCol,this.endCol),y:Math.max(this.startRow,this.endRow)}}}n.SelectionEdit=l;class c extends s{constructor(e,t,n,i){super(e,t,n,i),this.showPreview=!0,this.mask=new pxt.sprite.Bitmask(e,t)}update(e,t){this.interpolate(this.startCol,this.startRow,e,t),this.startCol=e,this.startRow=t}interpolate(e,t,n,i){const r=n-e,a=i-t,o=(e,t)=>this.mask.set(e,t);if(0===r){const n=a>=0?i:t;for(let r=a>=0?t:i;r<=n;r++)this.drawCore(e,r,o);return}const s=r>0?1:-1,l=a>0?1:-1,c=Math.abs(a/r);let u=0,d=t;for(let t=e;s>0?t<=n:t>=n;t+=s)for(this.drawCore(t,d,o),u+=c;u>=.5;)(l>0?d<=i:d>=i)&&this.drawCore(t,d,o),d+=l,u-=1}doEditCore(e){e.mergeFloatingLayer();for(let t=0;t<e.width;t++)for(let n=0;n<e.height;n++)this.mask.get(t,n)&&e.activeLayer.set(t,n,this.color)}drawCursor(e,t,n){this.drawCore(e,t,n)}drawCore(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(let i=0;i<this.toolWidth;i++)for(let r=0;r<this.toolWidth;r++){const a=e+i,o=t+r;a>=0&&a<this.canvasWidth&&o>=0&&o<this.canvasHeight&&n(e+i,t+r)}}}n.PaintEdit=c;n.RectangleEdit=class extends l{constructor(){super(...arguments),this.showPreview=!0}doEditCore(e){e.mergeFloatingLayer();const t=this.topLeft(),n=this.bottomRight();for(let i=t.x;i<=n.x;i++)for(let r=t.y;r<=n.y;r++)e.activeLayer.set(i,r,this.color)}};class u extends l{constructor(){super(...arguments),this.showPreview=!0}doEditCore(e){e.mergeFloatingLayer();let t=this.topLeft();t.x-=this.toolWidth>>1,t.y-=this.toolWidth>>1;let n=this.bottomRight();n.x+=this.toolWidth>>1,n.y+=this.toolWidth>>1;for(let i=0;i<this.toolWidth;i++)this.drawRectangle(e,{x:t.x+i,y:t.y+i},{x:n.x-i,y:n.y-i})}drawRectangle(e,t,n){if(!(t.x>n.x||t.y>n.y)){for(let i=t.x;i<=n.x;i++)e.activeLayer.set(i,t.y,this.color),e.activeLayer.set(i,n.y,this.color);for(let i=t.y;i<=n.y;i++)e.activeLayer.set(t.x,i,this.color),e.activeLayer.set(n.x,i,this.color)}}drawCursor(e,t,n){this.drawCore(e,t,n)}drawCore(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(let i=0;i<this.toolWidth;i++)for(let r=0;r<this.toolWidth;r++){const a=e+i,o=t+r;a>=0&&a<this.canvasWidth&&o>=0&&o<this.canvasHeight&&n(e+i,t+r)}}}n.OutlineEdit=u;class d extends l{constructor(){super(...arguments),this.showPreview=!0}doEditCore(e){e.mergeFloatingLayer(),this.bresenham(this.startCol,this.startRow,this.endCol,this.endRow,e)}bresenham(e,t,n,i,r){const a=n-e,o=i-t,s=(e,t)=>r.activeLayer.set(e,t,this.color);if(0===a){const n=o>=0?i:t;for(let r=o>=0?t:i;r<=n;r++)this.drawCore(e,r,s);return}const l=a>0?1:-1,c=o>0?1:-1,u=Math.abs(o/a);let d=0,p=t;for(let t=e;l>0?t<=n:t>=n;t+=l)for(this.drawCore(t,p,s),d+=u;d>=.5;)(c>0?p<=i:p>=i)&&this.drawCore(t,p,s),p+=c,d-=1}drawCursor(e,t,n){this.drawCore(e,t,n)}drawCore(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(let i=0;i<this.toolWidth;i++)for(let r=0;r<this.toolWidth;r++)n(e+i,t+r)}}n.LineEdit=d;class p extends l{constructor(){super(...arguments),this.showPreview=!0}doEditCore(e){e.mergeFloatingLayer();const t=this.topLeft(),n=this.bottomRight(),i=n.x-t.x,r=n.y-t.y,a=Math.floor(Math.hypot(i,r)),o=this.startCol,s=this.startRow;this.midpoint(o,s,a,e)}midpoint(e,t,n,i){let r=n-1,a=0,o=1,s=1,l=o-2*n;for(;r>=a;)i.activeLayer.set(e+r,t+a,this.color),i.activeLayer.set(e+r,t-a,this.color),i.activeLayer.set(e+a,t+r,this.color),i.activeLayer.set(e+a,t-r,this.color),i.activeLayer.set(e-a,t+r,this.color),i.activeLayer.set(e-a,t-r,this.color),i.activeLayer.set(e-r,t+a,this.color),i.activeLayer.set(e-r,t-a,this.color),l<=0&&(a++,l+=s,s+=2),l>0&&(r--,l+=(o+=2)-2*n)}}n.CircleEdit=p;class f extends s{constructor(){super(...arguments),this.showPreview=!0}start(e,t,n,i,r){this.isStarted=!0,this.col=e,this.row=t}update(e,t){this.col=e,this.row=t}doEditCore(e){const t=e.activeLayer!==e.image,n=(n,i)=>(t?e.activeLayer.get(n,i)+1<<8:0)+e.image.get(n,i),i=n(this.col,this.row);if(i===this.color)return;e.mergeFloatingLayer();const r=new pxt.sprite.Bitmask(e.width,e.height);r.set(this.col,this.row);const a=[{x:this.col,y:this.row}];for(;a.length;){const t=a.pop();n(t.x,t.y)===i&&(e.activeLayer.set(t.x,t.y,this.color),o(t.x+1,t.y),o(t.x-1,t.y),o(t.x,t.y+1),o(t.x,t.y-1))}function o(e,t){e>=0&&e<r.width&&t>=0&&t<r.height&&!r.get(e,t)&&(r.set(e,t),a.push({x:e,y:t}))}}}n.FillEdit=f;class h extends l{constructor(){super(...arguments),this.isMove=!1,this.isResize=!1,this.showPreview=!1}start(e,t,n,i,r){this.isStarted=!0,this.startCol=e,this.startRow=t;const a=document.elementFromPoint(n,i);if(r.floating&&r.floating.image)if(a&&"image-editor-floating-layer-corner"==a.className){this.isResize=!0,this.startOffsetX=r.layerOffsetX,this.startOffsetY=r.layerOffsetY;let e,t=0;const a=document.getElementsByClassName("image-editor-floating-layer-corner");for(let r=0;r<a.length;r++){let o=Math.sqrt(Math.pow(a[r].getBoundingClientRect().x-n,2)+Math.pow(a[r].getBoundingClientRect().y-i,2));o>t&&(t=o,e=a[r])}const o=document.getElementsByClassName("paint-surface");let s;for(let e=0;e<o.length;e++)o[e].className.includes("main")&&(s=o[e]);const l=s.getBoundingClientRect().left,c=s.getBoundingClientRect().top,u=s.getBoundingClientRect().width,d=s.getBoundingClientRect().height;this.anchorCol=(e.getBoundingClientRect().x-l)/u*this.canvasWidth,this.anchorRow=(e.getBoundingClientRect().y-c)/d*this.canvasHeight,this.originalImage||(this.originalImage=r.floating.image.copy())}else r.inFloatingLayer(e,t)&&(this.isMove=!0,this.startOffsetX=r.layerOffsetX,this.startOffsetY=r.layerOffsetY)}inBounds(e,t){return this.isMove||super.inBounds(e,t)}doEditCore(e){const t=this.topLeft(),n=this.bottomRight();if(this.isDragged)if(this.isMove)e.layerOffsetX=this.startOffsetX+this.endCol-this.startCol,e.layerOffsetY=this.startOffsetY+this.endRow-this.startRow;else if(this.isResize){const t=Math.round(Math.abs(this.anchorCol-this.endCol)),n=Math.round(Math.abs(this.anchorRow-this.endRow)),i=function(e,t,n){const i=new pxt.sprite.Bitmap(t,n,0,0);for(let r=0;r<t;r++)for(let a=0;a<n;a++){const o=Math.floor(r/t*e.width),s=Math.floor(a/n*e.height),l=e.get(o,s);i.set(r,a,l)}return i}(this.originalImage,t,n);e.setFloatingLayer(i,{layerOffsetX:Math.round(Math.min(this.anchorCol,this.endCol)),layerOffsetY:Math.round(Math.min(this.anchorRow,this.endRow))},!1)}else e.mergeFloatingLayer(),e.copyToLayer(t.x,t.y,n.x-t.x+1,n.y-t.y+1,!0);else this.isMove||e.mergeFloatingLayer()}}n.MarqueeEdit=h,n.rotateEdit=function(e,t,n,i){var r;const a=!!(null===(r=e.floating)||void 0===r?void 0:r.image),s=a?e.floating:e,l=n?new pxt.sprite.Tilemap(s.image.height,s.image.width):new pxt.sprite.Bitmap(s.image.height,s.image.width),c=s.overlayLayers?s.overlayLayers.map((e=>new pxt.sprite.Bitmap(e.height,e.width))):void 0;for(let e=0;e<s.image.width;e++)for(let t=0;t<s.image.height;t++)d(s.image,l,e,t),c&&c.forEach(((n,i)=>d(s.overlayLayers[i],n,e,t)));const u=l.width===l.height&&l.width===e.image.width&&e.image.width===e.image.height;if(!i&&!a||u){const e=new o(l);return e.overlayLayers=c,e}if(!a)for(let t=0;t<e.width;t++)for(let n=0;n<e.height;n++)e.image.set(t,n,0),e.overlayLayers&&e.overlayLayers.forEach((e=>null==e?void 0:e.set(t,n,0)));return(l.width===e.image.height&&l.height===e.image.width||l.width===e.image.width&&l.height===e.image.height)&&(e.layerOffsetX=(e.width>>1)-(l.width>>1),e.layerOffsetY=(e.height>>1)-(l.height>>1)),e.floating={image:l,overlayLayers:c},e;function d(e,n,i,r){t?n.set(r,i,e.get(i,e.height-r-1)):n.set(r,i,e.get(e.width-i-1,r))}},n.flipEdit=function(e,t,n){var i,r;const a=(null===(i=e.floating)||void 0===i?void 0:i.image)?e.floating:e,s=n?new pxt.sprite.Tilemap(a.image.width,a.image.height):new pxt.sprite.Bitmap(a.image.width,a.image.height),l=a.overlayLayers?a.overlayLayers.map((e=>new pxt.sprite.Bitmap(e.width,e.height))):void 0;for(let e=0;e<a.image.width;e++)for(let t=0;t<a.image.height;t++)c(a.image,s,e,t),l&&l.forEach(((n,i)=>c(a.overlayLayers[i],n,e,t)));if(null===(r=e.floating)||void 0===r?void 0:r.image)return e.floating={image:s,overlayLayers:l},e;{const e=new o(s);return e.overlayLayers=l,e}function c(e,n,i,r){t?n.set(i,r,e.get(i,e.height-r-1)):n.set(i,r,e.get(e.width-i-1,r))}},n.outlineEdit=function(e,t){var n,i;const r=(null===(n=e.floating)||void 0===n?void 0:n.image)?e.floating:e,a=e.copy(),o=(null===(i=null==e?void 0:e.floating)||void 0===i?void 0:i.image)?a.floating.image:a.image;for(let e=0;e<r.image.width;e++)for(let n=0;n<r.image.height;n++)0===r.image.get(e,n)&&(0===r.image.get(e-1,n)&&0===r.image.get(e,n-1)&&0===r.image.get(e+1,n)&&0===r.image.get(e,n+1)||o.set(e,n,t));return a},n.replaceColorEdit=function(e,t,n){var i,r;const a=(null===(i=e.floating)||void 0===i?void 0:i.image)?e.floating:e,o=e.copy(),s=(null===(r=null==e?void 0:e.floating)||void 0===r?void 0:r.image)?o.floating.image:o.image;for(let e=0;e<a.image.width;e++)for(let i=0;i<a.image.height;i++)a.image.get(e,i)===t&&s.set(e,i,n);return o}},{"./store/imageReducer":21}],26:[function(e,t,n){"use strict";function i(){return"undefined"!=typeof window&&!!window.PointerEvent}function r(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&navigator.maxTouchPoints>0)}var a;Object.defineProperty(n,"__esModule",{value:!0}),n.createTilemapPatchFromFloatingLayer=n.applyBitmapData=n.imageStateToTilemap=n.imageStateToBitmap=n.bindGestureEvents=n.GestureState=n.fireClickOnlyOnEnter=n.clientCoord=n.pointerEvents=n.Bitmask=n.MapTools=n.isBitmapSupported=n.isTouchEnabled=n.hasPointerEvents=n.DRAG_RADIUS=void 0,n.DRAG_RADIUS=3,n.hasPointerEvents=i,n.isTouchEnabled=r,n.isBitmapSupported=function(){return!!window.createImageBitmap},(a=n.MapTools||(n.MapTools={}))[a.Pan=0]="Pan",a[a.Stamp=1]="Stamp",a[a.Object=2]="Object",a[a.Erase=3]="Erase";function o(e){if(e.touches){const t=e;return t.touches.length?t.touches[0]:t.changedTouches[0]}return e}n.Bitmask=class{constructor(e,t){this.width=e,this.height=t,this.mask=new Uint8Array(Math.ceil(e*t/8))}set(e,t){const n=e+this.width*t,i=n>>3,r=7&n;this.mask[i]|=1<<r}get(e,t){const n=e+this.width*t,i=n>>3,r=7&n;return this.mask[i]>>r&1}},n.pointerEvents=i()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:r()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"},n.clientCoord=o,n.fireClickOnlyOnEnter=function(e){13===("number"==typeof e.which?e.which:e.keyCode)&&(e.preventDefault(),e.currentTarget.click())};class s{constructor(e,t,n){this.target=e,this.isRightClick=n,this.startX=t.clientX,this.startY=t.clientY,this.currentX=t.clientX,this.currentY=t.clientY}update(e){this.currentX=e.clientX,this.currentY=e.clientY,!this.isDrag&&this.distance()>n.DRAG_RADIUS?(this.isDrag=!0,this.target.onDragStart(e,this.isRightClick)):this.isDrag&&this.target.onDragMove(e)}end(e){e&&this.update(e),e=e||{clientX:this.currentX,clientY:this.currentY},this.isDrag?this.target.onDragEnd(e):this.target.onClick(e,this.isRightClick)}distance(){return Math.sqrt(Math.pow(this.currentX-this.startX,2)+Math.pow(this.currentY-this.startY,2))}}function l(e,t){for(let n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===t)return e.changedTouches[n]}function c(e){return e.button>0}n.GestureState=s,n.bindGestureEvents=function(e,t){i()?function(e,t){let n;e.addEventListener("pointerup",(e=>{n&&(n.end(o(e)),e.preventDefault()),n=void 0})),e.addEventListener("pointerdown",(e=>{n&&n.end(),n=new s(t,o(e),c(e)),e.preventDefault()})),e.addEventListener("pointermove",(e=>{n&&(n.update(o(e)),e.preventDefault())})),e.addEventListener("pointerleave",(e=>{n&&(n.end(o(e)),e.preventDefault()),n=void 0}))}(e,t):r()?function(e,t){let n,i;e.addEventListener("touchend",(e=>{if(n&&i){const t=l(e,i);t&&(n.end(t),n=void 0,e.preventDefault())}})),e.addEventListener("touchstart",(e=>{n&&n.end(),i=e.changedTouches[0].identifier,n=new s(t,e.changedTouches[0],c(e))})),e.addEventListener("touchmove",(e=>{if(n&&i){const t=l(e,i);t&&(n.update(t),e.preventDefault())}})),e.addEventListener("touchcancel",(e=>{if(n&&i){const t=l(e,i);t&&(n.end(t),n=void 0,e.preventDefault())}}))}(e,t):function(e,t){let n;e.addEventListener("mouseup",(e=>{n&&n.end(o(e)),n=void 0})),e.addEventListener("mousedown",(e=>{n&&n.end(),n=new s(t,o(e),c(e))})),e.addEventListener("mousemove",(e=>{n&&n.update(o(e))})),e.addEventListener("mouseleave",(e=>{n&&n.end(o(e)),n=void 0}))}(e,t)},n.imageStateToBitmap=function(e){const t=pxt.sprite.Bitmap.fromData(e.bitmap);if(e.floating&&e.floating.bitmap){const n=pxt.sprite.Bitmap.fromData(e.floating.bitmap);n.x0=e.layerOffsetX||0,n.y0=e.layerOffsetY||0,t.apply(n,!0)}return t},n.imageStateToTilemap=function(e){const t=pxt.sprite.Tilemap.fromData(e.bitmap);if(e.floating&&e.floating.bitmap){const n=pxt.sprite.Tilemap.fromData(e.floating.bitmap);n.x0=e.layerOffsetX||0,n.y0=e.layerOffsetY||0,t.apply(n,!0)}return t},n.applyBitmapData=function(e,t,n=0,i=0){if(!e||!t)return e;const r=pxt.sprite.Bitmap.fromData(e),a=pxt.sprite.Bitmap.fromData(t);return a.x0=n,a.y0=i,r.apply(a,!0),r.data()},n.createTilemapPatchFromFloatingLayer=function(e,t){if(!e.floating)return;const n=pxt.sprite.Tilemap.fromData(e.floating.image.data()),i=new pxt.sprite.Tilemap(n.width,n.height),r=e.floating.overlayLayers?e.floating.overlayLayers.map((e=>pxt.sprite.base64EncodeBitmap(e.data()))):[];let a=[];for(let e=0;e<n.width;e++)for(let r=0;r<n.height;r++){const o=t.tiles[n.get(e,r)],s=a.indexOf(o);-1===s?(i.set(e,r,a.length),a.push(o)):i.set(e,r,s)}return{map:pxt.sprite.hexEncodeTilemap(i),layers:r,tiles:a.map((e=>pxt.sprite.base64EncodeBitmap(e.bitmap)))}}},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ImageFieldEditor=void 0;const i=e("react"),r=e("./assetEditor/assetCard"),a=e("../assets"),o=e("./ImageEditor/ImageEditor"),s=e("./ImageEditor/keyboardShortcuts"),l=e("./ImageEditor/store/imageReducer"),c=e("./FilterPanel"),u=e("../util");class d extends i.Component{constructor(e){super(e),this.tagClickHandler=e=>{let t=this.state.gallerySelectedTags;const n=e.toLowerCase(),i=t.indexOf(n);i<0?t.push(n):t.splice(i,1),this.setState({gallerySelectedTags:t})},this.clearFilterTags=()=>{this.setState({gallerySelectedTags:[]})},this.toggleFilter=()=>{this.setState({filterOpen:!this.state.filterOpen})},this.showEditor=()=>{this.setImageEditorShortcutsEnabled(!0),h("gallery-editor"),this.setState({currentView:"editor",tileGalleryVisible:!1})},this.showGallery=()=>{this.setImageEditorShortcutsEnabled(!1),h("gallery-builtin"),this.setState({currentView:"gallery",tileGalleryVisible:!1})},this.showMyAssets=()=>{this.setImageEditorShortcutsEnabled(!1),h("gallery-my-assets"),this.userAssets=a.getAssets(void 0,void 0,this.options.temporaryAssets),this.setState({currentView:"my-assets",tileGalleryVisible:!1})},this.toggleTileGallery=()=>{this.state.tileGalleryVisible?this.setState({tileGalleryVisible:!1}):this.setState({tileGalleryVisible:!0,currentView:"editor"})},this.onAssetSelected=e=>{var t,n;if(this.ref&&e.id!==(null===(t=this.asset)||void 0===t?void 0:t.id))if(this.state.editingTile)this.ref.openInTileEditor(pxt.sprite.Bitmap.fromData(e.bitmap));else if("gallery"===this.state.currentView)this.ref.openGalleryAsset(e);else{const t=pxt.react.getTilemapProject();"tilemap"===(null===(n=this.asset)||void 0===n?void 0:n.type)&&pxt.sprite.updateTilemapReferencesFromResult(t,this.asset),this.asset.meta.displayName?t.updateAsset(this.asset):e.meta.displayName||(e=Object.assign(Object.assign({},pxt.cloneAsset(e)),{id:this.asset.id,meta:this.asset.meta})),"tilemap"===e.type&&pxt.sprite.addMissingTilemapTilesAndReferences(t,e),this.ref.openAsset(e,void 0,!0)}h("gallery-selection"),this.setState({currentView:"editor",tileGalleryVisible:!1}),this.setImageEditorShortcutsEnabled(!0)},this.onTileEditorOpenClose=e=>{this.setState({editingTile:e})},this.onDoneClick=()=>{this.closeEditor&&this.closeEditor(),this.props.doneButtonCallback&&this.props.doneButtonCallback()},this.state={currentView:"editor",headerVisible:!0,filterOpen:!1,gallerySelectedTags:[],galleryFilter:""},l.setTelemetryFunction(h)}get asset(){var e;return null===(e=this.ref)||void 0===e?void 0:e.getAsset()}render(){var e,t;const{currentView:n,headerVisible:r,editingTile:a,hideMyAssets:s,filterOpen:l}=this.state,d="gallery"===this.state.currentView&&l;let h=r;const m=!this.asset||a||"tilemap"!==this.asset.type,g=!s&&!a;this.asset&&!this.galleryAssets&&m&&this.updateGalleryAssets();const y=["tile","dialog","background"];let v=[],b=[];switch(n){case"my-assets":b=this.filterAssetsByType(this.userAssets,a?"tile":null===(e=this.asset)||void 0===e?void 0:e.type),v=this.getAvailableTags(b,y);break;case"gallery":b=this.filterAssetsByType(this.galleryAssets,a?"tile":null===(t=this.asset)||void 0===t?void 0:t.type,!0,!0),v=this.getAvailableTags(b,y),b=this.filterAssetsByTag(b)}const E=[{label:lf("Editor"),view:"editor",icon:"paint brush",onClick:this.showEditor},{label:lf("Gallery"),view:"gallery",icon:"picture",onClick:this.showGallery},{label:lf("My Assets"),view:"my-assets",icon:"folder",onClick:this.showMyAssets}];return m||g?m?g||E.splice(2,1):E.splice(1,1):h=!1,i.createElement("div",{className:"image-editor-wrapper"},h&&i.createElement("div",{className:"gallery-editor-header"},i.createElement("div",{className:"image-editor-header-left"}),i.createElement("div",{className:"image-editor-header-center"},i.createElement(f,{options:E,view:n})),i.createElement("div",{className:"image-editor-header-right"},i.createElement("div",{className:"gallery-filter-button "+("gallery"===this.state.currentView?"":"hidden"),role:"button",onClick:this.toggleFilter,onKeyDown:u.fireClickOnEnter},i.createElement("div",{className:"gallery-filter-button-icon"},i.createElement("i",{className:"icon filter"})),i.createElement("div",{className:"gallery-filter-button-label"},lf("Filter"))),!a&&i.createElement("div",{className:"image-editor-close-button",role:"button",onClick:this.onDoneClick},i.createElement("i",{className:"ui icon close"})))),i.createElement("div",{className:"image-editor-gallery-window"},i.createElement("div",{className:"image-editor-gallery-content"},i.createElement(o.ImageEditor,{ref:"image-editor",singleFrame:this.props.singleFrame,onDoneClicked:this.onDoneClick,onTileEditorOpenClose:this.onTileEditorOpenClose,lightMode:this.lightMode}),i.createElement(p,{items:b,hidden:"editor"===n,onAssetSelected:this.onAssetSelected})),i.createElement("div",{className:"filter-panel-gutter "+(d?"":"hidden")},i.createElement("div",{className:"filter-panel-container"},i.createElement(c.FilterPanel,{enabledTags:this.state.gallerySelectedTags,tagClickHandler:this.tagClickHandler,clearTags:this.clearFilterTags,tagOptions:v})))))}componentDidMount(){this.ref=this.refs["image-editor"],h("image-editor-shown")}componentWillUnmount(){h("image-editor-hidden"),this.galleryAssets=void 0,this.userAssets=void 0}init(e,t,n){switch(this.closeEditor=t,this.options=n,this.lightMode=n.lightMode,e.type){case"image":this.initSingleFrame(e,n);break;case"tile":n.disableResize=!0,this.initSingleFrame(e,n);break;case"animation":this.initAnimation(e,n);break;case"tilemap":this.initTilemap(e,n)}this.editID=e.id;let i=!1;n&&(this.blocksInfo=n.blocksInfo,n.filter&&(this.setState({galleryFilter:n.filter}),i=!0),null!=n.headerVisible&&(this.setState({headerVisible:n.headerVisible}),i=!0),null!=n.hideMyAssets&&(this.setState({hideMyAssets:n.hideMyAssets}),i=!0)),i||this.forceUpdate()}getValue(){return this.ref?this.ref.getAsset():null}getJres(){if(this.ref&&this.props.singleFrame){const e=this.ref.getCurrentFrame().data();return pxt.sprite.base64EncodeBitmap(e)}return""}getPersistentData(){return this.ref?this.ref.getPersistentData():null}restorePersistentData(e){this.ref&&(this.ref.restorePersistentData(e),this.options&&this.options.disableResize&&this.ref.disableResize())}onResize(){this.ref&&this.ref.onResize()}updateGalleryAssets(){this.galleryAssets=a.getAssets(!0,this.asset.type)}getAvailableTags(e,t){let n=[];return this.galleryAssets?(e.forEach((e=>{var i;null===(i=e.meta.tags)||void 0===i||i.forEach((e=>{const i=function(e){let t=0===e.indexOf("?")&&e.length>1?e.substring(1):e;return t.toLowerCase()}(e);t.indexOf(i)<0&&n.indexOf(i)<0&&n.push(i)}))})),n):[]}filterAssetsByTag(e){return this.state.gallerySelectedTags.length>0&&this.state.filterOpen&&(e=e.filter((e=>{var t;return!!(null===(t=e.meta.tags)||void 0===t?void 0:t.find((e=>this.state.gallerySelectedTags.indexOf(e)>=0)))}))),e}filterAssetsByType(e,t,n=!1,i){var r;if(void 0===t&&(t=null===(r=this.asset)||void 0===r?void 0:r.type),void 0===t)return e;if(this.asset&&!n&&(e=e.map((e=>e.type!==this.asset.type||e.id!==this.asset.id?e:a.assetToGalleryItem(this.getValue()))),this.state.editingTile)){const t=this.ref.getAsset();e=e.map((e=>{var n;return(null===(n=t.data.editedTiles)||void 0===n?void 0:n.indexOf(e.id))>=0?a.assetToGalleryItem(t.data.tileset.tiles.find((t=>t.id===e.id))):e}))}if(i){e.forEach((e=>{var t,n;!e.meta.tags&&this.options&&(e.meta.tags=(null===(n=null===(t=this.blocksInfo.apis.byQName[e.id])||void 0===t?void 0:t.attributes.tags)||void 0===n?void 0:n.split(" "))||[])}));const t=this.state.galleryFilter.split(" ").filter((e=>!!e)).map((e=>e.toLowerCase())),n=t.filter((e=>0!==e.indexOf("!"))),i=t.filter((e=>0===e.indexOf("!")&&e.length>1)).map((e=>e.substring(1)));e=e.filter((e=>function(e,t){const n=e.meta.tags?e.meta.tags:[];return t.every((e=>{const t=`?${e}`;return n.some((n=>n===e||n===t))}))}(e,n)&&function(e,t){const n=e.meta.tags?e.meta.tags:[];return t.every((e=>!n.some((t=>t===e))))}(e,i)))}if(n)switch(t){case"animation":return e.filter((e=>"animation"===e.type||"tile"===e.type||"image"===e.type));case"image":return e.filter((e=>"tile"===e.type||"image"===e.type));case"tile":return e.filter((e=>"tile"===e.type));case"tilemap":return e.filter((e=>"tilemap"===e.type))}else switch(t){case"animation":return e.filter((e=>"animation"===e.type));case"image":return e.filter((e=>"image"===e.type));case"tile":return e.filter((e=>"tile"===e.type));case"tilemap":return e.filter((e=>"tilemap"===e.type))}}initSingleFrame(e,t){this.ref.openAsset(e),t.disableResize&&this.ref.disableResize()}initAnimation(e,t){this.ref.openAsset(e),t.disableResize&&this.ref.disableResize()}initTilemap(e,t){let n;t&&(this.blocksInfo=t.blocksInfo,n=pxt.sprite.filterItems(pxt.sprite.getGalleryItems(this.blocksInfo,"Image"),["tile"]).map((e=>({bitmap:pxt.sprite.getBitmap(this.blocksInfo,e.qName).data(),tags:e.tags,qualifiedName:e.qName,tileWidth:16})))),this.ref.openAsset(e,n)}loadJres(e){if(e)try{this.ref.setCurrentFrame(pxt.sprite.getBitmapFromJResURL(e),!0)}catch(e){return}}setImageEditorShortcutsEnabled(e){e&&this.shortcutLock?(s.releaseShortcutLock(this.shortcutLock),this.shortcutLock=void 0):e||this.shortcutLock||(this.shortcutLock=s.obtainShortcutLock())}}n.ImageFieldEditor=d;class p extends i.Component{constructor(){super(...arguments),this.clickHandler=e=>{this.props.onAssetSelected(e)}}render(){let{items:e,hidden:t}=this.props;return i.createElement("div",{className:"image-editor-gallery "+(e&&!t?"visible":"")},!t&&e&&e.map(((e,t)=>i.createElement(r.AssetCardView,{key:t,asset:e,selected:!1,onClick:this.clickHandler}))))}}class f extends i.Component{render(){const{options:e,view:t}=this.props,n=e.length>2,r=e.findIndex((e=>e.view===t)),a=e[0],o=n?e[1]:void 0,s=n?e[2]:e[1];let l;return l=n?["left","center","right"][r]:["left","right"][r]+" no-gallery",i.createElement("div",{className:`gallery-editor-toggle ${l} ${pxt.BrowserUtils.isEdge()?"edge":""}`},i.createElement("div",{className:"gallery-editor-toggle-label gallery-editor-toggle-left",onClick:a.onClick,role:"button"},a.icon&&i.createElement("i",{className:`ui icon ${a.icon}`}),i.createElement("span",null,a.label)),o&&i.createElement("div",{className:"gallery-editor-toggle-label gallery-editor-toggle-center",onClick:o.onClick,role:"button"},o.icon&&i.createElement("i",{className:`ui icon ${o.icon}`}),i.createElement("span",null,o.label)),i.createElement("div",{className:"gallery-editor-toggle-label gallery-editor-toggle-right",onClick:s.onClick,role:"button"},s.icon&&i.createElement("i",{className:`ui icon ${s.icon}`}),i.createElement("span",null,s.label)),i.createElement("div",{className:"gallery-editor-toggle-handle"}))}}function h(e){pxt.tickEvent("image.editor",{action:e})}},{"../assets":2,"../util":34,"./FilterPanel":3,"./ImageEditor/ImageEditor":10,"./ImageEditor/keyboardShortcuts":19,"./ImageEditor/store/imageReducer":21,"./assetEditor/assetCard":31,react:82}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TilemapFieldEditor=void 0;const i=e("react"),r=e("./ImageEditor/ImageEditor"),a=e("./ImageEditor/store/imageReducer");class o extends i.Component{constructor(e){super(e),this.onDoneClick=()=>{this.closeEditor&&this.closeEditor()},this.state={galleryVisible:!1},a.setTelemetryFunction(s)}render(){return i.createElement("div",{className:"image-editor-wrapper"},i.createElement("div",{className:"image-editor-gallery-content"},i.createElement(r.ImageEditor,{ref:"image-editor",singleFrame:!0,onDoneClicked:this.onDoneClick})))}componentDidMount(){this.ref=this.refs["image-editor"],s("image-editor-shown")}componentWillUnmount(){s("image-editor-hidden")}init(e,t,n){this.closeEditor=t,this.lightMode=n.lightMode,this.initTilemap(e,n)}getValue(){return this.ref?this.ref.getTilemap():null}getPersistentData(){return this.ref?this.ref.getPersistentData():null}restorePersistentData(e){this.ref&&this.ref.restorePersistentData(e)}onResize(){this.ref&&this.ref.onResize()}shouldPreventHide(){var e;return!(null===(e=this.ref)||void 0===e||!e.state.editingTile||(this.ref.closeNestedEditor(),0))}initTilemap(e,t){let n;t&&(this.blocksInfo=t.blocksInfo,n=pxt.sprite.filterItems(pxt.sprite.getGalleryItems(this.blocksInfo,"Image"),["tile"]).map((e=>({bitmap:pxt.sprite.getBitmap(this.blocksInfo,e.qName).data(),tags:e.tags,qualifiedName:e.qName,tileWidth:16})))),this.ref.openAsset(e,n)}}function s(e){pxt.tickEvent("image.editor",{action:e})}n.TilemapFieldEditor=o},{"./ImageEditor/ImageEditor":10,"./ImageEditor/store/imageReducer":21,react:82}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dispatchUpdateGalleryAssets=n.dispatchUpdateUserAssets=n.dispatchChangeGalleryView=n.dispatchChangeSelectedAsset=void 0;const i=e("./types");n.dispatchChangeSelectedAsset=(e,t)=>({type:i.CHANGE_SELECTED_ASSET,assetType:e,assetId:t});n.dispatchChangeGalleryView=(e,t,n)=>({type:i.CHANGE_GALLERY_VIEW,view:e,assetType:t,assetId:n});n.dispatchUpdateUserAssets=()=>({type:i.UPDATE_USER_ASSETS});n.dispatchUpdateGalleryAssets=()=>({type:i.UPDATE_GALLERY_ASSETS})},{"./types":30}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_GALLERY_ASSETS=n.UPDATE_USER_ASSETS=n.CHANGE_GALLERY_VIEW=n.CHANGE_SELECTED_ASSET=void 0,n.CHANGE_SELECTED_ASSET="CHANGE_SELECTED_ASSET",n.CHANGE_GALLERY_VIEW="CHANGE_GALLERY_VIEW",n.UPDATE_USER_ASSETS="UPDATE_USER_ASSETS",n.UPDATE_GALLERY_ASSETS="UPDATE_GALLERY_ASSETS"},{}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AssetCard=n.AssetCardView=void 0;const i=e("react"),r=e("react-redux"),a=e("./store/assetEditorReducerState"),o=e("./actions/dispatch"),s=e("./assetPreview");class l extends i.Component{constructor(){super(...arguments),this.clickHandler=()=>{const{type:e,id:t}=this.props.asset;this.props.dispatchChangeSelectedAsset(e,t)}}render(){const{asset:e,selected:t}=this.props;return i.createElement(c,{asset:e,selected:t,onClick:this.clickHandler})}}class c extends i.Component{constructor(){super(...arguments),this.clickHandler=()=>{this.props.onClick(this.props.asset)}}getDisplayIconForAsset(e){switch(e){case"tile":return"clone";case"animation":return"video";case"tilemap":return"map";case"image":default:return null}}render(){var e,t;const{asset:n,selected:r}=this.props,o=a.isGalleryAsset(n),l=this.getDisplayIconForAsset(n.type),c=l||!(null===(e=n.meta)||void 0===e?void 0:e.displayName);return i.createElement("div",{className:"asset-editor-card "+(r?"selected":""),onClick:this.clickHandler,role:"listitem"},i.createElement(s.AssetPreview,{asset:n}),c&&i.createElement("div",{className:"asset-editor-card-label"},l&&i.createElement("div",{className:"asset-editor-card-icon"},i.createElement("i",{className:`icon ${l}`})),!(null===(t=n.meta)||void 0===t?void 0:t.displayName)&&!o&&i.createElement("div",{className:"asset-editor-card-icon warning"},i.createElement("i",{className:"icon exclamation triangle"}))))}}n.AssetCardView=c;const u={dispatchChangeSelectedAsset:o.dispatchChangeSelectedAsset};n.AssetCard=r.connect((function(e,t){return e?{selected:e.selectedAsset&&t.asset.id==e.selectedAsset.id}:{}}),u)(l)},{"./actions/dispatch":29,"./assetPreview":32,"./store/assetEditorReducerState":33,react:82,"react-redux":74}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AssetPreview=void 0;const i=e("react");class r extends i.Component{constructor(){super(...arguments),this.onMouseEnter=()=>{this.restartAnimation()},this.onMouseLeave=()=>{this.endAnimation()},this.restartAnimation=()=>{var e;this.endAnimation();const t=this.props.asset;"animation"===t.type&&(null===(e=t.framePreviewURIs)||void 0===e?void 0:e.length)>1&&(this.currentFrame=0,this.animationIntervalRef=setInterval((()=>{this.ref&&(this.ref.src=t.framePreviewURIs[this.currentFrame]),this.currentFrame=(this.currentFrame+1)%t.framePreviewURIs.length}),Math.max(t.interval,100)))},this.handleRef=e=>{e&&(this.ref=e)}}render(){var e;const{asset:t}=this.props,n="animation"===t.type&&(null===(e=t.framePreviewURIs)||void 0===e?void 0:e.length)>1,r=t.meta.displayName||(t.meta.temporaryInfo?lf("Temporary Asset"):t.id);return i.createElement("div",{className:"asset-editor-preview",title:r},i.createElement("img",{src:t.previewURI,alt:lf("A preview of your asset (eg image, tile, animation)"),onMouseEnter:n?this.onMouseEnter:void 0,onMouseLeave:n?this.onMouseLeave:void 0,ref:n?this.handleRef:void 0,loading:"lazy"}))}componentDidUpdate(){this.animationIntervalRef&&this.restartAnimation()}componentWillUnmount(){this.endAnimation()}endAnimation(){this.animationIntervalRef&&(clearInterval(this.animationIntervalRef),this.animationIntervalRef=void 0,this.ref.src=this.props.asset.previewURI)}}n.AssetPreview=r},{react:82}],33:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.isGalleryAsset=n.GalleryView=void 0,(i=n.GalleryView||(n.GalleryView={}))[i.User=0]="User",i[i.Gallery=1]="Gallery",n.isGalleryAsset=function(e){return null==e?void 0:e.id.startsWith("sprites.")}},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fireClickOnEnter=void 0,n.fireClickOnEnter=function(e){const t="number"==typeof e.which?e.which:e.keyCode;13!==t&&32!==t||(e.preventDefault(),e.currentTarget.click())}},{}],35:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],36:[function(e,t,n){function i(){return t.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.exports.__esModule=!0,t.exports.default=t.exports,i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],37:[function(e,t,n){var i=e("./setPrototypeOf.js");t.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":41}],38:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],39:[function(e,t,n){var i=e("./typeof.js").default;function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}t.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(a,s,l):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":42}],40:[function(e,t,n){t.exports=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r},t.exports.__esModule=!0,t.exports.default=t.exports},{}],41:[function(e,t,n){function i(e,n){return t.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e,n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],42:[function(e,t,n){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],43:[function(e,t,n){"use strict";var i=e("react-is"),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return i.isMemo(e)?o:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;t.exports=function e(t,n,i){if("string"!=typeof n){if(h){var r=f(n);r&&r!==h&&e(t,r,i)}var o=u(n);d&&(o=o.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!(a[y]||i&&i[y]||m&&m[y]||s&&s[y])){var v=p(n,y);try{c(t,y,v)}catch(t){}}}}return t}},{"react-is":64}],44:[function(e,t,n){"use strict";t.exports=function(e,t,n,i,r,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},{}],45:[function(e,t,n){var i=e("./_root").Symbol;t.exports=i},{"./_root":52}],46:[function(e,t,n){var i=e("./_Symbol"),r=e("./_getRawTag"),a=e("./_objectToString"),o=i?i.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):a(e)}},{"./_Symbol":45,"./_getRawTag":49,"./_objectToString":50}],47:[function(e,t,n){(function(e){(function(){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t,n){var i=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=i},{"./_overArg":51}],49:[function(e,t,n){var i=e("./_Symbol"),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=i?i.toStringTag:void 0;t.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(e){}var r=o.call(e);return i&&(t?e[s]=n:delete e[s]),r}},{"./_Symbol":45}],50:[function(e,t,n){var i=Object.prototype.toString;t.exports=function(e){return i.call(e)}},{}],51:[function(e,t,n){t.exports=function(e,t){return function(n){return e(t(n))}}},{}],52:[function(e,t,n){var i=e("./_freeGlobal"),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();t.exports=a},{"./_freeGlobal":47}],53:[function(e,t,n){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],54:[function(e,t,n){var i=e("./_baseGetTag"),r=e("./_getPrototype"),a=e("./isObjectLike"),o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,u=l.call(Object);t.exports=function(e){if(!a(e)||"[object Object]"!=i(e))return!1;var t=r(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},{"./_baseGetTag":46,"./_getPrototype":48,"./isObjectLike":53}],55:[function(e,t,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=o(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))r.call(n,u)&&(l[u]=n[u]);if(i){s=i(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(l[s[d]]=n[s[d]])}}return l}},{}],56:[function(e,t,n){"use strict";var i=e("./lib/ReactPropTypesSecret");function r(){}function a(){}a.resetWarningCache=r,t.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},{"./lib/ReactPropTypesSecret":58}],57:[function(e,t,n){t.exports=e("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":56}],58:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],59:[function(e,t,n){"use strict";var i=e("react"),r=e("object-assign"),a=e("scheduler");function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(o(227));var s=null,l={};function c(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!d[n]){if(!t.extractEvents)throw Error(o(97,e));for(var i in d[n]=t,n=t.eventTypes){var r=void 0,a=n[i],c=t,f=i;if(p.hasOwnProperty(f))throw Error(o(99,f));p[f]=a;var h=a.phasedRegistrationNames;if(h){for(r in h)h.hasOwnProperty(r)&&u(h[r],c,f);r=!0}else a.registrationName?(u(a.registrationName,c,f),r=!0):r=!1;if(!r)throw Error(o(98,i,e))}}}}function u(e,t,n){if(f[e])throw Error(o(100,e));f[e]=t,h[e]=t.eventTypes[n].dependencies}var d=[],p={},f={},h={};function m(e,t,n,i,r,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var g=!1,y=null,v=!1,b=null,E={onError:function(e){g=!0,y=e}};function w(e,t,n,i,r,a,o,s,l){g=!1,y=null,m.apply(E,arguments)}var C=null,T=null,S=null;function k(e,t,n){var i=e.type||"unknown-event";e.currentTarget=S(n),function(e,t,n,i,r,a,s,l,c){if(w.apply(this,arguments),g){if(!g)throw Error(o(198));var u=y;g=!1,y=null,v||(v=!0,b=u)}}(i,t,void 0,e),e.currentTarget=null}function x(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function _(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var O=null;function I(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var i=0;i<t.length&&!e.isPropagationStopped();i++)k(e,t[i],n[i]);else t&&k(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function N(e){if(null!==e&&(O=x(O,e)),e=O,O=null,e){if(_(e,I),O)throw Error(o(95));if(v)throw e=b,v=!1,b=null,e}}var P={injectEventPluginOrder:function(e){if(s)throw Error(o(101));s=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!l.hasOwnProperty(t)||l[t]!==i){if(l[t])throw Error(o(102,t));l[t]=i,n=!0}}n&&c()}};function A(e,t){var n=e.stateNode;if(!n)return null;var i=C(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var D=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;D.hasOwnProperty("ReactCurrentDispatcher")||(D.ReactCurrentDispatcher={current:null}),D.hasOwnProperty("ReactCurrentBatchConfig")||(D.ReactCurrentBatchConfig={suspense:null});var R=/^(.*)[\\\/]/,M="function"==typeof Symbol&&Symbol.for,L=M?Symbol.for("react.element"):60103,F=M?Symbol.for("react.portal"):60106,j=M?Symbol.for("react.fragment"):60107,B=M?Symbol.for("react.strict_mode"):60108,G=M?Symbol.for("react.profiler"):60114,U=M?Symbol.for("react.provider"):60109,z=M?Symbol.for("react.context"):60110,H=M?Symbol.for("react.concurrent_mode"):60111,W=M?Symbol.for("react.forward_ref"):60112,Y=M?Symbol.for("react.suspense"):60113,V=M?Symbol.for("react.suspense_list"):60120,q=M?Symbol.for("react.memo"):60115,$=M?Symbol.for("react.lazy"):60116;M&&Symbol.for("react.fundamental"),M&&Symbol.for("react.responder"),M&&Symbol.for("react.scope");var K="function"==typeof Symbol&&Symbol.iterator;function X(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=K&&e[K]||e["@@iterator"])?e:null}function Z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case j:return"Fragment";case F:return"Portal";case G:return"Profiler";case B:return"StrictMode";case Y:return"Suspense";case V:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case z:return"Context.Consumer";case U:return"Context.Provider";case W:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case q:return Z(e.type);case $:if(e=1===e._status?e._result:null)return Z(e)}return null}function Q(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var i=e._debugOwner,r=e._debugSource,a=Z(e.type);n=null,i&&(n=Z(i.type)),i=a,a="",r?a=" (at "+r.fileName.replace(R,"")+":"+r.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+a}t+=n,e=e.return}while(e);return t}var J=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ee=null,te=null,ne=null;function ie(e){if(e=T(e)){if("function"!=typeof ee)throw Error(o(280));var t=C(e.stateNode);ee(e.stateNode,e.type,t)}}function re(e){te?ne?ne.push(e):ne=[e]:te=e}function ae(){if(te){var e=te,t=ne;if(ne=te=null,ie(e),t)for(e=0;e<t.length;e++)ie(t[e])}}function oe(e,t){return e(t)}function se(e,t,n,i){return e(t,n,i)}function le(){}var ce=oe,ue=!1,de=!1;function pe(){null===te&&null===ne||(le(),ae())}new Map;var fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,he=Object.prototype.hasOwnProperty,me={},ge={};function ye(e,t,n,i,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ve[e]=new ye(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ve[t]=new ye(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ve[e]=new ye(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ve[e]=new ye(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ve[e]=new ye(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ve[e]=new ye(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ve[e]=new ye(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ve[e]=new ye(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ve[e]=new ye(e,5,!1,e.toLowerCase(),null,!1)}));var be=/[\-:]([a-z])/g;function Ee(e){return e[1].toUpperCase()}function we(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ce(e,t,n,i){var r=ve.hasOwnProperty(t)?ve[t]:null;(null!==r?0===r.type:!i&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!he.call(ge,e)||!he.call(me,e)&&(fe.test(e)?ge[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}function Te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Se(e){e._valueTracker||(e._valueTracker=function(e){var t=Te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Te(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function xe(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function _e(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=we(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Oe(e,t){null!=(t=t.checked)&&Ce(e,"checked",t,!1)}function Ie(e,t){Oe(e,t);var n=we(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?Pe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pe(e,t.type,we(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ne(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Pe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ae(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function De(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+we(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(o(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(o(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:we(n)}}function Le(e,t){var n=we(t.value),i=we(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function Fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(be,Ee);ve[t]=new ye(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(be,Ee);ve[t]=new ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(be,Ee);ve[t]=new ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ve[e]=new ye(e,1,!1,e.toLowerCase(),null,!1)})),ve.xlinkHref=new ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ve[e]=new ye(e,1,!1,e.toLowerCase(),null,!0)}));var je="http://www.w3.org/1999/xhtml",Be="http://www.w3.org/2000/svg";function Ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ge(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ze,He,We=(He=function(e,t){if(e.namespaceURI!==Be||"innerHTML"in e)e.innerHTML=t;else{for((ze=ze||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ze.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return He(e,t)}))}:He);function Ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ve(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},$e={},Ke={};function Xe(e){if($e[e])return $e[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return $e[e]=n[t];return e}J&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Ze=Xe("animationend"),Qe=Xe("animationiteration"),Je=Xe("animationstart"),et=Xe("transitionend"),tt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function nt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function it(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function rt(e){if(nt(e)!==e)throw Error(o(188))}function at(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=nt(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return rt(r),e;if(a===i)return rt(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ot,st,lt,ct=!1,ut=[],dt=null,pt=null,ft=null,ht=new Map,mt=new Map,gt=[],yt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),vt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function bt(e,t,n,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i}}function Et(e,t){switch(e){case"focus":case"blur":dt=null;break;case"dragenter":case"dragleave":pt=null;break;case"mouseover":case"mouseout":ft=null;break;case"pointerover":case"pointerout":ht.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mt.delete(t.pointerId)}}function wt(e,t,n,i,r){return null===e||e.nativeEvent!==r?(e=bt(t,n,i,r),null!==t&&null!==(t=fi(t))&&st(t),e):(e.eventSystemFlags|=i,e)}function Ct(e){var t=pi(e.target);if(null!==t){var n=nt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=it(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){lt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Tt(e){if(null!==e.blockedOn)return!1;var t=An(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var n=fi(t);return null!==n&&st(n),e.blockedOn=t,!1}return!0}function St(e,t,n){Tt(e)&&n.delete(t)}function kt(){for(ct=!1;0<ut.length;){var e=ut[0];if(null!==e.blockedOn){null!==(e=fi(e.blockedOn))&&ot(e);break}var t=An(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:ut.shift()}null!==dt&&Tt(dt)&&(dt=null),null!==pt&&Tt(pt)&&(pt=null),null!==ft&&Tt(ft)&&(ft=null),ht.forEach(St),mt.forEach(St)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,ct||(ct=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kt)))}function _t(e){function t(t){return xt(t,e)}if(0<ut.length){xt(ut[0],e);for(var n=1;n<ut.length;n++){var i=ut[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==dt&&xt(dt,e),null!==pt&&xt(pt,e),null!==ft&&xt(ft,e),ht.forEach(t),mt.forEach(t),n=0;n<gt.length;n++)(i=gt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<gt.length&&null===(n=gt[0]).blockedOn;)Ct(n),null===n.blockedOn&&gt.shift()}function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function It(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Nt(e,t,n){(t=A(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=x(n._dispatchListeners,t),n._dispatchInstances=x(n._dispatchInstances,e))}function Pt(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=It(t);for(t=n.length;0<t--;)Nt(n[t],"captured",e);for(t=0;t<n.length;t++)Nt(n[t],"bubbled",e)}}function At(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=A(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=x(n._dispatchListeners,t),n._dispatchInstances=x(n._dispatchInstances,e))}function Dt(e){e&&e.dispatchConfig.registrationName&&At(e._targetInst,null,e)}function Rt(e){_(e,Pt)}function Mt(){return!0}function Lt(){return!1}function Ft(e,t,n,i){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Mt:Lt,this.isPropagationStopped=Lt,this}function jt(e,t,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,n,i),r}return new this(e,t,n,i)}function Bt(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Gt(e){e.eventPool=[],e.getPooled=jt,e.release=Bt}r(Ft.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Mt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Mt)},persist:function(){this.isPersistent=Mt},isPersistent:Lt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Lt,this._dispatchInstances=this._dispatchListeners=null}}),Ft.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ft.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var a=new t;return r(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=r({},i.Interface,e),n.extend=i.extend,Gt(n),n},Gt(Ft);var Ut=Ft.extend({animationName:null,elapsedTime:null,pseudoElement:null}),zt=Ft.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ht=Ft.extend({view:null,detail:null}),Wt=Ht.extend({relatedTarget:null});function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Vt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$t={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=$t[e])&&!!t[e]}function Xt(){return Kt}for(var Zt=Ht.extend({key:function(e){if(e.key){var t=Vt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?qt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Xt,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Qt=0,Jt=0,en=!1,tn=!1,nn=Ht.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Xt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Qt;return Qt=e.screenX,en?"mousemove"===e.type?e.screenX-t:0:(en=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Jt;return Jt=e.screenY,tn?"mousemove"===e.type?e.screenY-t:0:(tn=!0,0)}}),rn=nn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),an=nn.extend({dataTransfer:null}),on=Ht.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Xt}),sn=Ft.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ln=nn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),cn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ze,"animationEnd",2],[Qe,"animationIteration",2],[Je,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[et,"transitionEnd",2],["waiting","waiting",2]],un={},dn={},pn=0;pn<cn.length;pn++){var fn=cn[pn],hn=fn[0],mn=fn[1],gn=fn[2],yn="on"+(mn[0].toUpperCase()+mn.slice(1)),vn={phasedRegistrationNames:{bubbled:yn,captured:yn+"Capture"},dependencies:[hn],eventPriority:gn};un[mn]=vn,dn[hn]=vn}var bn={eventTypes:un,getEventPriority:function(e){return void 0!==(e=dn[e])?e.eventPriority:2},extractEvents:function(e,t,n,i){var r=dn[e];if(!r)return null;switch(e){case"keypress":if(0===Yt(n))return null;case"keydown":case"keyup":e=Zt;break;case"blur":case"focus":e=Wt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=on;break;case Ze:case Qe:case Je:e=Ut;break;case et:e=sn;break;case"scroll":e=Ht;break;case"wheel":e=ln;break;case"copy":case"cut":case"paste":e=zt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=rn;break;default:e=Ft}return Rt(t=e.getPooled(r,t,n,i)),t}},En=a.unstable_UserBlockingPriority,wn=a.unstable_runWithPriority,Cn=bn.getEventPriority,Tn=[];function Sn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=pi(i)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var r=Ot(e.nativeEvent);i=e.topLevelType;for(var a=e.nativeEvent,o=e.eventSystemFlags,s=null,l=0;l<d.length;l++){var c=d[l];c&&(c=c.extractEvents(i,t,a,r,o))&&(s=x(s,c))}N(s)}}var kn=!0;function xn(e,t){_n(t,e,!1)}function _n(e,t,n){switch(Cn(t)){case 0:var i=On.bind(null,t,1);break;case 1:i=In.bind(null,t,1);break;default:i=Pn.bind(null,t,1)}n?e.addEventListener(t,i,!0):e.addEventListener(t,i,!1)}function On(e,t,n){ue||le();var i=Pn,r=ue;ue=!0;try{se(i,e,t,n)}finally{(ue=r)||pe()}}function In(e,t,n){wn(En,Pn.bind(null,e,t,n))}function Nn(e,t,n,i){if(Tn.length){var r=Tn.pop();r.topLevelType=e,r.eventSystemFlags=t,r.nativeEvent=n,r.targetInst=i,e=r}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:i,ancestors:[]};try{if(t=Sn,n=e,de)t(n,void 0);else{de=!0;try{ce(t,n,void 0)}finally{de=!1,pe()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Tn.length<10&&Tn.push(e)}}function Pn(e,t,n){if(kn)if(0<ut.length&&-1<yt.indexOf(e))e=bt(null,e,t,n),ut.push(e);else{var i=An(e,t,n);null===i?Et(e,n):-1<yt.indexOf(e)?(e=bt(i,e,t,n),ut.push(e)):function(e,t,n,i){switch(t){case"focus":return dt=wt(dt,e,t,n,i),!0;case"dragenter":return pt=wt(pt,e,t,n,i),!0;case"mouseover":return ft=wt(ft,e,t,n,i),!0;case"pointerover":var r=i.pointerId;return ht.set(r,wt(ht.get(r)||null,e,t,n,i)),!0;case"gotpointercapture":return r=i.pointerId,mt.set(r,wt(mt.get(r)||null,e,t,n,i)),!0}return!1}(i,e,t,n)||(Et(e,n),Nn(e,t,n,null))}}function An(e,t,n){var i=Ot(n);if(null!==(i=pi(i))){var r=nt(i);if(null===r)i=null;else{var a=r.tag;if(13===a){if(null!==(i=it(r)))return i;i=null}else if(3===a){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Nn(e,t,n,i),null}function Dn(e){if(!J)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Rn=new("function"==typeof WeakMap?WeakMap:Map);function Mn(e){var t=Rn.get(e);return void 0===t&&(t=new Set,Rn.set(e,t)),t}function Ln(e,t,n){if(!n.has(e)){switch(e){case"scroll":_n(t,"scroll",!0);break;case"focus":case"blur":_n(t,"focus",!0),_n(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Dn(e)&&_n(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===tt.indexOf(e)&&xn(e,t)}n.add(e)}}var Fn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jn=["Webkit","ms","Moz","O"];function Bn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Fn.hasOwnProperty(e)&&Fn[e]?(""+t).trim():t+"px"}function Gn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=Bn(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(Fn).forEach((function(e){jn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fn[t]=Fn[e]}))}));var Un=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zn(e,t){if(t){if(Un[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62,""))}}function Hn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Wn(e,t){var n=Mn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=h[t];for(var i=0;i<t.length;i++)Ln(t[i],e,n)}function Yn(){}function Vn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,i=qn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=qn(i)}}function Kn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Kn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Xn(){for(var e=window,t=Vn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Vn((e=t.contentWindow).document)}return t}function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Qn="$?",Jn="$!",ei=null,ti=null;function ni(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ii(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ai="function"==typeof clearTimeout?clearTimeout:void 0;function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function si(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===Jn||n===Qn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var li=Math.random().toString(36).slice(2),ci="__reactInternalInstance$"+li,ui="__reactEventHandlers$"+li,di="__reactContainere$"+li;function pi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[di]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=si(e);null!==e;){if(n=e[ci])return n;e=si(e)}return t}n=(e=n).parentNode}return null}function fi(e){return!(e=e[ci]||e[di])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function hi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function mi(e){return e[ui]||null}var gi=null,yi=null,vi=null;function bi(){if(vi)return vi;var e,t,n=yi,i=n.length,r="value"in gi?gi.value:gi.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return vi=r.slice(e,1<t?1-t:void 0)}var Ei=Ft.extend({data:null}),wi=Ft.extend({data:null}),Ci=[9,13,27,32],Ti=J&&"CompositionEvent"in window,Si=null;J&&"documentMode"in document&&(Si=document.documentMode);var ki=J&&"TextEvent"in window&&!Si,xi=J&&(!Ti||Si&&8<Si&&11>=Si),_i=String.fromCharCode(32),Oi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ii=!1;function Ni(e,t){switch(e){case"keyup":return-1!==Ci.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Pi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ai=!1;var Di={eventTypes:Oi,extractEvents:function(e,t,n,i){var r;if(Ti)e:{switch(e){case"compositionstart":var a=Oi.compositionStart;break e;case"compositionend":a=Oi.compositionEnd;break e;case"compositionupdate":a=Oi.compositionUpdate;break e}a=void 0}else Ai?Ni(e,n)&&(a=Oi.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=Oi.compositionStart);return a?(xi&&"ko"!==n.locale&&(Ai||a!==Oi.compositionStart?a===Oi.compositionEnd&&Ai&&(r=bi()):(yi="value"in(gi=i)?gi.value:gi.textContent,Ai=!0)),a=Ei.getPooled(a,t,n,i),(r||null!==(r=Pi(n)))&&(a.data=r),Rt(a),r=a):r=null,(e=ki?function(e,t){switch(e){case"compositionend":return Pi(t);case"keypress":return 32!==t.which?null:(Ii=!0,_i);case"textInput":return(e=t.data)===_i&&Ii?null:e;default:return null}}(e,n):function(e,t){if(Ai)return"compositionend"===e||!Ti&&Ni(e,t)?(e=bi(),vi=yi=gi=null,Ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xi&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=wi.getPooled(Oi.beforeInput,t,n,i)).data=e,Rt(t)):t=null,null===r?t:null===t?r:[r,t]}},Ri={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ri[e.type]:"textarea"===t}var Li={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Fi(e,t,n){return(e=Ft.getPooled(Li.change,e,t,n)).type="change",re(n),Rt(e),e}var ji=null,Bi=null;function Gi(e){N(e)}function Ui(e){if(ke(hi(e)))return e}function zi(e,t){if("change"===e)return t}var Hi=!1;function Wi(){ji&&(ji.detachEvent("onpropertychange",Yi),Bi=ji=null)}function Yi(e){if("value"===e.propertyName&&Ui(Bi))if(e=Fi(Bi,e,Ot(e)),ue)N(e);else{ue=!0;try{oe(Gi,e)}finally{ue=!1,pe()}}}function Vi(e,t,n){"focus"===e?(Wi(),Bi=n,(ji=t).attachEvent("onpropertychange",Yi)):"blur"===e&&Wi()}function qi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ui(Bi)}function $i(e,t){if("click"===e)return Ui(t)}function Ki(e,t){if("input"===e||"change"===e)return Ui(t)}J&&(Hi=Dn("input")&&(!document.documentMode||9<document.documentMode));var Xi,Zi={eventTypes:Li,_isInputEventSupported:Hi,extractEvents:function(e,t,n,i){var r=t?hi(t):window,a=r.nodeName&&r.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===r.type)var o=zi;else if(Mi(r))if(Hi)o=Ki;else{o=qi;var s=Vi}else(a=r.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=$i);if(o&&(o=o(e,t)))return Fi(o,n,i);s&&s(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&Pe(r,"number",r.value)}},Qi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ji={eventTypes:Qi,extractEvents:function(e,t,n,i,r){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0==(32&r)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;if(r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window,o?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?pi(t):null)&&(t!==(a=nt(t))||5!==t.tag&&6!==t.tag)&&(t=null)):o=null,o===t)return null;if("mouseout"===e||"mouseover"===e)var s=nn,l=Qi.mouseLeave,c=Qi.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=rn,l=Qi.pointerLeave,c=Qi.pointerEnter,u="pointer");if(e=null==o?r:hi(o),r=null==t?r:hi(t),(l=s.getPooled(l,o,n,i)).type=u+"leave",l.target=e,l.relatedTarget=r,(i=s.getPooled(c,t,n,i)).type=u+"enter",i.target=r,i.relatedTarget=e,u=t,(s=o)&&u)e:{for(e=u,o=0,t=c=s;t;t=It(t))o++;for(t=0,r=e;r;r=It(r))t++;for(;0<o-t;)c=It(c),o--;for(;0<t-o;)e=It(e),t--;for(;o--;){if(c===e||c===e.alternate)break e;c=It(c),e=It(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(o=s.alternate)||o!==e);)c.push(s),s=It(s);for(s=[];u&&u!==e&&(null===(o=u.alternate)||o!==e);)s.push(u),u=It(u);for(u=0;u<c.length;u++)At(c[u],"bubbled",l);for(u=s.length;0<u--;)At(s[u],"captured",i);return n===Xi?(Xi=null,[l]):(Xi=n,[l,i])}};var er="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},tr=Object.prototype.hasOwnProperty;function nr(e,t){if(er(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!tr.call(t,n[i])||!er(e[n[i]],t[n[i]]))return!1;return!0}var ir=J&&"documentMode"in document&&11>=document.documentMode,rr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ar=null,or=null,sr=null,lr=!1;function cr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return lr||null==ar||ar!==Vn(n)?null:(n="selectionStart"in(n=ar)&&Zn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},sr&&nr(sr,n)?null:(sr=n,(e=Ft.getPooled(rr.select,or,e,t)).type="select",e.target=ar,Rt(e),e))}var ur={eventTypes:rr,extractEvents:function(e,t,n,i){var r,a=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!a)){e:{a=Mn(a),r=h.onSelect;for(var o=0;o<r.length;o++)if(!a.has(r[o])){a=!1;break e}a=!0}r=!a}if(r)return null;switch(a=t?hi(t):window,e){case"focus":(Mi(a)||"true"===a.contentEditable)&&(ar=a,or=t,sr=null);break;case"blur":sr=or=ar=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":return lr=!1,cr(n,i);case"selectionchange":if(ir)break;case"keydown":case"keyup":return cr(n,i)}return null}};P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),C=mi,T=fi,S=hi,P.injectEventPluginsByName({SimpleEventPlugin:bn,EnterLeaveEventPlugin:Ji,ChangeEventPlugin:Zi,SelectEventPlugin:ur,BeforeInputEventPlugin:Di}),new Set;var dr=[],pr=-1;function fr(e){0>pr||(e.current=dr[pr],dr[pr]=null,pr--)}function hr(e,t){dr[++pr]=e.current,e.current=t}var mr={},gr={current:mr},yr={current:!1},vr=mr;function br(e,t){var n=e.type.contextTypes;if(!n)return mr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Er(e){return null!=e.childContextTypes}function wr(e){fr(yr),fr(gr)}function Cr(e){fr(yr),fr(gr)}function Tr(e,t,n){if(gr.current!==mr)throw Error(o(168));hr(gr,t),hr(yr,n)}function Sr(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in e))throw Error(o(108,Z(t)||"Unknown",a));return r({},n,{},i)}function kr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||mr,vr=gr.current,hr(gr,t),hr(yr,yr.current),!0}function xr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(t=Sr(e,t,vr),i.__reactInternalMemoizedMergedChildContext=t,fr(yr),fr(gr),hr(gr,t)):fr(yr),hr(yr,n)}var _r=a.unstable_runWithPriority,Or=a.unstable_scheduleCallback,Ir=a.unstable_cancelCallback,Nr=a.unstable_shouldYield,Pr=a.unstable_requestPaint,Ar=a.unstable_now,Dr=a.unstable_getCurrentPriorityLevel,Rr=a.unstable_ImmediatePriority,Mr=a.unstable_UserBlockingPriority,Lr=a.unstable_NormalPriority,Fr=a.unstable_LowPriority,jr=a.unstable_IdlePriority,Br={},Gr=void 0!==Pr?Pr:function(){},Ur=null,zr=null,Hr=!1,Wr=Ar(),Yr=1e4>Wr?Ar:function(){return Ar()-Wr};function Vr(){switch(Dr()){case Rr:return 99;case Mr:return 98;case Lr:return 97;case Fr:return 96;case jr:return 95;default:throw Error(o(332))}}function qr(e){switch(e){case 99:return Rr;case 98:return Mr;case 97:return Lr;case 96:return Fr;case 95:return jr;default:throw Error(o(332))}}function $r(e,t){return e=qr(e),_r(e,t)}function Kr(e,t,n){return e=qr(e),Or(e,t,n)}function Xr(e){return null===Ur?(Ur=[e],zr=Or(Rr,Qr)):Ur.push(e),Br}function Zr(){if(null!==zr){var e=zr;zr=null,Ir(e)}Qr()}function Qr(){if(!Hr&&null!==Ur){Hr=!0;var e=0;try{var t=Ur;$r(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ur=null}catch(t){throw null!==Ur&&(Ur=Ur.slice(e+1)),Or(Rr,Zr),t}finally{Hr=!1}}}var Jr=3;function ea(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function ta(e,t){if(e&&e.defaultProps)for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var na={current:null},ia=null,ra=null,aa=null;function oa(){aa=ra=ia=null}function sa(e,t){var n=e.type._context;hr(na,n._currentValue),n._currentValue=t}function la(e){var t=na.current;fr(na),e.type._context._currentValue=t}function ca(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ua(e,t){ia=e,aa=ra=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Yo=!0),e.firstContext=null)}function da(e,t){if(aa!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(aa=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ra){if(null===ia)throw Error(o(308));ra=t,ia.dependencies={expirationTime:0,firstContext:t,responders:null}}else ra=ra.next=t;return e._currentValue}var pa=!1;function fa(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ha(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ma(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function ga(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function ya(e,t){var n=e.alternate;if(null===n){var i=e.updateQueue,r=null;null===i&&(i=e.updateQueue=fa(e.memoizedState))}else i=e.updateQueue,r=n.updateQueue,null===i?null===r?(i=e.updateQueue=fa(e.memoizedState),r=n.updateQueue=fa(n.memoizedState)):i=e.updateQueue=ha(r):null===r&&(r=n.updateQueue=ha(i));null===r||i===r?ga(i,t):null===i.lastUpdate||null===r.lastUpdate?(ga(i,t),ga(r,t)):(ga(i,t),r.lastUpdate=t)}function va(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=fa(e.memoizedState):ba(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ba(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=ha(t)),t}function Ea(e,t,n,i,a,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,i,a):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null==(a="function"==typeof(e=n.payload)?e.call(o,i,a):e))break;return r({},i,a);case 2:pa=!0}return i}function wa(e,t,n,i,r){pa=!1;for(var a=(t=ba(e,t)).baseState,o=null,s=0,l=t.firstUpdate,c=a;null!==l;){var u=l.expirationTime;u<r?(null===o&&(o=l,a=c),s<u&&(s=u)):(yl(u,l.suspenseConfig),c=Ea(e,0,l,c,n,i),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var d=l.expirationTime;d<r?(null===u&&(u=l,null===o&&(a=c)),s<d&&(s=d)):(c=Ea(e,0,l,c,n,i),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===o&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===u&&(a=c),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=u,vl(s),e.expirationTime=s,e.memoizedState=c}function Ca(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Ta(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Ta(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Ta(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var i=t;if("function"!=typeof n)throw Error(o(191,n));n.call(i)}e=e.nextEffect}}var Sa=D.ReactCurrentBatchConfig,ka=(new i.Component).refs;function xa(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:r({},t,n),e.memoizedState=n,null!==(i=e.updateQueue)&&0===e.expirationTime&&(i.baseState=n)}var _a={isMounted:function(e){return!!(e=e._reactInternalFiber)&&nt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=rl(),r=Sa.suspense;(r=ma(i=al(i,e,r),r)).payload=t,null!=n&&(r.callback=n),ya(e,r),ol(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=rl(),r=Sa.suspense;(r=ma(i=al(i,e,r),r)).tag=1,r.payload=t,null!=n&&(r.callback=n),ya(e,r),ol(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=rl(),i=Sa.suspense;(i=ma(n=al(n,e,i),i)).tag=2,null!=t&&(i.callback=t),ya(e,i),ol(e,n)}};function Oa(e,t,n,i,r,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&nr(n,i)&&nr(r,a))}function Ia(e,t,n){var i=!1,r=mr,a=t.contextType;return"object"==typeof a&&null!==a?a=da(a):(r=Er(t)?vr:gr.current,a=(i=null!=(i=t.contextTypes))?br(e,r):mr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_a,e.stateNode=t,t._reactInternalFiber=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Na(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&_a.enqueueReplaceState(t,t.state,null)}function Pa(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=ka;var a=t.contextType;"object"==typeof a&&null!==a?r.context=da(a):(a=Er(t)?vr:gr.current,r.context=br(e,a)),null!==(a=e.updateQueue)&&(wa(e,a,n,r,i),r.state=e.memoizedState),"function"==typeof(a=t.getDerivedStateFromProps)&&(xa(e,t,a,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&_a.enqueueReplaceState(r,r.state,null),null!==(a=e.updateQueue)&&(wa(e,a,n,r,i),r.state=e.memoizedState)),"function"==typeof r.componentDidMount&&(e.effectTag|=4)}var Aa=Array.isArray;function Da(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=i.refs;t===ka&&(t=i.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ra(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ma(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t,n){return(e=jl(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.effectTag=2,n):i:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Ul(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=Da(e,t,n),i.return=e,i):((i=Bl(n.type,n.key,n.props,null,e.mode,i)).ref=Da(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=Gl(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case L:return(n=Bl(t.type,t.key,t.props,null,e.mode,n)).ref=Da(e,null,t),n.return=e,n;case F:return(t=zl(t,e.mode,n)).return=e,t}if(Aa(t)||X(t))return(t=Gl(t,e.mode,n,null)).return=e,t;Ra(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case L:return n.key===r?n.type===j?d(e,t,n.props.children,i,r):c(e,t,n,i):null;case F:return n.key===r?u(e,t,n,i):null}if(Aa(n)||X(n))return null!==r?null:d(e,t,n,i,null);Ra(e,n)}return null}function h(e,t,n,i,r){if("string"==typeof i||"number"==typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case L:return e=e.get(null===i.key?n:i.key)||null,i.type===j?d(t,e,i.props.children,r,i.key):c(t,e,i,r);case F:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(Aa(i)||X(i))return d(t,e=e.get(n)||null,i,r,null);Ra(t,i)}return null}function m(r,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(r,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(r,d),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(r,d),c;if(null===d){for(;m<s.length;m++)null!==(d=p(r,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return c}for(d=i(r,d);m<s.length;m++)null!==(g=h(d,r,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),c}function g(r,s,l,c){var u=X(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(r,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(r,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(r,m),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=p(r,v.value,c))&&(s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return u}for(m=i(r,m);!v.done;g++,v=l.next())null!==(v=h(m,r,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(r,e)})),u}return function(e,i,a,l){var c="object"==typeof a&&null!==a&&a.type===j&&null===a.key;c&&(a=a.props.children);var u="object"==typeof a&&null!==a;if(u)switch(a.$$typeof){case L:e:{for(u=a.key,c=i;null!==c;){if(c.key===u){if(7===c.tag?a.type===j:c.elementType===a.type){n(e,c.sibling),(i=r(c,a.type===j?a.props.children:a.props)).ref=Da(e,c,a),i.return=e,e=i;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===j?((i=Gl(a.props.children,e.mode,l,a.key)).return=e,e=i):((l=Bl(a.type,a.key,a.props,null,e.mode,l)).ref=Da(e,i,a),l.return=e,e=l)}return s(e);case F:e:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),(i=r(i,a.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=zl(a,e.mode,l)).return=e,e=i}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,a)).return=e,e=i):(n(e,i),(i=Ul(a,e.mode,l)).return=e,e=i),s(e);if(Aa(a))return m(e,i,a,l);if(X(a))return g(e,i,a,l);if(u&&Ra(e,a),void 0===a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,i)}}var La=Ma(!0),Fa=Ma(!1),ja={},Ba={current:ja},Ga={current:ja},Ua={current:ja};function za(e){if(e===ja)throw Error(o(174));return e}function Ha(e,t){hr(Ua,t),hr(Ga,e),hr(Ba,ja);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ue(null,"");break;default:t=Ue(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}fr(Ba),hr(Ba,t)}function Wa(e){fr(Ba),fr(Ga),fr(Ua)}function Ya(e){za(Ua.current);var t=za(Ba.current),n=Ue(t,e.type);t!==n&&(hr(Ga,e),hr(Ba,n))}function Va(e){Ga.current===e&&(fr(Ba),fr(Ga))}var qa={current:0};function $a(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===Qn||n.data===Jn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ka(e,t){return{responder:e,props:t}}var Xa=D.ReactCurrentDispatcher,Za=D.ReactCurrentBatchConfig,Qa=0,Ja=null,eo=null,to=null,no=null,io=null,ro=null,ao=0,oo=null,so=0,lo=!1,co=null,uo=0;function po(){throw Error(o(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!er(e[n],t[n]))return!1;return!0}function ho(e,t,n,i,r,a){if(Qa=a,Ja=t,to=null!==e?e.memoizedState:null,Xa.current=null===to?Do:Ro,t=n(i,r),lo){do{lo=!1,uo+=1,to=null!==e?e.memoizedState:null,ro=no,oo=io=eo=null,Xa.current=Ro,t=n(i,r)}while(lo);co=null,uo=0}if(Xa.current=Ao,(e=Ja).memoizedState=no,e.expirationTime=ao,e.updateQueue=oo,e.effectTag|=so,e=null!==eo&&null!==eo.next,Qa=0,ro=io=no=to=eo=Ja=null,ao=0,oo=null,so=0,e)throw Error(o(300));return t}function mo(){Xa.current=Ao,Qa=0,ro=io=no=to=eo=Ja=null,ao=0,oo=null,so=0,lo=!1,co=null,uo=0}function go(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===io?no=io=e:io=io.next=e,io}function yo(){if(null!==ro)ro=(io=ro).next,to=null!==(eo=to)?eo.next:null;else{if(null===to)throw Error(o(310));var e={memoizedState:(eo=to).memoizedState,baseState:eo.baseState,queue:eo.queue,baseUpdate:eo.baseUpdate,next:null};io=null===io?no=e:io.next=e,to=eo.next}return io}function vo(e,t){return"function"==typeof t?t(e):t}function bo(e){var t=yo(),n=t.queue;if(null===n)throw Error(o(311));if(n.lastRenderedReducer=e,0<uo){var i=n.dispatch;if(null!==co){var r=co.get(n);if(void 0!==r){co.delete(n);var a=t.memoizedState;do{a=e(a,r.action),r=r.next}while(null!==r);return er(a,t.memoizedState)||(Yo=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,i]}}return[t.memoizedState,i]}i=n.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==i&&(i.next=null),i=s.next):i=null!==i?i.next:null,null!==i){var l=r=null,c=i,u=!1;do{var d=c.expirationTime;d<Qa?(u||(u=!0,l=s,r=a),d>ao&&vl(ao=d)):(yl(d,c.suspenseConfig),a=c.eagerReducer===e?c.eagerState:e(a,c.action)),s=c,c=c.next}while(null!==c&&c!==i);u||(l=s,r=a),er(a,t.memoizedState)||(Yo=!0),t.memoizedState=a,t.baseUpdate=l,t.baseState=r,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function Eo(e){var t=go();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:vo,lastRenderedState:e}).dispatch=Po.bind(null,Ja,e),[t.memoizedState,e]}function wo(e){return bo(vo)}function Co(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===oo?(oo={lastEffect:null}).lastEffect=e.next=e:null===(t=oo.lastEffect)?oo.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,oo.lastEffect=e),e}function To(e,t,n,i){var r=go();so|=e,r.memoizedState=Co(t,n,void 0,void 0===i?null:i)}function So(e,t,n,i){var r=yo();i=void 0===i?null:i;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==i&&fo(i,o.deps))return void Co(0,n,a,i)}so|=e,r.memoizedState=Co(t,n,a,i)}function ko(e,t){return To(516,192,e,t)}function xo(e,t){return So(516,192,e,t)}function _o(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oo(){}function Io(e,t){return go().memoizedState=[e,void 0===t?null:t],e}function No(e,t){var n=yo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Po(e,t,n){if(!(25>uo))throw Error(o(301));var i=e.alternate;if(e===Ja||null!==i&&i===Ja)if(lo=!0,e={expirationTime:Qa,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===co&&(co=new Map),void 0===(n=co.get(t)))co.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var r=rl(),a=Sa.suspense;a={expirationTime:r=al(r,e,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)a.next=a;else{var l=s.next;null!==l&&(a.next=l),s.next=a}if(t.last=a,0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var c=t.lastRenderedState,u=i(c,n);if(a.eagerReducer=i,a.eagerState=u,er(u,c))return}catch(e){}ol(e,r)}}var Ao={readContext:da,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useResponder:po,useDeferredValue:po,useTransition:po},Do={readContext:da,useCallback:Io,useContext:da,useEffect:ko,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,To(4,36,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4,36,e,t)},useMemo:function(e,t){var n=go();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=go();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,Ja,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},go().memoizedState=e},useState:Eo,useDebugValue:Oo,useResponder:Ka,useDeferredValue:function(e,t){var n=Eo(e),i=n[0],r=n[1];return ko((function(){a.unstable_next((function(){var n=Za.suspense;Za.suspense=void 0===t?null:t;try{r(e)}finally{Za.suspense=n}}))}),[e,t]),i},useTransition:function(e){var t=Eo(!1),n=t[0],i=t[1];return[Io((function(t){i(!0),a.unstable_next((function(){var n=Za.suspense;Za.suspense=void 0===e?null:e;try{i(!1),t()}finally{Za.suspense=n}}))}),[e,n]),n]}},Ro={readContext:da,useCallback:No,useContext:da,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,So(4,36,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return So(4,36,e,t)},useMemo:function(e,t){var n=yo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:bo,useRef:function(){return yo().memoizedState},useState:wo,useDebugValue:Oo,useResponder:Ka,useDeferredValue:function(e,t){var n=wo(),i=n[0],r=n[1];return xo((function(){a.unstable_next((function(){var n=Za.suspense;Za.suspense=void 0===t?null:t;try{r(e)}finally{Za.suspense=n}}))}),[e,t]),i},useTransition:function(e){var t=wo(),n=t[0],i=t[1];return[No((function(t){i(!0),a.unstable_next((function(){var n=Za.suspense;Za.suspense=void 0===e?null:e;try{i(!1),t()}finally{Za.suspense=n}}))}),[e,n]),n]}},Mo=null,Lo=null,Fo=!1;function jo(e,t){var n=Ll(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Go(e){if(Fo){var t=Lo;if(t){var n=t;if(!Bo(e,t)){if(!(t=oi(n.nextSibling))||!Bo(e,t))return e.effectTag=-1025&e.effectTag|2,Fo=!1,void(Mo=e);jo(Mo,n)}Mo=e,Lo=oi(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Fo=!1,Mo=e}}function Uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Mo=e}function zo(e){if(e!==Mo)return!1;if(!Fo)return Uo(e),Fo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ii(t,e.memoizedProps))for(t=Lo;t;)jo(e,t),t=oi(t.nextSibling);if(Uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Lo=oi(e.nextSibling);break e}t--}else"$"!==n&&n!==Jn&&n!==Qn||t++}e=e.nextSibling}Lo=null}}else Lo=Mo?oi(e.stateNode.nextSibling):null;return!0}function Ho(){Lo=Mo=null,Fo=!1}var Wo=D.ReactCurrentOwner,Yo=!1;function Vo(e,t,n,i){t.child=null===e?Fa(t,null,n,i):La(t,e.child,n,i)}function qo(e,t,n,i,r){n=n.render;var a=t.ref;return ua(t,r),i=ho(e,t,n,i,a,r),null===e||Yo?(t.effectTag|=1,Vo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),cs(e,t,r))}function $o(e,t,n,i,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Fl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bl(n.type,null,i,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ko(e,t,o,i,r,a))}return o=e.child,r<a&&(r=o.memoizedProps,(n=null!==(n=n.compare)?n:nr)(r,i)&&e.ref===t.ref)?cs(e,t,a):(t.effectTag|=1,(e=jl(o,i)).ref=t.ref,e.return=t,t.child=e)}function Ko(e,t,n,i,r,a){return null!==e&&nr(e.memoizedProps,i)&&e.ref===t.ref&&(Yo=!1,r<a)?cs(e,t,a):Zo(e,t,n,i,a)}function Xo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Zo(e,t,n,i,r){var a=Er(n)?vr:gr.current;return a=br(t,a),ua(t,r),n=ho(e,t,n,i,a,r),null===e||Yo?(t.effectTag|=1,Vo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),cs(e,t,r))}function Qo(e,t,n,i,r){if(Er(n)){var a=!0;kr(t)}else a=!1;if(ua(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ia(t,n,i),Pa(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?da(c):br(t,c=Er(n)?vr:gr.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||l!==c)&&Na(t,o,i,c),pa=!1;var p=t.memoizedState;l=o.state=p;var f=t.updateQueue;null!==f&&(wa(t,f,i,o,r),l=t.memoizedState),s!==i||p!==l||yr.current||pa?("function"==typeof u&&(xa(t,n,u,i),l=t.memoizedState),(s=pa||Oa(t,n,s,i,p,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),i=!1)}else o=t.stateNode,s=t.memoizedProps,o.props=t.type===t.elementType?s:ta(t.type,s),l=o.context,c="object"==typeof(c=n.contextType)&&null!==c?da(c):br(t,c=Er(n)?vr:gr.current),(d="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||l!==c)&&Na(t,o,i,c),pa=!1,l=t.memoizedState,p=o.state=l,null!==(f=t.updateQueue)&&(wa(t,f,i,o,r),p=t.memoizedState),s!==i||l!==p||yr.current||pa?("function"==typeof u&&(xa(t,n,u,i),p=t.memoizedState),(u=pa||Oa(t,n,s,i,l,p,c))?(d||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,c)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=c,i=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),i=!1);return Jo(e,t,n,i,a,r)}function Jo(e,t,n,i,r,a){Xo(e,t);var o=0!=(64&t.effectTag);if(!i&&!o)return r&&xr(t,n,!1),cs(e,t,a);i=t.stateNode,Wo.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.effectTag|=1,null!==e&&o?(t.child=La(t,e.child,null,a),t.child=La(t,null,s,a)):Vo(e,t,s,a),t.memoizedState=i.state,r&&xr(t,n,!0),t.child}function es(e){var t=e.stateNode;t.pendingContext?Tr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Tr(0,t.context,!1),Ha(e,t.containerInfo)}var ts,ns,is,rs={dehydrated:null,retryTime:0};function as(e,t,n){var i,r=t.mode,a=t.pendingProps,o=qa.current,s=!1;if((i=0!=(64&t.effectTag))||(i=0!=(2&o)&&(null===e||null!==e.memoizedState)),i?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),hr(qa,1&o),null===e){if(void 0!==a.fallback&&Go(t),s){if(s=a.fallback,(a=Gl(null,r,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Gl(s,r,n,null)).return=t,a.sibling=n,t.memoizedState=rs,t.child=a,n}return r=a.children,t.memoizedState=null,t.child=Fa(t,null,r,n)}if(null!==e.memoizedState){if(r=(e=e.child).sibling,s){if(a=a.fallback,(n=jl(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(r=jl(r,a,r.expirationTime)).return=t,n.sibling=r,n.childExpirationTime=0,t.memoizedState=rs,t.child=n,r}return n=La(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=a.fallback,(a=Gl(null,r,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Gl(s,r,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=rs,t.child=a,n}return t.memoizedState=null,t.child=La(t,e,a.children,n)}function os(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ca(e.return,t)}function ss(e,t,n,i,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,last:i,tail:n,tailExpiration:0,tailMode:r,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.last=i,o.tail=n,o.tailExpiration=0,o.tailMode=r,o.lastEffect=a)}function ls(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Vo(e,t,i.children,n),0!=(2&(i=qa.current)))i=1&i|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&os(e,n);else if(19===e.tag)os(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(hr(qa,i),0==(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===$a(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ss(t,!1,r,n,a,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===$a(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ss(t,!0,n,null,a,t.lastEffect);break;case"together":ss(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function cs(e,t,n){null!==e&&(t.dependencies=e.dependencies);var i=t.expirationTime;if(0!==i&&vl(i),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=jl(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jl(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function us(e){e.effectTag|=4}function ds(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ps(e){switch(e.tag){case 1:Er(e.type)&&wr();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Wa(),Cr(),0!=(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Va(e),null;case 13:return fr(qa),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return fr(qa),null;case 4:return Wa(),null;case 10:return la(e),null;default:return null}}function fs(e,t){return{value:e,source:t,stack:Q(t)}}ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ns=function(e,t,n,i,a){var o=e.memoizedProps;if(o!==i){var s,l,c=t.stateNode;switch(za(Ba.current),e=null,n){case"input":o=xe(c,o),i=xe(c,i),e=[];break;case"option":o=Ae(c,o),i=Ae(c,i),e=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),e=[];break;case"textarea":o=Re(c,o),i=Re(c,i),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(c.onclick=Yn)}for(s in zn(n,i),n=null,o)if(!i.hasOwnProperty(s)&&o.hasOwnProperty(s)&&null!=o[s])if("style"===s)for(l in c=o[s])c.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(f.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in i){var u=i[s];if(c=null!=o?o[s]:void 0,i.hasOwnProperty(s)&&u!==c&&(null!=u||null!=c))if("style"===s)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(e||(e=[]),e.push(s,n)),n=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(s,""+u)):"children"===s?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(f.hasOwnProperty(s)?(null!=u&&Wn(a,s),e||c===u||(e=[])):(e=e||[]).push(s,u))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&us(t)}},is=function(e,t,n,i){n!==i&&us(t)};var hs="function"==typeof WeakSet?WeakSet:Set;function ms(e,t){var n=t.source,i=t.stack;null===i&&null!==n&&(i=Q(n)),null!==n&&Z(n.type),t=t.value,null!==e&&1===e.tag&&Z(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function gs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Nl(e,t)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:vs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ta(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}function vs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var i=n=n.next;do{if(0!=(i.tag&e)){var r=i.destroy;i.destroy=void 0,void 0!==r&&r()}0!=(i.tag&t)&&(r=i.create,i.destroy=r()),i=i.next}while(i!==n)}}function bs(e,t,n){switch("function"==typeof Rl&&Rl(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e.next;$r(97<n?97:n,(function(){var e=i;do{var n=e.destroy;if(void 0!==n){var r=t;try{n()}catch(e){Nl(r,e)}}e=e.next}while(e!==i)}))}break;case 1:gs(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Nl(e,t)}}(t,n);break;case 5:gs(t);break;case 4:Ts(e,t,n)}}function Es(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&Es(t)}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function Cs(e){e:{for(var t=e.return;null!==t;){if(ws(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Ye(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var r=e;;){var a=5===r.tag||6===r.tag;if(a){var s=a?r.stateNode:r.stateNode.instance;if(n)if(i){var l=s;s=n,8===(a=t).nodeType?a.parentNode.insertBefore(l,s):a.insertBefore(l,s)}else t.insertBefore(s,n);else i?(8===(l=t).nodeType?(a=l.parentNode).insertBefore(s,l):(a=l).appendChild(s),null!=(l=l._reactRootContainer)||null!==a.onclick||(a.onclick=Yn)):t.appendChild(s)}else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Ts(e,t,n){for(var i,r,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(i=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag){e:for(var l=e,c=a,u=n,d=c;;)if(bs(l,d,u),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===c)break;for(;null===d.sibling;){if(null===d.return||d.return===c)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r?(l=i,c=a.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):i.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:vs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,r=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[ui]=i,"input"===e&&"radio"===i.type&&null!=i.name&&Oe(n,i),Hn(e,r),t=Hn(e,i),r=0;r<a.length;r+=2){var s=a[r],l=a[r+1];"style"===s?Gn(n,l):"dangerouslySetInnerHTML"===s?We(n,l):"children"===s?Ye(n,l):Ce(n,s,l,t)}switch(e){case"input":Ie(n,i);break;case"textarea":Le(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(e=i.value)?De(n,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?De(n,!!i.multiple,i.defaultValue,!0):De(n,!!i.multiple,i.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(o(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,_t(t.containerInfo));break;case 12:break;case 13:if(n=t,null===t.memoizedState?i=!1:(i=!0,n=t.child,Vs=Yr()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,i?"function"==typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,r=null!=(r=e.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,a.style.display=Bn("display",r));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}ks(t);break;case 19:ks(t);break;case 17:case 20:case 21:break;default:throw Error(o(163))}}function ks(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var i=Al.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}var xs="function"==typeof WeakMap?WeakMap:Map;function _s(e,t,n){(n=ma(n,null)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){$s||($s=!0,Ks=i),ms(e,t)},n}function Os(e,t,n){(n=ma(n,null)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return ms(e,t),i(r)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===Xs?Xs=new Set([this]):Xs.add(this),ms(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Is,Ns=Math.ceil,Ps=D.ReactCurrentDispatcher,As=D.ReactCurrentOwner,Ds=16,Rs=32,Ms=0,Ls=null,Fs=null,js=0,Bs=0,Gs=null,Us=1073741823,zs=1073741823,Hs=null,Ws=0,Ys=!1,Vs=0,qs=null,$s=!1,Ks=null,Xs=null,Zs=!1,Qs=null,Js=90,el=null,tl=0,nl=null,il=0;function rl(){return 0!=(48&Ms)?1073741821-(Yr()/10|0):0!==il?il:il=1073741821-(Yr()/10|0)}function al(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var i=Vr();if(0==(4&t))return 99===i?1073741823:1073741822;if(0!=(Ms&Ds))return js;if(null!==n)e=ea(e,0|n.timeoutMs||5e3,250);else switch(i){case 99:e=1073741823;break;case 98:e=ea(e,150,100);break;case 97:case 96:e=ea(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Ls&&e===js&&--e,e}function ol(e,t){if(50<tl)throw tl=0,nl=null,Error(o(185));if(null!==(e=sl(e,t))){var n=Vr();1073741823===t?0!=(8&Ms)&&0==(48&Ms)?dl(e):(cl(e),0===Ms&&Zr()):cl(e),0==(4&Ms)||98!==n&&99!==n||(null===el?el=new Map([[e,t]]):(void 0===(n=el.get(e))||n>t)&&el.set(e,t))}}function sl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var i=e.return,r=null;if(null===i&&3===e.tag)r=e.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<t&&(i.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(Ls===r&&(vl(t),4===Bs&&Yl(r,js)),Vl(r,t)),r}function ll(e){var t=e.lastExpiredTime;return 0!==t?t:Wl(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function cl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xr(dl.bind(null,e));else{var t=ll(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var i=rl();if(i=1073741823===t?99:1===t||2===t?95:0>=(i=10*(1073741821-t)-10*(1073741821-i))?99:250>=i?98:5250>=i?97:95,null!==n){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=i)return;n!==Br&&Ir(n)}e.callbackExpirationTime=t,e.callbackPriority=i,t=1073741823===t?Xr(dl.bind(null,e)):Kr(i,ul.bind(null,e),{timeout:10*(1073741821-t)-Yr()}),e.callbackNode=t}}}function ul(e,t){if(il=0,t)return ql(e,t=rl()),cl(e),null;var n=ll(e);if(0!==n){if(t=e.callbackNode,0!=(48&Ms))throw Error(o(327));if(_l(),e===Ls&&n===js||hl(e,n),null!==Fs){var i=Ms;Ms|=Ds;for(var r=gl();;)try{El();break}catch(t){ml(e,t)}if(oa(),Ms=i,Ps.current=r,1===Bs)throw t=Gs,hl(e,n),Yl(e,n),cl(e),t;if(null===Fs)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,i=Bs,Ls=null,i){case 0:case 1:throw Error(o(345));case 2:ql(e,2<n?2:n);break;case 3:if(Yl(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Tl(r)),1073741823===Us&&10<(r=Vs+500-Yr())){if(Ys){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,hl(e,n);break}}if(0!==(a=ll(e))&&a!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}e.timeoutHandle=ri(Sl.bind(null,e),r);break}Sl(e);break;case 4:if(Yl(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Tl(r)),Ys&&(0===(r=e.lastPingedTime)||r>=n)){e.lastPingedTime=n,hl(e,n);break}if(0!==(r=ll(e))&&r!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}if(1073741823!==zs?i=10*(1073741821-zs)-Yr():1073741823===Us?i=0:(i=10*(1073741821-Us)-5e3,0>(i=(r=Yr())-i)&&(i=0),(n=10*(1073741821-n)-r)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ns(i/1960))-i)&&(i=n)),10<i){e.timeoutHandle=ri(Sl.bind(null,e),i);break}Sl(e);break;case 5:if(1073741823!==Us&&null!==Hs){a=Us;var s=Hs;if(0>=(i=0|s.busyMinDurationMs)?i=0:(r=0|s.busyDelayMs,i=(a=Yr()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=r?0:r+i-a),10<i){Yl(e,n),e.timeoutHandle=ri(Sl.bind(null,e),i);break}}Sl(e);break;default:throw Error(o(329))}if(cl(e),e.callbackNode===t)return ul.bind(null,e)}}return null}function dl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Sl(e);else{if(0!=(48&Ms))throw Error(o(327));if(_l(),e===Ls&&t===js||hl(e,t),null!==Fs){var n=Ms;Ms|=Ds;for(var i=gl();;)try{bl();break}catch(t){ml(e,t)}if(oa(),Ms=n,Ps.current=i,1===Bs)throw n=Gs,hl(e,t),Yl(e,t),cl(e),n;if(null!==Fs)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ls=null,Sl(e),cl(e)}}return null}function pl(e,t){var n=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=n)&&Zr()}}function fl(e,t){var n=Ms;Ms&=-2,Ms|=8;try{return e(t)}finally{0===(Ms=n)&&Zr()}}function hl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ai(n)),null!==Fs)for(n=Fs.return;null!==n;){var i=n;switch(i.tag){case 1:null!=i.type.childContextTypes&&wr();break;case 3:Wa(),Cr();break;case 5:Va(i);break;case 4:Wa();break;case 13:case 19:fr(qa);break;case 10:la(i)}n=n.return}Ls=e,Fs=jl(e.current,null),js=t,Bs=0,Gs=null,zs=Us=1073741823,Hs=null,Ws=0,Ys=!1}function ml(e,t){for(;;){try{if(oa(),mo(),null===Fs||null===Fs.return)return Bs=1,Gs=t,null;e:{var n=e,i=Fs.return,r=Fs,a=t;if(t=js,r.effectTag|=2048,r.firstEffect=r.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var o=a,s=0!=(1&qa.current),l=i;do{var c;if(c=13===l.tag){var u=l.memoizedState;if(null!==u)c=null!==u.dehydrated;else{var d=l.memoizedProps;c=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!s)}}if(c){var p=l.updateQueue;if(null===p){var f=new Set;f.add(o),l.updateQueue=f}else p.add(o);if(0==(2&l.mode)){if(l.effectTag|=64,r.effectTag&=-2981,1===r.tag)if(null===r.alternate)r.tag=17;else{var h=ma(1073741823,null);h.tag=2,ya(r,h)}r.expirationTime=1073741823;break e}a=void 0,r=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new xs,a=new Set,m.set(o,a)):void 0===(a=m.get(o))&&(a=new Set,m.set(o,a)),!a.has(r)){a.add(r);var g=Pl.bind(null,n,o,r);o.then(g,g)}l.effectTag|=4096,l.expirationTime=t;break e}l=l.return}while(null!==l);a=Error((Z(r.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Q(r))}5!==Bs&&(Bs=2),a=fs(a,r),l=i;do{switch(l.tag){case 3:o=a,l.effectTag|=4096,l.expirationTime=t,va(l,_s(l,o,t));break e;case 1:o=a;var y=l.type,v=l.stateNode;if(0==(64&l.effectTag)&&("function"==typeof y.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===Xs||!Xs.has(v)))){l.effectTag|=4096,l.expirationTime=t,va(l,Os(l,o,t));break e}}l=l.return}while(null!==l)}Fs=Cl(Fs)}catch(e){t=e;continue}break}}function gl(){var e=Ps.current;return Ps.current=Ao,null===e?Ao:e}function yl(e,t){e<Us&&2<e&&(Us=e),null!==t&&e<zs&&2<e&&(zs=e,Hs=t)}function vl(e){e>Ws&&(Ws=e)}function bl(){for(;null!==Fs;)Fs=wl(Fs)}function El(){for(;null!==Fs&&!Nr();)Fs=wl(Fs)}function wl(e){var t=Is(e.alternate,e,js);return e.memoizedProps=e.pendingProps,null===t&&(t=Cl(e)),As.current=null,t}function Cl(e){Fs=e;do{var t=Fs.alternate;if(e=Fs.return,0==(2048&Fs.effectTag)){e:{var n=t,i=js,a=(t=Fs).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Er(t.type)&&wr();break;case 3:Wa(),Cr(),(a=t.stateNode).pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(null===n||null===n.child)&&zo(t)&&us(t);break;case 5:Va(t),i=za(Ua.current);var s=t.type;if(null!==n&&null!=t.stateNode)ns(n,t,s,a,i),n.ref!==t.ref&&(t.effectTag|=128);else if(a){var l=za(Ba.current);if(zo(t)){var c=(a=t).stateNode;n=a.type;var u=a.memoizedProps,d=i;switch(c[ci]=a,c[ui]=u,s=void 0,i=c,n){case"iframe":case"object":case"embed":xn("load",i);break;case"video":case"audio":for(c=0;c<tt.length;c++)xn(tt[c],i);break;case"source":xn("error",i);break;case"img":case"image":case"link":xn("error",i),xn("load",i);break;case"form":xn("reset",i),xn("submit",i);break;case"details":xn("toggle",i);break;case"input":_e(i,u),xn("invalid",i),Wn(d,"onChange");break;case"select":i._wrapperState={wasMultiple:!!u.multiple},xn("invalid",i),Wn(d,"onChange");break;case"textarea":Me(i,u),xn("invalid",i),Wn(d,"onChange")}for(s in zn(n,u),c=null,u)u.hasOwnProperty(s)&&(l=u[s],"children"===s?"string"==typeof l?i.textContent!==l&&(c=["children",l]):"number"==typeof l&&i.textContent!==""+l&&(c=["children",""+l]):f.hasOwnProperty(s)&&null!=l&&Wn(d,s));switch(n){case"input":Se(i),Ne(i,u,!0);break;case"textarea":Se(i),Fe(i);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(i.onclick=Yn)}s=c,a.updateQueue=s,(a=null!==s)&&us(t)}else{n=t,d=s,u=a,c=9===i.nodeType?i:i.ownerDocument,l===je&&(l=Ge(d)),l===je?"script"===d?((u=c.createElement("div")).innerHTML="<script><\/script>",c=u.removeChild(u.firstChild)):"string"==typeof u.is?c=c.createElement(d,{is:u.is}):(c=c.createElement(d),"select"===d&&(d=c,u.multiple?d.multiple=!0:u.size&&(d.size=u.size))):c=c.createElementNS(l,d),(u=c)[ci]=n,u[ui]=a,ts(u,t),t.stateNode=u;var p=i,h=Hn(d=s,n=a);switch(d){case"iframe":case"object":case"embed":xn("load",u),i=n;break;case"video":case"audio":for(i=0;i<tt.length;i++)xn(tt[i],u);i=n;break;case"source":xn("error",u),i=n;break;case"img":case"image":case"link":xn("error",u),xn("load",u),i=n;break;case"form":xn("reset",u),xn("submit",u),i=n;break;case"details":xn("toggle",u),i=n;break;case"input":_e(u,n),i=xe(u,n),xn("invalid",u),Wn(p,"onChange");break;case"option":i=Ae(u,n);break;case"select":u._wrapperState={wasMultiple:!!n.multiple},i=r({},n,{value:void 0}),xn("invalid",u),Wn(p,"onChange");break;case"textarea":Me(u,n),i=Re(u,n),xn("invalid",u),Wn(p,"onChange");break;default:i=n}zn(d,i),c=void 0,l=d;var m=u,g=i;for(c in g)if(g.hasOwnProperty(c)){var y=g[c];"style"===c?Gn(m,y):"dangerouslySetInnerHTML"===c?null!=(y=y?y.__html:void 0)&&We(m,y):"children"===c?"string"==typeof y?("textarea"!==l||""!==y)&&Ye(m,y):"number"==typeof y&&Ye(m,""+y):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(f.hasOwnProperty(c)?null!=y&&Wn(p,c):null!=y&&Ce(m,c,y,h))}switch(d){case"input":Se(u),Ne(u,n,!1);break;case"textarea":Se(u),Fe(u);break;case"option":null!=n.value&&u.setAttribute("value",""+we(n.value));break;case"select":(i=u).multiple=!!n.multiple,null!=(u=n.value)?De(i,!!n.multiple,u,!1):null!=n.defaultValue&&De(i,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(u.onclick=Yn)}(a=ni(s,a))&&us(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(o(166));break;case 6:if(n&&null!=t.stateNode)is(0,t,n.memoizedProps,a);else{if("string"!=typeof a&&null===t.stateNode)throw Error(o(166));i=za(Ua.current),za(Ba.current),zo(t)?(s=(a=t).stateNode,i=a.memoizedProps,s[ci]=a,(a=s.nodeValue!==i)&&us(t)):(s=t,(a=(9===i.nodeType?i:i.ownerDocument).createTextNode(a))[ci]=s,t.stateNode=a)}break;case 11:break;case 13:if(fr(qa),a=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=i;break e}a=null!==a,s=!1,null===n?void 0!==t.memoizedProps.fallback&&zo(t):(s=null!==(i=n.memoizedState),a||null===i||null!==(i=n.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=i,i.nextEffect=u):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),a&&!s&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&qa.current)?0===Bs&&(Bs=3):(0!==Bs&&3!==Bs||(Bs=4),0!==Ws&&null!==Ls&&(Yl(Ls,js),Vl(Ls,Ws)))),(a||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Wa();break;case 10:la(t);break;case 9:case 14:break;case 17:Er(t.type)&&wr();break;case 19:if(fr(qa),null===(a=t.memoizedState))break;if(s=0!=(64&t.effectTag),null===(u=a.rendering)){if(s)ds(a,!1);else if(0!==Bs||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(u=$a(n))){for(t.effectTag|=64,ds(a,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===a.lastEffect&&(t.firstEffect=null),t.lastEffect=a.lastEffect,a=i,s=t.child;null!==s;)n=a,(i=s).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(u=i.alternate)?(i.childExpirationTime=0,i.expirationTime=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=u.childExpirationTime,i.expirationTime=u.expirationTime,i.child=u.child,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,n=u.dependencies,i.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;hr(qa,1&qa.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=$a(u))){if(t.effectTag|=64,s=!0,null!==(i=n.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),ds(a,!0),null===a.tail&&"hidden"===a.tailMode){null!==(t=t.lastEffect=a.lastEffect)&&(t.nextEffect=null);break}}else Yr()>a.tailExpiration&&1<i&&(t.effectTag|=64,s=!0,ds(a,!1),t.expirationTime=t.childExpirationTime=i-1);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(i=a.last)?i.sibling=u:t.child=u,a.last=u)}if(null!==a.tail){0===a.tailExpiration&&(a.tailExpiration=Yr()+500),i=a.tail,a.rendering=i,a.tail=i.sibling,a.lastEffect=t.lastEffect,i.sibling=null,a=qa.current,hr(qa,a=s?1&a|2:1&a),t=i;break e}break;case 20:case 21:break;default:throw Error(o(156,t.tag))}t=null}if(a=Fs,1===js||1!==a.childExpirationTime){for(s=0,i=a.child;null!==i;)(n=i.expirationTime)>s&&(s=n),(u=i.childExpirationTime)>s&&(s=u),i=i.sibling;a.childExpirationTime=s}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Fs.firstEffect),null!==Fs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Fs.firstEffect),e.lastEffect=Fs.lastEffect),1<Fs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Fs:e.firstEffect=Fs,e.lastEffect=Fs))}else{if(null!==(t=ps(Fs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Fs.sibling))return t;Fs=e}while(null!==Fs);return 0===Bs&&(Bs=5),null}function Tl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Sl(e){var t=Vr();return $r(99,kl.bind(null,e,t)),null}function kl(e,t){if(_l(),0!=(48&Ms))throw Error(o(327));var n=e.finishedWork,i=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=Tl(n);if(e.firstPendingTime=r,i<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:i<=e.firstSuspendedTime&&(e.firstSuspendedTime=i-1),i<=e.lastPingedTime&&(e.lastPingedTime=0),i<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ls&&(Fs=Ls=null,js=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){var a=Ms;Ms|=Rs,As.current=null,ei=kn;var s=Xn();if(Zn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{l.nodeType,d.nodeType}catch(e){l=null;break e}var p=0,f=-1,h=-1,m=0,g=0,y=s,v=null;t:for(;;){for(var b;y!==l||0!==u&&3!==y.nodeType||(f=p+u),y!==d||0!==c&&3!==y.nodeType||(h=p+c),3===y.nodeType&&(p+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===s)break t;if(v===l&&++m===u&&(f=p),v===d&&++g===c&&(h=p),null!==(b=y.nextSibling))break;v=(y=v).parentNode}y=b}l=-1===f||-1===h?null:{start:f,end:h}}else l=null}l=l||{start:0,end:0}}else l=null;ti={focusedElem:s,selectionRange:l},kn=!1,qs=r;do{try{xl()}catch(e){if(null===qs)throw Error(o(330));Nl(qs,e),qs=qs.nextEffect}}while(null!==qs);qs=r;do{try{for(s=e,l=t;null!==qs;){var E=qs.effectTag;if(16&E&&Ye(qs.stateNode,""),128&E){var w=qs.alternate;if(null!==w){var C=w.ref;null!==C&&("function"==typeof C?C(null):C.current=null)}}switch(1038&E){case 2:Cs(qs),qs.effectTag&=-3;break;case 6:Cs(qs),qs.effectTag&=-3,Ss(qs.alternate,qs);break;case 1024:qs.effectTag&=-1025;break;case 1028:qs.effectTag&=-1025,Ss(qs.alternate,qs);break;case 4:Ss(qs.alternate,qs);break;case 8:Ts(s,u=qs,l),Es(u)}qs=qs.nextEffect}}catch(e){if(null===qs)throw Error(o(330));Nl(qs,e),qs=qs.nextEffect}}while(null!==qs);if(C=ti,w=Xn(),E=C.focusedElem,l=C.selectionRange,w!==E&&E&&E.ownerDocument&&Kn(E.ownerDocument.documentElement,E)){null!==l&&Zn(E)&&(w=l.start,void 0===(C=l.end)&&(C=w),"selectionStart"in E?(E.selectionStart=w,E.selectionEnd=Math.min(C,E.value.length)):(C=(w=E.ownerDocument||document)&&w.defaultView||window).getSelection&&(C=C.getSelection(),u=E.textContent.length,s=Math.min(l.start,u),l=void 0===l.end?s:Math.min(l.end,u),!C.extend&&s>l&&(u=l,l=s,s=u),u=$n(E,s),d=$n(E,l),u&&d&&(1!==C.rangeCount||C.anchorNode!==u.node||C.anchorOffset!==u.offset||C.focusNode!==d.node||C.focusOffset!==d.offset)&&((w=w.createRange()).setStart(u.node,u.offset),C.removeAllRanges(),s>l?(C.addRange(w),C.extend(d.node,d.offset)):(w.setEnd(d.node,d.offset),C.addRange(w))))),w=[];for(C=E;C=C.parentNode;)1===C.nodeType&&w.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"==typeof E.focus&&E.focus(),E=0;E<w.length;E++)(C=w[E]).element.scrollLeft=C.left,C.element.scrollTop=C.top}ti=null,kn=!!ei,ei=null,e.current=n,qs=r;do{try{for(E=i;null!==qs;){var T=qs.effectTag;if(36&T){var S=qs.alternate;switch(C=E,(w=qs).tag){case 0:case 11:case 15:vs(16,32,w);break;case 1:var k=w.stateNode;if(4&w.effectTag)if(null===S)k.componentDidMount();else{var x=w.elementType===w.type?S.memoizedProps:ta(w.type,S.memoizedProps);k.componentDidUpdate(x,S.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var _=w.updateQueue;null!==_&&Ca(0,_,k);break;case 3:var O=w.updateQueue;if(null!==O){if(s=null,null!==w.child)switch(w.child.tag){case 5:s=w.child.stateNode;break;case 1:s=w.child.stateNode}Ca(0,O,s)}break;case 5:var I=w.stateNode;null===S&&4&w.effectTag&&ni(w.type,w.memoizedProps)&&I.focus();break;case 6:case 4:case 12:break;case 13:if(null===w.memoizedState){var N=w.alternate;if(null!==N){var P=N.memoizedState;if(null!==P){var A=P.dehydrated;null!==A&&_t(A)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(o(163))}}if(128&T){w=void 0;var D=qs.ref;if(null!==D){var R=qs.stateNode;switch(qs.tag){case 5:w=R;break;default:w=R}"function"==typeof D?D(w):D.current=w}}qs=qs.nextEffect}}catch(e){if(null===qs)throw Error(o(330));Nl(qs,e),qs=qs.nextEffect}}while(null!==qs);qs=null,Gr(),Ms=a}else e.current=n;if(Zs)Zs=!1,Qs=e,Js=t;else for(qs=r;null!==qs;)t=qs.nextEffect,qs.nextEffect=null,qs=t;if(0===(t=e.firstPendingTime)&&(Xs=null),1073741823===t?e===nl?tl++:(tl=0,nl=e):tl=0,"function"==typeof Dl&&Dl(n.stateNode,i),cl(e),$s)throw $s=!1,e=Ks,Ks=null,e;return 0!=(8&Ms)||Zr(),null}function xl(){for(;null!==qs;){var e=qs.effectTag;0!=(256&e)&&ys(qs.alternate,qs),0==(512&e)||Zs||(Zs=!0,Kr(97,(function(){return _l(),null}))),qs=qs.nextEffect}}function _l(){if(90!==Js){var e=97<Js?97:Js;return Js=90,$r(e,Ol)}}function Ol(){if(null===Qs)return!1;var e=Qs;if(Qs=null,0!=(48&Ms))throw Error(o(331));var t=Ms;for(Ms|=Rs,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:vs(128,0,n),vs(0,64,n)}}catch(t){if(null===e)throw Error(o(330));Nl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ms=t,Zr(),!0}function Il(e,t,n){ya(e,t=_s(e,t=fs(n,t),1073741823)),null!==(e=sl(e,1073741823))&&cl(e)}function Nl(e,t){if(3===e.tag)Il(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Il(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Xs||!Xs.has(i))){ya(n,e=Os(n,e=fs(t,e),1073741823)),null!==(n=sl(n,1073741823))&&cl(n);break}}n=n.return}}function Pl(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),Ls===e&&js===n?4===Bs||3===Bs&&1073741823===Us&&Yr()-Vs<500?hl(e,js):Ys=!0:Wl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),cl(e)))}function Al(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=al(t=rl(),e,null)),null!==(e=sl(e,t))&&cl(e)}Is=function(e,t,n){var i=t.expirationTime;if(null!==e){var r=t.pendingProps;if(e.memoizedProps!==r||yr.current)Yo=!0;else{if(i<n){switch(Yo=!1,t.tag){case 3:es(t),Ho();break;case 5:if(Ya(t),4&t.mode&&1!==n&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Er(t.type)&&kr(t);break;case 4:Ha(t,t.stateNode.containerInfo);break;case 10:sa(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&i>=n?as(e,t,n):(hr(qa,1&qa.current),null!==(t=cs(e,t,n))?t.sibling:null);hr(qa,1&qa.current);break;case 19:if(i=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(i)return ls(e,t,n);t.effectTag|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null),hr(qa,qa.current),!i)return null}return cs(e,t,n)}Yo=!1}}else Yo=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=br(t,gr.current),ua(t,n),r=ho(null,t,i,e,r,n),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(t.tag=1,mo(),Er(i)){var a=!0;kr(t)}else a=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null;var s=i.getDerivedStateFromProps;"function"==typeof s&&xa(t,i,s,e),r.updater=_a,t.stateNode=r,r._reactInternalFiber=t,Pa(t,i,e,n),t=Jo(null,t,i,!0,a,n)}else t.tag=0,Vo(null,t,r,n),t=t.child;return t;case 16:if(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(r),1!==r._status)throw r._result;switch(r=r._result,t.type=r,a=t.tag=function(e){if("function"==typeof e)return Fl(e)?1:0;if(null!=e){if((e=e.$$typeof)===W)return 11;if(e===q)return 14}return 2}(r),e=ta(r,e),a){case 0:t=Zo(null,t,r,e,n);break;case 1:t=Qo(null,t,r,e,n);break;case 11:t=qo(null,t,r,e,n);break;case 14:t=$o(null,t,r,ta(r.type,e),i,n);break;default:throw Error(o(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,Zo(e,t,i,r=t.elementType===i?r:ta(i,r),n);case 1:return i=t.type,r=t.pendingProps,Qo(e,t,i,r=t.elementType===i?r:ta(i,r),n);case 3:if(es(t),null===(i=t.updateQueue))throw Error(o(282));if(r=null!==(r=t.memoizedState)?r.element:null,wa(t,i,t.pendingProps,null,n),(i=t.memoizedState.element)===r)Ho(),t=cs(e,t,n);else{if((r=t.stateNode.hydrate)&&(Lo=oi(t.stateNode.containerInfo.firstChild),Mo=t,r=Fo=!0),r)for(n=Fa(t,null,i,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Vo(e,t,i,n),Ho();t=t.child}return t;case 5:return Ya(t),null===e&&Go(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,ii(i,r)?s=null:null!==a&&ii(i,a)&&(t.effectTag|=16),Xo(e,t),4&t.mode&&1!==n&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Vo(e,t,s,n),t=t.child),t;case 6:return null===e&&Go(t),null;case 13:return as(e,t,n);case 4:return Ha(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=La(t,null,i,n):Vo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,qo(e,t,i,r=t.elementType===i?r:ta(i,r),n);case 7:return Vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,sa(t,a=r.value),null!==s){var l=s.value;if(0==(a=er(l,a)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(l,a):1073741823))){if(s.children===r.children&&!yr.current){t=cs(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===i&&0!=(u.observedBits&a)){1===l.tag&&((u=ma(n,null)).tag=2,ya(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),ca(l.return,n),c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Vo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(a=t.pendingProps).children,ua(t,n),i=i(r=da(r,a.unstable_observedBits)),t.effectTag|=1,Vo(e,t,i,n),t.child;case 14:return a=ta(r=t.type,t.pendingProps),$o(e,t,r,a=ta(r.type,a),i,n);case 15:return Ko(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ta(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Er(i)?(e=!0,kr(t)):e=!1,ua(t,n),Ia(t,i,r),Pa(t,i,r,n),Jo(null,t,i,!0,e,n);case 19:return ls(e,t,n)}throw Error(o(156,t.tag))};var Dl=null,Rl=null;function Ml(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ll(e,t,n,i){return new Ml(e,t,n,i)}function Fl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jl(e,t){var n=e.alternate;return null===n?((n=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bl(e,t,n,i,r,a){var s=2;if(i=e,"function"==typeof e)Fl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case j:return Gl(n.children,r,a,t);case H:s=8,r|=7;break;case B:s=8,r|=1;break;case G:return(e=Ll(12,n,t,8|r)).elementType=G,e.type=G,e.expirationTime=a,e;case Y:return(e=Ll(13,n,t,r)).type=Y,e.elementType=Y,e.expirationTime=a,e;case V:return(e=Ll(19,n,t,r)).elementType=V,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case U:s=10;break e;case z:s=9;break e;case W:s=11;break e;case q:s=14;break e;case $:s=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ll(s,n,t,r)).elementType=e,t.type=i,t.expirationTime=a,t}function Gl(e,t,n,i){return(e=Ll(7,e,i,t)).expirationTime=n,e}function Ul(e,t,n){return(e=Ll(6,e,null,t)).expirationTime=n,e}function zl(e,t,n){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Wl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Yl(e,t){var n=e.firstSuspendedTime,i=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(i>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Vl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function ql(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function $l(e,t,n,i){var r=t.current,a=rl(),s=Sa.suspense;a=al(a,r,s);e:if(n){t:{if(nt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Er(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var c=n.type;if(Er(c)){n=Sr(n,c,l);break e}}n=l}else n=mr;return null===t.context?t.context=n:t.pendingContext=n,(t=ma(a,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ya(r,t),ol(r,a),a}function Kl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Xl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Zl(e,t){Xl(e,t),(e=e.alternate)&&Xl(e,t)}function Ql(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:F,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Jl(e,t,n){var i=new Hl(e,t,n=null!=n&&!0===n.hydrate),r=Ll(3,null,null,2===t?7:1===t?3:0);i.current=r,r.stateNode=i,e[di]=i.current,n&&0!==t&&function(e){var t=Mn(e);yt.forEach((function(n){Ln(n,e,t)})),vt.forEach((function(n){Ln(n,e,t)}))}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=i}function ec(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tc(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof r){var s=r;r=function(){var e=Kl(o);s.call(e)}}$l(t,o,e,r)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Jl(e,0,t?{hydrate:!0}:void 0)}(n,i),o=a._internalRoot,"function"==typeof r){var l=r;r=function(){var e=Kl(o);l.call(e)}}fl((function(){$l(t,o,e,r)}))}return Kl(o)}function nc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ec(t))throw Error(o(200));return Ql(e,t,null,n)}ot=function(e){if(13===e.tag){var t=ea(rl(),150,100);ol(e,t),Zl(e,t)}},st=function(e){if(13===e.tag){rl();var t=Jr++;ol(e,t),Zl(e,t)}},lt=function(e){if(13===e.tag){var t=rl();ol(e,t=al(t,e,null)),Zl(e,t)}},ee=function(e,t,n){switch(t){case"input":if(Ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=mi(i);if(!r)throw Error(o(90));ke(i),Ie(i,r)}}}break;case"textarea":Le(e,n);break;case"select":null!=(t=n.value)&&De(e,!!n.multiple,t,!1)}},Jl.prototype.render=function(e,t){$l(e,this._internalRoot,null,void 0===t?null:t)},Jl.prototype.unmount=function(e){$l(null,this._internalRoot,null,void 0===e?null:e)},oe=pl,se=function(e,t,n,i){var r=Ms;Ms|=4;try{return $r(98,e.bind(null,t,n,i))}finally{0===(Ms=r)&&Zr()}},le=function(){0==(49&Ms)&&(function(){if(null!==el){var e=el;el=null,e.forEach((function(e,t){ql(t,e),cl(t)})),Zr()}}(),_l())},ce=function(e,t){var n=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=n)&&Zr()}};var ic={createPortal:nc,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return null===(e=at(t))?null:e.stateNode},hydrate:function(e,t,n){if(!ec(t))throw Error(o(200));return tc(null,e,t,!0,n)},render:function(e,t,n){if(!ec(t))throw Error(o(200));return tc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){if(!ec(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return tc(e,t,n,!1,i)},unmountComponentAtNode:function(e){if(!ec(e))throw Error(o(40));return!!e._reactRootContainer&&(fl((function(){tc(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return nc.apply(void 0,arguments)},unstable_batchedUpdates:pl,flushSync:function(e,t){if(0!=(48&Ms))throw Error(o(187));var n=Ms;Ms|=1;try{return $r(99,e.bind(null,t))}finally{Ms=n,Zr()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[fi,hi,mi,P.injectEventPluginsByName,p,Rt,function(e){_(e,Dt)},re,ae,Pn,N,_l,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Dl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Rl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(r({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=at(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:pi,bundleType:0,version:"16.11.0",rendererPackageName:"react-dom"});var rc={default:ic},ac=rc&&ic||rc;t.exports=ac.default||ac},{"object-assign":55,react:82,scheduler:62}],60:[function(e,t,n){"use strict";(function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}})(),t.exports=e("./cjs/react-dom.production.min.js")},{"./cjs/react-dom.production.min.js":59}],61:[function(e,t,n){"use strict";var i,r,a,o,s;if(Object.defineProperty(n,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,c=null,u=function(){if(null!==l)try{var e=n.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(u,0),e}},d=Date.now();n.unstable_now=function(){return Date.now()-d},i=function(e){null!==l?setTimeout(i,0,e):(l=e,setTimeout(u,0))},r=function(e,t){c=setTimeout(e,t)},a=function(){clearTimeout(c)},o=function(){return!1},s=n.unstable_forceFrameRate=function(){}}else{var p=window.performance,f=window.Date,h=window.setTimeout,m=window.clearTimeout,g=window.requestAnimationFrame,y=window.cancelAnimationFrame;if("undefined"!=typeof console&&("function"!=typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof p&&"function"==typeof p.now)n.unstable_now=function(){return p.now()};else{var v=f.now();n.unstable_now=function(){return f.now()-v}}var b=!1,E=null,w=-1,C=5,T=0;o=function(){return n.unstable_now()>=T},s=function(){},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):C=0<e?Math.floor(1e3/e):33.33};var S=new MessageChannel,k=S.port2;S.port1.onmessage=function(){if(null!==E){var e=n.unstable_now();T=e+C;try{E(!0,e)?k.postMessage(null):(b=!1,E=null)}catch(e){throw k.postMessage(null),e}}else b=!1},i=function(e){E=e,b||(b=!0,k.postMessage(null))},r=function(e,t){w=h((function(){e(n.unstable_now())}),t)},a=function(){m(w),w=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var i=Math.floor((n-1)/2),r=e[i];if(!(void 0!==r&&0<I(r,t)))break e;e[i]=t,e[n]=r,n=i}}function _(e){return void 0===(e=e[0])?null:e}function O(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var a=2*(i+1)-1,o=e[a],s=a+1,l=e[s];if(void 0!==o&&0>I(o,n))void 0!==l&&0>I(l,o)?(e[i]=l,e[s]=n,i=s):(e[i]=o,e[a]=n,i=a);else{if(!(void 0!==l&&0>I(l,n)))break e;e[i]=l,e[s]=n,i=s}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var N=[],P=[],A=1,D=null,R=3,M=!1,L=!1,F=!1;function j(e){for(var t=_(P);null!==t;){if(null===t.callback)O(P);else{if(!(t.startTime<=e))break;O(P),t.sortIndex=t.expirationTime,x(N,t)}t=_(P)}}function B(e){if(F=!1,j(e),!L)if(null!==_(N))L=!0,i(G);else{var t=_(P);null!==t&&r(B,t.startTime-e)}}function G(e,t){L=!1,F&&(F=!1,a()),M=!0;var i=R;try{for(j(t),D=_(N);null!==D&&(!(D.expirationTime>t)||e&&!o());){var s=D.callback;if(null!==s){D.callback=null,R=D.priorityLevel;var l=s(D.expirationTime<=t);t=n.unstable_now(),"function"==typeof l?D.callback=l:D===_(N)&&O(N),j(t)}else O(N);D=_(N)}if(null!==D)var c=!0;else{var u=_(P);null!==u&&r(B,u.startTime-t),c=!1}return c}finally{D=null,R=i,M=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var z=s;n.unstable_ImmediatePriority=1,n.unstable_UserBlockingPriority=2,n.unstable_NormalPriority=3,n.unstable_IdlePriority=5,n.unstable_LowPriority=4,n.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},n.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},n.unstable_scheduleCallback=function(e,t,o){var s=n.unstable_now();if("object"==typeof o&&null!==o){var l=o.delay;l="number"==typeof l&&0<l?s+l:s,o="number"==typeof o.timeout?o.timeout:U(e)}else o=U(e),l=s;return e={id:A++,callback:t,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>s?(e.sortIndex=l,x(P,e),null===_(N)&&e===_(P)&&(F?a():F=!0,r(B,l-s))):(e.sortIndex=o,x(N,e),L||M||(L=!0,i(G))),e},n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_shouldYield=function(){var e=n.unstable_now();j(e);var t=_(N);return t!==D&&null!==D&&null!==t&&null!==t.callback&&t.startTime<=e&&t.expirationTime<D.expirationTime||o()},n.unstable_requestPaint=z,n.unstable_continueExecution=function(){L||M||(L=!0,i(G))},n.unstable_pauseExecution=function(){},n.unstable_getFirstCallbackNode=function(){return _(N)},n.unstable_Profiling=null},{}],62:[function(e,t,n){"use strict";t.exports=e("./cjs/scheduler.production.min.js")},{"./cjs/scheduler.production.min.js":61}],63:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.async_mode"):60111,p=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,v=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,E=i?Symbol.for("react.responder"):60118,w=i?Symbol.for("react.scope"):60119;function C(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case p:case o:case l:case s:case h:return e;default:switch(e=e&&e.$$typeof){case u:case f:case y:case g:case c:return e;default:return t}}case a:return t}}}function T(e){return C(e)===p}n.AsyncMode=d,n.ConcurrentMode=p,n.ContextConsumer=u,n.ContextProvider=c,n.Element=r,n.ForwardRef=f,n.Fragment=o,n.Lazy=y,n.Memo=g,n.Portal=a,n.Profiler=l,n.StrictMode=s,n.Suspense=h,n.isAsyncMode=function(e){return T(e)||C(e)===d},n.isConcurrentMode=T,n.isContextConsumer=function(e){return C(e)===u},n.isContextProvider=function(e){return C(e)===c},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},n.isForwardRef=function(e){return C(e)===f},n.isFragment=function(e){return C(e)===o},n.isLazy=function(e){return C(e)===y},n.isMemo=function(e){return C(e)===g},n.isPortal=function(e){return C(e)===a},n.isProfiler=function(e){return C(e)===l},n.isStrictMode=function(e){return C(e)===s},n.isSuspense=function(e){return C(e)===h},n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===p||e===l||e===s||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f||e.$$typeof===b||e.$$typeof===E||e.$$typeof===w||e.$$typeof===v)},n.typeOf=C},{}],64:[function(e,t,n){"use strict";t.exports=e("./cjs/react-is.production.min.js")},{"./cjs/react-is.production.min.js":63}],65:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.createProvider=c,n.default=void 0;var a=r(e("@babel/runtime/helpers/inheritsLoose")),o=i(e("react")),s=r(e("prop-types")),l=e("../utils/PropTypes");r(e("../utils/warning")),o.default.forwardRef;function c(e){var t;void 0===e&&(e="store");var n=e+"Subscription",i=function(t){(0,a.default)(r,t);var i=r.prototype;function r(n,i){var r;return(r=t.call(this,n,i)||this)[e]=n.store,r}return i.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},i.render=function(){return o.Children.only(this.props.children)},r}(o.Component);return i.propTypes={store:l.storeShape.isRequired,children:s.default.element.isRequired},i.childContextTypes=((t={})[e]=l.storeShape.isRequired,t[n]=l.subscriptionShape,t),i}var u=c();n.default=u},{"../utils/PropTypes":75,"../utils/warning":80,"@babel/runtime/helpers/inheritsLoose":37,"@babel/runtime/helpers/interopRequireDefault":38,"@babel/runtime/helpers/interopRequireWildcard":39,"prop-types":57,react:82}],66:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=function(e,t){var n,i;void 0===t&&(t={});var r=t,b=r.getDisplayName,E=void 0===b?function(e){return"ConnectAdvanced("+e+")"}:b,w=r.methodName,C=void 0===w?"connectAdvanced":w,T=r.renderCountProp,S=void 0===T?void 0:T,k=r.shouldHandleStateChanges,x=void 0===k||k,_=r.storeKey,O=void 0===_?"store":_,I=r.withRef,N=void 0!==I&&I,P=(0,l.default)(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),A=O+"Subscription",D=g++,R=((n={})[O]=h.storeShape,n[A]=h.subscriptionShape,n),M=((i={})[A]=h.subscriptionShape,i);return function(t){(0,u.default)((0,p.isValidElementType)(t),"You must pass a component to the function returned by "+C+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",i=E(n),r=(0,s.default)({},P,{getDisplayName:E,methodName:C,renderCountProp:S,shouldHandleStateChanges:x,storeKey:O,withRef:N,displayName:i,wrappedComponentName:n,WrappedComponent:t}),l=function(n){function l(e,t){var r;return(r=n.call(this,e,t)||this).version=D,r.state={},r.renderCount=0,r.store=e[O]||t[O],r.propsMode=Boolean(e[O]),r.setWrappedInstance=r.setWrappedInstance.bind((0,o.default)((0,o.default)(r))),(0,u.default)(r.store,'Could not find "'+O+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+O+'" as a prop to "'+i+'".'),r.initSelector(),r.initSubscription(),r}(0,a.default)(l,n);var c=l.prototype;return c.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[A]=t||this.context[A],e},c.componentDidMount=function(){x&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.componentWillReceiveProps=function(e){this.selector.run(e)},c.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=v,this.store=null,this.selector.run=v,this.selector.shouldComponentUpdate=!1},c.getWrappedInstance=function(){return(0,u.default)(N,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+C+"() call."),this.wrappedInstance},c.setWrappedInstance=function(e){this.wrappedInstance=e},c.initSelector=function(){var t=e(this.store.dispatch,r);this.selector=function(e,t){var n={run:function(i){try{var r=e(t.getState(),i);(r!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=r,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},c.initSubscription=function(){if(x){var e=(this.propsMode?this.props:this.context)[A];this.subscription=new f.default(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(y)):this.notifyNestedSubs()},c.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.addExtraProps=function(e){if(!(N||S||this.propsMode&&this.subscription))return e;var t=(0,s.default)({},e);return N&&(t.ref=this.setWrappedInstance),S&&(t[S]=this.renderCount++),this.propsMode&&this.subscription&&(t[A]=this.subscription),t},c.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return(0,d.createElement)(t,this.addExtraProps(e.props))},l}(d.Component);return m&&(l.prototype.UNSAFE_componentWillReceiveProps=l.prototype.componentWillReceiveProps,delete l.prototype.componentWillReceiveProps),l.WrappedComponent=t,l.displayName=i,l.childContextTypes=M,l.contextTypes=R,l.propTypes=R,(0,c.default)(l,t)}};var a=r(e("@babel/runtime/helpers/inheritsLoose")),o=r(e("@babel/runtime/helpers/assertThisInitialized")),s=r(e("@babel/runtime/helpers/extends")),l=r(e("@babel/runtime/helpers/objectWithoutPropertiesLoose")),c=r(e("hoist-non-react-statics")),u=r(e("invariant")),d=i(e("react")),p=e("react-is"),f=r(e("../utils/Subscription")),h=e("../utils/PropTypes"),m=void 0!==d.default.forwardRef,g=0,y={};function v(){}},{"../utils/PropTypes":75,"../utils/Subscription":76,"@babel/runtime/helpers/assertThisInitialized":35,"@babel/runtime/helpers/extends":36,"@babel/runtime/helpers/inheritsLoose":37,"@babel/runtime/helpers/interopRequireDefault":38,"@babel/runtime/helpers/interopRequireWildcard":39,"@babel/runtime/helpers/objectWithoutPropertiesLoose":40,"hoist-non-react-statics":43,invariant:44,react:82,"react-is":64}],67:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.createConnect=h,n.default=void 0;var r=i(e("@babel/runtime/helpers/extends")),a=i(e("@babel/runtime/helpers/objectWithoutPropertiesLoose")),o=i(e("../components/connectAdvanced")),s=i(e("../utils/shallowEqual")),l=i(e("./mapDispatchToProps")),c=i(e("./mapStateToProps")),u=i(e("./mergeProps")),d=i(e("./selectorFactory"));function p(e,t,n){for(var i=t.length-1;i>=0;i--){var r=t[i](e);if(r)return r}return function(t,i){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function f(e,t){return e===t}function h(e){var t=void 0===e?{}:e,n=t.connectHOC,i=void 0===n?o.default:n,h=t.mapStateToPropsFactories,m=void 0===h?c.default:h,g=t.mapDispatchToPropsFactories,y=void 0===g?l.default:g,v=t.mergePropsFactories,b=void 0===v?u.default:v,E=t.selectorFactory,w=void 0===E?d.default:E;return function(e,t,n,o){void 0===o&&(o={});var l=o,c=l.pure,u=void 0===c||c,d=l.areStatesEqual,h=void 0===d?f:d,g=l.areOwnPropsEqual,v=void 0===g?s.default:g,E=l.areStatePropsEqual,C=void 0===E?s.default:E,T=l.areMergedPropsEqual,S=void 0===T?s.default:T,k=(0,a.default)(l,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),x=p(e,m,"mapStateToProps"),_=p(t,y,"mapDispatchToProps"),O=p(n,b,"mergeProps");return i(w,(0,r.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:_,initMergeProps:O,pure:u,areStatesEqual:h,areOwnPropsEqual:v,areStatePropsEqual:C,areMergedPropsEqual:S},k))}}var m=h();n.default=m},{"../components/connectAdvanced":66,"../utils/shallowEqual":78,"./mapDispatchToProps":68,"./mapStateToProps":69,"./mergeProps":70,"./selectorFactory":71,"@babel/runtime/helpers/extends":36,"@babel/runtime/helpers/interopRequireDefault":38,"@babel/runtime/helpers/objectWithoutPropertiesLoose":40}],68:[function(e,t,n){"use strict";n.__esModule=!0,n.whenMapDispatchToPropsIsFunction=a,n.whenMapDispatchToPropsIsMissing=o,n.whenMapDispatchToPropsIsObject=s,n.default=void 0;var i=e("redux"),r=e("./wrapMapToProps");function a(e){return"function"==typeof e?(0,r.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function o(e){return e?void 0:(0,r.wrapMapToPropsConstant)((function(e){return{dispatch:e}}))}function s(e){return e&&"object"==typeof e?(0,r.wrapMapToPropsConstant)((function(t){return(0,i.bindActionCreators)(e,t)})):void 0}var l=[a,o,s];n.default=l},{"./wrapMapToProps":73,redux:88}],69:[function(e,t,n){"use strict";n.__esModule=!0,n.whenMapStateToPropsIsFunction=r,n.whenMapStateToPropsIsMissing=a,n.default=void 0;var i=e("./wrapMapToProps");function r(e){return"function"==typeof e?(0,i.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function a(e){return e?void 0:(0,i.wrapMapToPropsConstant)((function(){return{}}))}var o=[r,a];n.default=o},{"./wrapMapToProps":73}],70:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.defaultMergeProps=a,n.wrapMergePropsFunc=o,n.whenMergePropsIsFunction=s,n.whenMergePropsIsOmitted=l,n.default=void 0;var r=i(e("@babel/runtime/helpers/extends"));i(e("../utils/verifyPlainObject"));function a(e,t,n){return(0,r.default)({},n,e,t)}function o(e){return function(t,n){n.displayName;var i,r=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var l=e(t,n,s);return o?r&&a(l,i)||(i=l):(o=!0,i=l),i}}}function s(e){return"function"==typeof e?o(e):void 0}function l(e){return e?void 0:function(){return a}}var c=[s,l];n.default=c},{"../utils/verifyPlainObject":79,"@babel/runtime/helpers/extends":36,"@babel/runtime/helpers/interopRequireDefault":38}],71:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.impureFinalPropsSelectorFactory=a,n.pureFinalPropsSelectorFactory=o,n.default=function(e,t){var n=t.initMapStateToProps,i=t.initMapDispatchToProps,s=t.initMergeProps,l=(0,r.default)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),c=n(e,l),u=i(e,l),d=s(e,l);return(l.pure?o:a)(c,u,d,e,l)};var r=i(e("@babel/runtime/helpers/objectWithoutPropertiesLoose"));i(e("./verifySubselectors"));function a(e,t,n,i){return function(r,a){return n(e(r,a),t(i,a),a)}}function o(e,t,n,i,r){var a,o,s,l,c,u=r.areStatesEqual,d=r.areOwnPropsEqual,p=r.areStatePropsEqual,f=!1;function h(r,f){var h,m,g=!d(f,o),y=!u(r,a);return a=r,o=f,g&&y?(s=e(a,o),t.dependsOnOwnProps&&(l=t(i,o)),c=n(s,l,o)):g?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(l=t(i,o)),c=n(s,l,o)):y?(h=e(a,o),m=!p(h,s),s=h,m&&(c=n(s,l,o)),c):c}return function(r,u){return f?h(r,u):(s=e(a=r,o=u),l=t(i,o),c=n(s,l,o),f=!0,c)}}},{"./verifySubselectors":72,"@babel/runtime/helpers/interopRequireDefault":38,"@babel/runtime/helpers/objectWithoutPropertiesLoose":40}],72:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=function(e,t,n,i){a(e,"mapStateToProps",i),a(t,"mapDispatchToProps",i),a(n,"mergeProps",i)};var r=i(e("../utils/warning"));function a(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||(0,r.default)("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}},{"../utils/warning":80,"@babel/runtime/helpers/interopRequireDefault":38}],73:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.wrapMapToPropsConstant=function(e){return function(t,n){var i=e(t,n);function r(){return i}return r.dependsOnOwnProps=!1,r}},n.getDependsOnOwnProps=r,n.wrapMapToPropsFunc=function(e,t){return function(t,n){n.displayName;var i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e)};return i.dependsOnOwnProps=!0,i.mapToProps=function(t,n){i.mapToProps=e,i.dependsOnOwnProps=r(e);var a=i(t,n);return"function"==typeof a&&(i.mapToProps=a,i.dependsOnOwnProps=r(a),a=i(t,n)),a},i}};i(e("../utils/verifyPlainObject"));function r(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}},{"../utils/verifyPlainObject":79,"@babel/runtime/helpers/interopRequireDefault":38}],74:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),r=e("@babel/runtime/helpers/interopRequireWildcard");n.__esModule=!0;var a=r(e("./components/Provider"));n.Provider=a.default,n.createProvider=a.createProvider;var o=i(e("./components/connectAdvanced"));n.connectAdvanced=o.default;var s=i(e("./connect/connect"));n.connect=s.default},{"./components/Provider":65,"./components/connectAdvanced":66,"./connect/connect":67,"@babel/runtime/helpers/interopRequireDefault":38,"@babel/runtime/helpers/interopRequireWildcard":39}],75:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.storeShape=n.subscriptionShape=void 0;var r=i(e("prop-types")),a=r.default.shape({trySubscribe:r.default.func.isRequired,tryUnsubscribe:r.default.func.isRequired,notifyNestedSubs:r.default.func.isRequired,isSubscribed:r.default.func.isRequired});n.subscriptionShape=a;var o=r.default.shape({subscribe:r.default.func.isRequired,dispatch:r.default.func.isRequired,getState:r.default.func.isRequired});n.storeShape=o},{"@babel/runtime/helpers/interopRequireDefault":38,"prop-types":57}],76:[function(e,t,n){"use strict";n.__esModule=!0,n.default=void 0;var i=null,r={notify:function(){}};var a=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=r}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=function(){var e=[],t=[];return{clear:function(){t=i,e=i},notify:function(){for(var n=e=t,i=0;i<n.length;i++)n[i]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==i&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=r)},e}();n.default=a},{}],77:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}},{}],78:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var o=0;o<n.length;o++)if(!i.call(t,n[o])||!r(e[n[o]],t[n[o]]))return!1;return!0};var i=Object.prototype.hasOwnProperty;function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}},{}],79:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=function(e,t,n){(0,r.default)(e)||(0,a.default)(n+"() in "+t+" must return a plain object. Instead received "+e+".")};var r=i(e("./isPlainObject")),a=i(e("./warning"))},{"./isPlainObject":77,"./warning":80,"@babel/runtime/helpers/interopRequireDefault":38}],80:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},{}],81:[function(e,t,n){"use strict";var i=e("object-assign"),r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function v(e,t,n,i,r,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,a,o,s],c=0;(e=Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw e.framesToPop=1,e}}function b(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);v(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function C(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||E}function T(){}function S(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||E}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&b("85"),this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=C.prototype;var k=S.prototype=new T;k.constructor=S,i(k,C.prototype),k.isPureReactComponent=!0;var x={current:null},_={current:null},O=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var i=void 0,r={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)O.call(t,i)&&!I.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:a,type:e,key:o,ref:s,props:r,_owner:_.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var A=/\/+/g,D=[];function R(e,t,n,i){if(D.length){var r=D.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function L(e,t,n,i){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var s=!1;if(null===e)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return n(i,e,""===t?"."+j(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+j(r=e[l],l);s+=L(r,c,n,i)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=y&&e[y]||e["@@iterator"])?c:null))for(e=c.call(e),l=0;!(r=e.next()).done;)s+=L(r=r.value,c=t+j(r,l++),n,i);else"object"===r&&b("31","[object Object]"==(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return s}function F(e,t,n){return null==e?0:L(e,"",t,n)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function B(e,t){e.func.call(e.context,t,e.count++)}function G(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,i,n,(function(e){return e})):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),i.push(e))}function U(e,t,n,i,r){var a="";null!=n&&(a=(""+n).replace(A,"$&/")+"/"),F(e,G,t=R(t,a,i,r)),M(t)}function z(){var e=x.current;return null===e&&b("307"),e}var H={Children:{map:function(e,t,n){if(null==e)return e;var i=[];return U(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;F(e,B,t=R(null,null,t,n)),M(t)},count:function(e){return F(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){return P(e)||b("143"),e}},createRef:function(){return{current:null}},Component:C,PureComponent:S,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return z().useCallback(e,t)},useContext:function(e,t){return z().useContext(e,t)},useEffect:function(e,t){return z().useEffect(e,t)},useImperativeHandle:function(e,t,n){return z().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return z().useLayoutEffect(e,t)},useMemo:function(e,t){return z().useMemo(e,t)},useReducer:function(e,t,n){return z().useReducer(e,t,n)},useRef:function(e){return z().useRef(e)},useState:function(e){return z().useState(e)},Fragment:s,StrictMode:l,Suspense:h,createElement:N,cloneElement:function(e,t,n){null==e&&b("267",e);var r=void 0,o=i({},e.props),s=e.key,l=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,c=_.current),void 0!==t.key&&(s=""+t.key);var u=void 0;for(r in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)O.call(t,r)&&!I.hasOwnProperty(r)&&(o[r]=void 0===t[r]&&void 0!==u?u[r]:t[r])}if(1==(r=arguments.length-2))o.children=n;else if(1<r){u=Array(r);for(var d=0;d<r;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:a,type:e.type,key:s,ref:l,props:o,_owner:c}},createFactory:function(e){var t=N.bind(null,e);return t.type=e,t},isValidElement:P,version:"16.8.3",unstable_ConcurrentMode:p,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentOwner:_,assign:i}},W={default:H},Y=W&&H||W;t.exports=Y.default||Y},{"object-assign":55}],82:[function(e,t,n){"use strict";t.exports=e("./cjs/react.production.min.js")},{"./cjs/react.production.min.js":81}],83:[function(e,t,n){"use strict";n.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};n.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,a){var s,l=e(n,r,a),c=l.dispatch,u={getState:l.getState,dispatch:function(e){return c(e)}};return s=t.map((function(e){return e(u)})),c=o.default.apply(void 0,s)(l.dispatch),i({},l,{dispatch:c})}}};var r,a=e("./compose"),o=(r=a)&&r.__esModule?r:{default:r}},{"./compose":86}],84:[function(e,t,n){"use strict";function i(e,t){return function(){return t(e.apply(void 0,arguments))}}n.__esModule=!0,n.default=function(e,t){if("function"==typeof e)return i(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},a=0;a<n.length;a++){var o=n[a],s=e[o];"function"==typeof s&&(r[o]=i(s,t))}return r}},{}],85:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var s=Object.keys(n),l=void 0;try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:i.ActionTypes.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){l=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(l)throw l;for(var i=!1,r={},o=0;o<s.length;o++){var c=s[o],u=n[c],d=e[c],p=u(d,t);if(void 0===p){var f=a(c,t);throw new Error(f)}r[c]=p,i=i||p!==d}return i?r:e}};var i=e("./createStore");r(e("lodash/isPlainObject")),r(e("./utils/warning"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}},{"./createStore":87,"./utils/warning":89,"lodash/isPlainObject":54}],86:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}},{}],87:[function(e,t,n){"use strict";n.__esModule=!0,n.ActionTypes=void 0,n.default=function e(t,n,a){var s;if("function"==typeof n&&void 0===a&&(a=n,n=void 0),void 0!==a){if("function"!=typeof a)throw new Error("Expected the enhancer to be a function.");return a(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var l=t,c=n,u=[],d=u,p=!1;function f(){d===u&&(d=u.slice())}function h(){return c}function m(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return f(),d.push(e),function(){if(t){t=!1,f();var n=d.indexOf(e);d.splice(n,1)}}}function g(e){if(!(0,i.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,c=l(c,e)}finally{p=!1}for(var t=u=d,n=0;n<t.length;n++)(0,t[n])();return e}return g({type:o.INIT}),(s={dispatch:g,subscribe:m,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,g({type:o.INIT})}})[r.default]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[r.default]=function(){return this},e},s};var i=a(e("lodash/isPlainObject")),r=a(e("symbol-observable"));function a(e){return e&&e.__esModule?e:{default:e}}var o=n.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":54,"symbol-observable":90}],88:[function(e,t,n){"use strict";n.__esModule=!0,n.compose=n.applyMiddleware=n.bindActionCreators=n.combineReducers=n.createStore=void 0;var i=l(e("./createStore")),r=l(e("./combineReducers")),a=l(e("./bindActionCreators")),o=l(e("./applyMiddleware")),s=l(e("./compose"));l(e("./utils/warning"));function l(e){return e&&e.__esModule?e:{default:e}}n.createStore=i.default,n.combineReducers=r.default,n.bindActionCreators=a.default,n.applyMiddleware=o.default,n.compose=s.default},{"./applyMiddleware":83,"./bindActionCreators":84,"./combineReducers":85,"./compose":86,"./createStore":87,"./utils/warning":89}],89:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},{}],90:[function(e,t,n){(function(i){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a,o=e("./ponyfill.js"),s=(a=o)&&a.__esModule?a:{default:a};r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:void 0!==t?t:Function("return this")();var l=(0,s.default)(r);n.default=l}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":91}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},{}]},{},[1]);